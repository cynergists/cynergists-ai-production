import{c as Ce,r as i,j as e,B as y,T as Ae,z as Te,K as I,n as Ie,k as Le,R as _e,g as Se,C as Ee,e as be,aF as oe,aD as Ve,F as qe,m as he}from"./app-yl1YHj2k.js";import{C as Ue}from"./checkbox-CSNWMEmv.js";import{L as r}from"./label-C79MsPnt.js";import{S as x}from"./separator-BjCLCjV4.js";import{S as $e}from"./scroll-area-LKcc-MsV.js";import{R as He}from"./rotate-ccw-CQHJezvr.js";import{S as ze}from"./star-DRyVxwCA.js";import{G as Ge}from"./grip-vertical-CJ71ZXt5.js";import{C as We}from"./chevron-up-CP4UIDax.js";import{E as Je}from"./eye-off-BiN6zURt.js";import{E as Ke}from"./eye-CeU3PbrC.js";import{I as n}from"./input-B3tD5KH9.js";import{P as Ye}from"./phone-input-AybdPrnc.js";import{T as Qe}from"./textarea-CY5CbXPo.js";import{S as Xe}from"./switch-B3r5IAhQ.js";import{S as ce,a as xe,b as pe,c as ge,d as ve}from"./select-bZyWIIk8.js";import{A as Ze,a as ea,b as aa,c as sa,d as ta,e as da,f as la,g as ia}from"./alert-dialog-DRoxD3tw.js";import{u as ra}from"./useAutoSave-CnxF731O.js";import{U as na}from"./user-UJ2Y2R-v.js";import{P as ma}from"./phone-Ded4WSVQ.js";import{B as ua}from"./building-2-BuqM12Jh.js";import{T as oa}from"./target-BCTYrAYs.js";import{U as ha}from"./user-plus-iCKm6Sz8.js";import{T as ca}from"./tag-CHJaFGHC.js";const xa=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],pa=Ce("FolderOpen",xa);const ga=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],qa=Ce("Settings2",ga);function Ua({columnOrder:a,hiddenColumns:t,savedViews:_,activeViewName:D,defaultViewName:L,columnLabels:p,onColumnOrderChange:w,onToggleColumn:k,onLoadView:E,onDeleteView:V,onSetDefaultView:g,onResetToDefault:F}){const[v,j]=i.useState(null),[S,h]=i.useState(null),c=(l,d)=>{if(l===d||d<0||d>=a.length)return;const m=[...a],[f]=m.splice(l,1);m.splice(d,0,f),w(m)},B=(l,d)=>{j(d),l.dataTransfer.effectAllowed="move",l.dataTransfer.setData("text/plain",d.toString())},b=(l,d)=>{l.preventDefault(),l.dataTransfer.dropEffect="move",h(d)},P=()=>{h(null)},C=(l,d)=>{l.preventDefault();const m=parseInt(l.dataTransfer.getData("text/plain"),10);!isNaN(m)&&m!==d&&c(m,d),j(null),h(null)},O=()=>{j(null),h(null)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium",children:"View Settings"}),e.jsxs(y,{variant:"ghost",size:"sm",onClick:F,children:[e.jsx(He,{className:"h-3 w-3 mr-1"}),"Reset"]})]}),_.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs font-medium",children:"Saved Views"}),e.jsx("div",{className:"space-y-1",children:_.map(l=>{const d=L===l.name;return e.jsxs("div",{className:`flex items-center justify-between p-2 rounded-md text-sm ${D===l.name?"bg-primary/10":"hover:bg-muted"}`,children:[e.jsxs("button",{onClick:()=>E(l.name),className:"flex items-center gap-2 flex-1 text-left",children:[e.jsx(pa,{className:"h-3 w-3"}),l.name,d&&e.jsx("span",{className:"text-xs text-primary",children:"(default)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(y,{variant:"ghost",size:"icon",className:`h-6 w-6 ${d?"text-primary":""}`,onClick:()=>g(d?null:l.name),title:d?"Remove as default":"Set as default",children:e.jsx(ze,{className:`h-3 w-3 ${d?"fill-primary":""}`})}),e.jsx(y,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>V(l.name),children:e.jsx(Ae,{className:"h-3 w-3"})})]})]},l.name)})})]}),e.jsx(x,{})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{className:"text-xs font-medium",children:"Columns (drag to reorder)"}),e.jsx($e,{className:"h-64",children:e.jsx("div",{className:"space-y-1 pr-4",children:a.map((l,d)=>{const m=t.includes(l),f=v===d,R=S===d;return e.jsxs("div",{draggable:!0,onDragStart:o=>B(o,d),onDragOver:o=>b(o,d),onDragLeave:P,onDrop:o=>C(o,d),onDragEnd:O,className:`flex items-center gap-2 p-2 rounded-md hover:bg-muted group transition-all ${f?"opacity-50 bg-muted":""} ${R?"border-t-2 border-primary":""}`,children:[e.jsx("div",{className:"cursor-grab active:cursor-grabbing",children:e.jsx(Ge,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs("div",{className:"flex flex-col -space-y-1",children:[e.jsx("button",{onClick:()=>c(d,d-1),disabled:d===0,className:"p-0.5 hover:bg-muted-foreground/20 rounded disabled:opacity-30 disabled:cursor-not-allowed",children:e.jsx(We,{className:"h-3 w-3 text-muted-foreground"})}),e.jsx("button",{onClick:()=>c(d,d+1),disabled:d===a.length-1,className:"p-0.5 hover:bg-muted-foreground/20 rounded disabled:opacity-30 disabled:cursor-not-allowed",children:e.jsx(Te,{className:"h-3 w-3 text-muted-foreground"})})]}),e.jsx(Ue,{id:`col-${l}`,checked:!m,onCheckedChange:()=>k(l)}),e.jsx(r,{htmlFor:`col-${l}`,className:"flex-1 text-sm cursor-pointer select-none",children:p[l]||l}),e.jsx("button",{onClick:()=>k(l),className:"p-1 hover:bg-muted-foreground/20 rounded",children:m?e.jsx(Je,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Ke,{className:"h-4 w-4 text-muted-foreground"})})]},l)})})})]})]})}const je={prospect:[{value:"cold",label:"Aware"},{value:"warm",label:"Interested"},{value:"hot",label:"Committed"}],client:[{value:"active",label:"Active"},{value:"past_due",label:"Past Due"},{value:"terminated",label:"Terminated"}],partner:[{value:"active",label:"Active"},{value:"pending",label:"Pending"},{value:"suspended",label:"Suspended"}]},fe={prospect:"cold",client:"active",partner:"active"};function $a({contact:a,contactType:t,onClose:_,onSave:D,onDelete:L,isCreating:p=!1,saving:w=!1,deleting:k=!1}){const[E,V]=i.useState(""),[g,F]=i.useState(""),[v,j]=i.useState(""),[S,h]=i.useState(""),[c,B]=i.useState(""),[b,P]=i.useState(""),[C,O]=i.useState(""),[l,d]=i.useState(""),[m,f]=i.useState(""),[R,o]=i.useState(""),[$,H]=i.useState(""),[A,M]=i.useState(fe[t]),[z,G]=i.useState(""),[Me,q]=i.useState(!1),[Ne,W]=i.useState(null),[J,K]=i.useState(""),[U,Y]=i.useState(""),[Q,X]=i.useState(""),[Z,ee]=i.useState(!1),[ae,se]=i.useState(""),[te,de]=i.useState(""),[le,ie]=i.useState(""),[re,ne]=i.useState(""),[me,ue]=i.useState("");i.useEffect(()=>{a?(V(a.name||""),F(a.firstName||""),j(a.lastName||""),h(a.nickName||""),B(a.email||""),P(a.phone||""),O(a.company||""),d(a.title||""),f(a.salesRep||""),o(a.partnerName||""),H((a.tags||[]).join(", ")),M(a.status||fe[t]),G(a.notes||""),K(a.services||""),Y(a.estimatedValue?.toString()||""),X(a.leadSource||""),ee(a.sdrSet||!1),se(a.estClosingDate?I(new Date(a.estClosingDate),"yyyy-MM-dd"):""),de(a.lastMeeting?I(new Date(a.lastMeeting),"yyyy-MM-dd"):""),ie(a.lastOutreach?I(new Date(a.lastOutreach),"yyyy-MM-dd"):""),ne(a.nextOutreach?I(new Date(a.nextOutreach),"yyyy-MM-dd"):""),ue(a.nextMeeting?I(new Date(a.nextMeeting),"yyyy-MM-dd'T'HH:mm"):"")):(V(""),F(""),j(""),h(""),B(""),P(""),O(""),d(""),f(""),o(""),H(""),M(fe[t]),G(""),K(""),Y(""),X(""),ee(!1),se(""),de(""),ie(""),ne(""),ue(""))},[a,t]);const T=i.useCallback(()=>{const s={status:A,tags:$.split(",").map(u=>u.trim()).filter(Boolean)};if(t==="partner")s.firstName=g||void 0,s.lastName=v||void 0,s.nickName=S||void 0,s.email=c||void 0,s.phone=b||void 0,s.company=C||void 0,s.title=l||void 0;else{const u=[g,v].filter(Boolean).join(" ")||E;s.name=u||void 0,s.firstName=g||void 0,s.lastName=v||void 0,s.nickName=S||void 0,s.email=c||void 0,s.phone=b||void 0,s.company=C||void 0,s.salesRep=m||void 0,s.partnerName=R||void 0,s.notes=z||void 0}return t==="prospect"&&(s.services=J||void 0,s.estimatedValue=U?parseFloat(U):void 0,s.leadSource=Q||void 0,s.sdrSet=Z,s.estClosingDate=ae||void 0,s.lastMeeting=te||void 0,s.lastOutreach=le||void 0,s.nextOutreach=re||void 0,s.nextMeeting=me||void 0),s},[E,g,v,S,c,b,C,l,m,R,$,A,z,J,U,Q,Z,ae,te,le,re,me,t]),De=i.useMemo(()=>T(),[T]),we=i.useCallback(async()=>{if(p)return!1;const s=T();return await D(s)},[p,T,D]),{isSaving:ye}=ra({data:De,onSave:we,enabled:!p&&!!a,showToast:!0}),ke=async()=>{const s=T();await D(s)&&_()},Fe=s=>{t==="client"&&s==="terminated"&&A!=="terminated"?(W(s),q(!0)):M(s)},Be=()=>{Ne&&M(Ne),q(!1),W(null)},Pe=()=>{q(!1),W(null)},N=({metadata:s})=>{if(!s?.updatedBy)return null;const u=s.updatedBy,Oe=u==="website"?"Website":u==="admin"?"Admin":u==="ghl"?"GHL":u==="square"?"Square":u,Re=u==="website"?"default":u==="admin"||u==="square"?"secondary":"outline";return e.jsxs(be,{variant:Re,className:"text-xs h-5",children:[Oe,s.updatedAt&&e.jsx("span",{className:"ml-1 opacity-70",children:oe(s.updatedAt)})]})};return e.jsxs("div",{className:"mt-4 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(na,{className:"h-4 w-4"}),"Contact Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{htmlFor:"firstName",children:"First Name *"}),a&&e.jsx(N,{metadata:a.nameMetadata})]}),e.jsx(n,{id:"firstName",value:g,onChange:s=>F(s.target.value),placeholder:"First name"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"lastName",children:"Last Name"}),e.jsx(n,{id:"lastName",value:v,onChange:s=>j(s.target.value),placeholder:"Last name"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"nickName",children:"Nick Name"}),e.jsx(n,{id:"nickName",value:S,onChange:s=>h(s.target.value),placeholder:"Preferred name for communications"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"If set, this name will be used in emails and communications"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(r,{htmlFor:"email",children:["Email ",p&&t==="partner"&&"*"]}),a&&e.jsx(N,{metadata:a.emailMetadata})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ie,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(n,{id:"email",type:"email",value:c,onChange:s=>B(s.target.value),placeholder:"email@example.com",className:"pl-9"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{htmlFor:"phone",children:"Phone"}),a&&e.jsx(N,{metadata:a.phoneMetadata})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ma,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground z-10"}),e.jsx(Ye,{id:"phone",value:b,onChange:s=>P(s),className:"pl-9"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{htmlFor:"company",children:"Company"}),a&&e.jsx(N,{metadata:a.companyMetadata})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ua,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(n,{id:"company",value:C,onChange:s=>O(s.target.value),placeholder:"Company name",className:"pl-9"})]})]}),t==="partner"&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"title",children:"Title"}),e.jsx(n,{id:"title",value:l,onChange:s=>d(s.target.value),placeholder:"Job title"})]}),t==="prospect"&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"services",children:"Services"}),e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(n,{id:"services",value:J,onChange:s=>K(s.target.value),placeholder:"Services interested in",className:"pl-9"})]})]})]})]}),e.jsx(x,{}),t==="prospect"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(oa,{className:"h-4 w-4"}),"Pipeline Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"status",children:"Status"}),e.jsxs(ce,{value:A,onValueChange:s=>M(s),children:[e.jsx(xe,{children:e.jsx(pe,{})}),e.jsx(ge,{children:je[t].map(s=>e.jsx(ve,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"estimatedValue",children:"Est Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx(_e,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(n,{id:"estimatedValue",type:"number",value:U,onChange:s=>Y(s.target.value),placeholder:"Estimated value",className:"pl-9"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"leadSource",children:"Source"}),e.jsx(n,{id:"leadSource",value:Q,onChange:s=>X(s.target.value),placeholder:"e.g., Website, Referral, LinkedIn"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"estClosingDate",children:"Est Closing Date"}),e.jsx(n,{id:"estClosingDate",type:"date",value:ae,onChange:s=>se(s.target.value)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{htmlFor:"sdrSet",children:"SDR Set"}),e.jsx(Xe,{id:"sdrSet",checked:Z,onCheckedChange:ee})]})]})]}),e.jsx(x,{})]}),t==="partner"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ha,{className:"h-4 w-4"}),"Partner Status"]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"status",children:"Status"}),e.jsxs(ce,{value:A,onValueChange:s=>M(s),children:[e.jsx(xe,{children:e.jsx(pe,{})}),e.jsx(ge,{children:je[t].map(s=>e.jsx(ve,{value:s.value,children:s.label},s.value))})]})]})})]}),e.jsx(x,{})]}),t==="client"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Se,{className:"h-4 w-4"}),"Admin Fields"]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"status",children:"Status"}),e.jsxs(ce,{value:A,onValueChange:s=>Fe(s),children:[e.jsx(xe,{children:e.jsx(pe,{})}),e.jsx(ge,{children:je[t].map(s=>e.jsx(ve,{value:s.value,children:s.label},s.value))})]})]})})]}),e.jsx(x,{})]}),(t==="prospect"||t==="client")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Se,{className:"h-4 w-4"}),"Assignment"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{htmlFor:"salesRep",children:"Sales Rep"}),a&&e.jsx(N,{metadata:a.salesRepMetadata})]}),e.jsx(n,{id:"salesRep",value:m,onChange:s=>f(s.target.value),placeholder:"Sales representative"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{htmlFor:"partnerName",children:"Partner"}),a&&e.jsx(N,{metadata:a.partnerNameMetadata})]}),e.jsx(n,{id:"partnerName",value:R,onChange:s=>o(s.target.value),placeholder:"Partner name"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{htmlFor:"tags",children:"Tags"}),a&&e.jsx(N,{metadata:a.tagsMetadata})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ca,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(n,{id:"tags",value:$,onChange:s=>H(s.target.value),placeholder:"tag1, tag2, tag3",className:"pl-9"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Comma-separated list"})]})]})]}),e.jsx(x,{})]}),t==="prospect"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Ee,{className:"h-4 w-4"}),"Activity Dates"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"lastMeeting",children:"Last Meeting"}),e.jsx(n,{id:"lastMeeting",type:"date",value:te,onChange:s=>de(s.target.value)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"lastOutreach",children:"Last Outreach"}),e.jsx(n,{id:"lastOutreach",type:"date",value:le,onChange:s=>ie(s.target.value)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"nextOutreach",children:"Next Outreach"}),e.jsx(n,{id:"nextOutreach",type:"date",value:re,onChange:s=>ne(s.target.value)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{htmlFor:"nextMeeting",children:"Next Meeting"}),e.jsx(n,{id:"nextMeeting",type:"datetime-local",value:me,onChange:s=>ue(s.target.value)})]})]})]}),e.jsx(x,{})]}),t==="client"&&a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(_e,{className:"h-4 w-4"}),"Payment Information",e.jsx(be,{variant:"secondary",className:"text-xs",children:"Square"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Payment Type"}),e.jsx("p",{className:"font-medium",children:a.paymentType||"—"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Amount"}),e.jsx("p",{className:"font-medium",children:a.paymentAmount?`$${a.paymentAmount.toLocaleString()}`:"—"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Last Payment"}),e.jsx("p",{className:"font-medium",children:a.lastPaymentDate?oe(a.lastPaymentDate):"—"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Next Payment"}),e.jsx("p",{className:"font-medium",children:a.nextPaymentDueDate?oe(a.nextPaymentDueDate):"—"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Plan"}),e.jsx("p",{className:"font-medium",children:a.squarePlanName||"—"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Last Synced"}),e.jsx("p",{className:"font-medium",children:a.squareSyncedAt?Ve(a.squareSyncedAt):"—"})]})]})]}),e.jsx(x,{})]}),(t==="prospect"||t==="client")&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(qe,{className:"h-4 w-4"}),"Notes"]}),e.jsx(Qe,{value:z,onChange:s=>G(s.target.value),placeholder:"Add notes about this contact...",rows:4})]}),e.jsx("div",{className:"sticky bottom-0 pt-4 bg-background border-t space-y-2",children:e.jsx("div",{className:"flex items-center gap-2",children:p?e.jsxs(e.Fragment,{children:[e.jsx(y,{variant:"outline",className:"flex-1",onClick:_,children:"Cancel"}),e.jsx(y,{className:"flex-1",onClick:ke,disabled:w,children:w?e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):`Create ${t.charAt(0).toUpperCase()+t.slice(1)}`})]}):e.jsxs(e.Fragment,{children:[L&&e.jsx(y,{variant:"destructive",className:"flex-1",onClick:L,disabled:w||k||ye,children:k?e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Delete",ye&&e.jsx(he,{className:"h-3 w-3 ml-2 animate-spin"})]})}),e.jsx(y,{variant:"outline",className:"flex-1",onClick:_,children:"Close"})]})})}),e.jsx(Ze,{open:Me,onOpenChange:q,children:e.jsxs(ea,{children:[e.jsxs(aa,{children:[e.jsx(sa,{children:"Terminate Client?"}),e.jsxs(ta,{className:"space-y-2",children:[e.jsx("p",{children:"Are you sure you want to terminate this client? This action will:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Cancel their active subscription in Square"}),e.jsx("li",{children:"Stop all future automatic payments"}),e.jsx("li",{children:"Mark the client as terminated in the system"})]}),e.jsx("p",{className:"font-medium text-destructive",children:"This will immediately stop payments from being pulled from their bank or card."})]})]}),e.jsxs(da,{children:[e.jsx(la,{onClick:Pe,children:"Cancel"}),e.jsx(ia,{onClick:Be,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Yes, Terminate Client"})]})]})})]})}function Ha(a){return{id:a.id,contactType:"prospect",name:a.name,firstName:a.first_name,lastName:a.last_name,nickName:a.nick_name,email:a.email,phone:a.phone,company:a.company,salesRep:a.sales_rep,partnerName:a.partner_name,tags:a.tags||[],status:a.status||"cold",notes:a.notes,createdAt:a.created_at,updatedAt:a.updated_at,services:a.services,estimatedValue:a.estimated_value,leadSource:a.lead_source,interestedPlan:a.interested_plan,sdrSet:a.sdr_set,estClosingDate:a.est_closing_date,lastMeeting:a.last_meeting,lastOutreach:a.last_outreach,nextOutreach:a.next_outreach,nextMeeting:a.next_meeting,lastActivity:a.last_activity,lastContact:a.last_contact,ghlContactId:a.ghl_contact_id,ghlSyncedAt:a.ghl_synced_at,nameMetadata:{updatedAt:a.name_updated_at,updatedBy:a.name_updated_by},emailMetadata:{updatedAt:a.email_updated_at,updatedBy:a.email_updated_by},phoneMetadata:{updatedAt:a.phone_updated_at,updatedBy:a.phone_updated_by},companyMetadata:{updatedAt:a.company_updated_at,updatedBy:a.company_updated_by},salesRepMetadata:{updatedAt:a.sales_rep_updated_at,updatedBy:a.sales_rep_updated_by},partnerNameMetadata:{updatedAt:a.partner_name_updated_at,updatedBy:a.partner_name_updated_by},tagsMetadata:{updatedAt:a.tags_updated_at,updatedBy:a.tags_updated_by},estClosingDateMetadata:{updatedAt:a.est_closing_date_updated_at,updatedBy:a.est_closing_date_updated_by},lastMeetingMetadata:{updatedAt:a.last_meeting_updated_at,updatedBy:a.last_meeting_updated_by},lastOutreachMetadata:{updatedAt:a.last_outreach_updated_at,updatedBy:a.last_outreach_updated_by},nextOutreachMetadata:{updatedAt:a.next_outreach_updated_at,updatedBy:a.next_outreach_updated_by},nextMeetingMetadata:{updatedAt:a.next_meeting_updated_at,updatedBy:a.next_meeting_updated_by},lastActivityMetadata:{updatedAt:a.last_activity_updated_at,updatedBy:a.last_activity_updated_by},lastContactMetadata:{updatedAt:a.last_contact_updated_at,updatedBy:a.last_contact_updated_by}}}function za(a){return{id:a.id,contactType:"client",name:a.name,firstName:a.first_name,lastName:a.last_name,nickName:a.nick_name,email:a.email,phone:a.phone,company:a.company,salesRep:a.sales_rep,partnerName:a.partner_name,tags:a.tags||[],status:a.status||"active",createdAt:a.created_at,updatedAt:a.updated_at,paymentType:a.payment_type,paymentAmount:a.payment_amount,lastPaymentDate:a.last_payment_date,nextPaymentDueDate:a.next_payment_due_date,squareCustomerId:a.square_customer_id,squareSubscriptionId:a.square_subscription_id,squarePlanName:a.square_plan_name,squareSyncedAt:a.square_synced_at,lastActivity:a.last_activity,lastContact:a.last_contact,nextMeeting:a.next_meeting,ghlContactId:a.ghl_contact_id,ghlSyncedAt:a.ghl_synced_at,nameMetadata:{updatedAt:a.name_updated_at,updatedBy:a.name_updated_by},emailMetadata:{updatedAt:a.email_updated_at,updatedBy:a.email_updated_by},phoneMetadata:{updatedAt:a.phone_updated_at,updatedBy:a.phone_updated_by},companyMetadata:{updatedAt:a.company_updated_at,updatedBy:a.company_updated_by},salesRepMetadata:{updatedAt:a.sales_rep_updated_at,updatedBy:a.sales_rep_updated_by},partnerNameMetadata:{updatedAt:a.partner_name_updated_at,updatedBy:a.partner_name_updated_by},tagsMetadata:{updatedAt:a.tags_updated_at,updatedBy:a.tags_updated_by},lastActivityMetadata:{updatedAt:a.last_activity_updated_at,updatedBy:a.last_activity_updated_by},lastContactMetadata:{updatedAt:a.last_contact_updated_at,updatedBy:a.last_contact_updated_by},nextMeetingMetadata:{updatedAt:a.next_meeting_updated_at,updatedBy:a.next_meeting_updated_by}}}function Ga(a){const t={};return a.name!==void 0&&(t.name=a.name),a.firstName!==void 0&&(t.first_name=a.firstName),a.lastName!==void 0&&(t.last_name=a.lastName),a.nickName!==void 0&&(t.nick_name=a.nickName),a.email!==void 0&&(t.email=a.email),a.phone!==void 0&&(t.phone=a.phone),a.company!==void 0&&(t.company=a.company),a.salesRep!==void 0&&(t.sales_rep=a.salesRep),a.partnerName!==void 0&&(t.partner_name=a.partnerName),a.tags!==void 0&&(t.tags=a.tags),a.status!==void 0&&(t.status=a.status),a.notes!==void 0&&(t.notes=a.notes),a.services!==void 0&&(t.services=a.services),a.estimatedValue!==void 0&&(t.estimated_value=a.estimatedValue),a.leadSource!==void 0&&(t.lead_source=a.leadSource),a.interestedPlan!==void 0&&(t.interested_plan=a.interestedPlan),a.sdrSet!==void 0&&(t.sdr_set=a.sdrSet),a.estClosingDate!==void 0&&(t.est_closing_date=a.estClosingDate),a.lastMeeting!==void 0&&(t.last_meeting=a.lastMeeting),a.lastOutreach!==void 0&&(t.last_outreach=a.lastOutreach),a.nextOutreach!==void 0&&(t.next_outreach=a.nextOutreach),a.nextMeeting!==void 0&&(t.next_meeting=a.nextMeeting),t}function Wa(a){const t={};return a.name!==void 0&&(t.name=a.name),a.firstName!==void 0&&(t.first_name=a.firstName),a.lastName!==void 0&&(t.last_name=a.lastName),a.nickName!==void 0&&(t.nick_name=a.nickName),a.email!==void 0&&(t.email=a.email),a.phone!==void 0&&(t.phone=a.phone),a.company!==void 0&&(t.company=a.company),a.salesRep!==void 0&&(t.sales_rep=a.salesRep),a.partnerName!==void 0&&(t.partner_name=a.partnerName),a.tags!==void 0&&(t.tags=a.tags),a.status!==void 0&&(t.status=a.status),t}export{qa as S,$a as U,Ua as V,Wa as a,Ga as b,za as c,Ha as p};
