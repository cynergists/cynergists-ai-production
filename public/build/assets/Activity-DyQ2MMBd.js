import{bd as N,u as v,j as e,b as c,e as y,g as w,f as b}from"./app-DpPlT-lI.js";import{C as l,b as d,c as m,d as o,a as x}from"./card-CenXMO1c.js";import{S as u}from"./skeleton-C5_yue2P.js";import{A as C}from"./activity-B_BqFuZi.js";import{M as h}from"./message-square-PdfB_fvj.js";import{T as _}from"./trending-up-CXx5mdBR.js";import{f as j}from"./formatDistanceToNow-C2AXSWqQ.js";/* empty css            */import"./endOfMonth-1D88HIjJ.js";import"./endOfDay-DYXIerzM.js";function P(){const{user:t}=N(),{data:r,isLoading:i}=v({queryKey:["portal-conversations",t?.id],queryFn:async()=>b.get("/api/portal/activity"),enabled:!!t?.id}),n=r?.conversations??[],a=r?.agentStats??[],p=i,g=Math.max(1,...a.map(s=>s.usage_count||0));return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(C,{className:"h-8 w-8 text-primary"}),e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Activity"})]}),e.jsx("p",{className:"text-muted-foreground",children:"View your recent agent interactions and usage."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(l,{children:[e.jsxs(d,{children:[e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-5 w-5"}),"Recent Conversations"]}),e.jsx(o,{children:"Your latest agent interactions"})]}),e.jsx(x,{children:i?e.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(s=>e.jsx(u,{className:"h-16 w-full"},s))}):n.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(h,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No conversations yet"}),e.jsx("p",{className:"text-sm",children:"Start chatting with an agent to see activity here"})]}):e.jsx("div",{className:"space-y-3",children:n.map(s=>{const f=s.access;return e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-border hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(c,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.title||"Untitled Conversation"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:f?.agent_name||"Agent"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(y,{variant:s.status==="active"?"default":"outline",children:s.status}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:j(new Date(s.updated_at),{addSuffix:!0})})]})]},s.id)})})})]})}),e.jsx("div",{children:e.jsxs(l,{children:[e.jsxs(d,{children:[e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5"}),"Agent Usage"]}),e.jsx(o,{children:"Messages per agent"})]}),e.jsx(x,{children:p?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsx(u,{className:"h-12 w-full"},s))}):a.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(c,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No agent usage yet"})]}):e.jsx("div",{className:"space-y-4",children:a.map(s=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-medium",children:s.agent_name}),e.jsxs("span",{className:"text-muted-foreground",children:[s.usage_count||0," msgs"]})]}),e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary transition-all",style:{width:`${Math.min(100,(s.usage_count||0)/g*100)}%`}})}),s.last_used_at&&e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(w,{className:"h-3 w-3"}),"Last used ",j(new Date(s.last_used_at),{addSuffix:!0})]})]},s.id))})})]})})]})]})}export{P as default};
