import{c as xt,I as o,r as T,j as e,a as pe,m as Ee,e as U,B as de,X as Zt,F as _e,t as en,C as tn,aF as Ye,q as nn,s as De,i as st,Q as it,H as rn,U as an,g as sn}from"./app-Lw9toWEL.js";import{C as je,a as $e,b as ke,c as Oe,d as Xe}from"./card-HJJ00fMS.js";import{T as wt,a as vt,b as Pe,c as q,d as yt,e as G}from"./table-BKcxsROd.js";import{u as on,M as ln}from"./MSAWorkflow-EtKf0_Di.js";import{a as cn,b as dn,D as un,R as mn,P as fn,C as hn,O as pn}from"./index-BNissOqM.js";import{S as Be}from"./separator-CZ854j0t.js";import{E as bt}from"./eye-COYcjsCX.js";import{D as ot}from"./download-BJFp7sOo.js";import{U as gn}from"./user-B6g2DlSq.js";import{B as xn}from"./building-ICyNChQA.js";import{T as wn}from"./tag-DRNCO3t3.js";import{S as lt}from"./shield-CRohBmyg.js";import{U as ct}from"./user-check-zCK-DeoF.js";import{C as dt}from"./circle-x-DM9VEE9U.js";import{C as vn}from"./circle-check-big-ZA6qdrqv.js";/* empty css            */import"./index-BHfETOYV.js";import"./dropdown-menu-BTiuO5Dw.js";import"./index-BH5mg2Zd.js";import"./index-DVcw4AEI.js";import"./Combination-DTrGx453.js";import"./index-DiOyCk7G.js";import"./check-DtvS8aN0.js";import"./circle-BiYF-lSz.js";import"./dialog-a7boSf8M.js";import"./scroll-area-QxNMFOlD.js";import"./index-BdQq_4o_.js";import"./alert-DArGoHQz.js";import"./chevron-up-DIuzYlEQ.js";import"./bell-CxIBNzoY.js";import"./square-pen-BqH9410N.js";import"./label-BmZ0klfu.js";import"./index-Bewwc68W.js";import"./textarea-CTL7xJ4c.js";import"./input-yF94Vncd.js";import"./admin-api-B8jHZPP8.js";import"./triangle-alert-kqnMKm3M.js";import"./send-4vHz585h.js";import"./index-ClTetRew.js";const yn=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Me=xt("Archive",yn);const bn=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],jn=xt("ScrollText",bn);function Nn(t){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",r.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const jt=o.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),Ne=()=>{const t=o.useContext(jt);if(!t)throw new Error("useDrawerContext must be used within a Drawer.Root");return t};Nn(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,100%,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,-100%,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(-100%,0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(100%,0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,100%,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,100%,0)}}@keyframes slideFromTop{from{transform:translate3d(0,-100%,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,-100%,0)}}@keyframes slideFromLeft{from{transform:translate3d(-100%,0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(-100%,0,0)}}@keyframes slideFromRight{from{transform:translate3d(100%,0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(100%,0,0)}}`);const Sn=24,Cn=typeof window<"u"?T.useLayoutEffect:T.useEffect;function ut(...t){return(...r)=>{for(let n of t)typeof n=="function"&&n(...r)}}function Tn(){return Ke(/^Mac/)}function Dn(){return Ke(/^iPhone/)}function mt(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function An(){return Ke(/^iPad/)||Tn()&&navigator.maxTouchPoints>1}function Nt(){return Dn()||An()}function Ke(t){return typeof window<"u"&&window.navigator!=null?t.test(window.navigator.platform):void 0}const Ue=typeof document<"u"&&window.visualViewport;function ft(t){let r=window.getComputedStyle(t);return/(auto|scroll)/.test(r.overflow+r.overflowX+r.overflowY)}function St(t){for(ft(t)&&(t=t.parentElement);t&&!ft(t);)t=t.parentElement;return t||document.scrollingElement||document.documentElement}const Rn=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Ae=0,Fe;function En(t={}){let{isDisabled:r}=t;Cn(()=>{if(!r)return Ae++,Ae===1&&Nt()&&(Fe=_n()),()=>{Ae--,Ae===0&&Fe?.()}},[r])}function _n(){let t,r=0,n=u=>{t=St(u.target),!(t===document.documentElement&&t===document.body)&&(r=u.changedTouches[0].pageY)},a=u=>{if(!t||t===document.documentElement||t===document.body){u.preventDefault();return}let h=u.changedTouches[0].pageY,O=t.scrollTop,M=t.scrollHeight-t.clientHeight;M!==0&&((O<=0&&h>r||O>=M&&h<r)&&u.preventDefault(),r=h)},c=u=>{let h=u.target;qe(h)&&h!==document.activeElement&&(u.preventDefault(),h.style.transform="translateY(-2000px)",h.focus(),requestAnimationFrame(()=>{h.style.transform=""}))},s=u=>{let h=u.target;qe(h)&&(h.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{h.style.transform="",Ue&&(Ue.height<window.innerHeight?requestAnimationFrame(()=>{ht(h)}):Ue.addEventListener("resize",()=>ht(h),{once:!0}))}))},y=()=>{window.scrollTo(0,0)},v=window.pageXOffset,b=window.pageYOffset,d=ut(kn(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let i=ut(ye(document,"touchstart",n,{passive:!1,capture:!0}),ye(document,"touchmove",a,{passive:!1,capture:!0}),ye(document,"touchend",c,{passive:!1,capture:!0}),ye(document,"focus",s,!0),ye(window,"scroll",y));return()=>{d(),i(),window.scrollTo(v,b)}}function kn(t,r,n){let a=t.style[r];return t.style[r]=n,()=>{t.style[r]=a}}function ye(t,r,n,a){return t.addEventListener(r,n,a),()=>{t.removeEventListener(r,n,a)}}function ht(t){let r=document.scrollingElement||document.documentElement;for(;t&&t!==r;){let n=St(t);if(n!==document.documentElement&&n!==document.body&&n!==t){let a=n.getBoundingClientRect().top,c=t.getBoundingClientRect().top,s=t.getBoundingClientRect().bottom;const y=n.getBoundingClientRect().bottom+Sn;s>y&&(n.scrollTop+=c-a)}t=n.parentElement}}function qe(t){return t instanceof HTMLInputElement&&!Rn.has(t.type)||t instanceof HTMLTextAreaElement||t instanceof HTMLElement&&t.isContentEditable}function On(t,r){typeof t=="function"?t(r):t!=null&&(t.current=r)}function $n(...t){return r=>t.forEach(n=>On(n,r))}function Ct(...t){return T.useCallback($n(...t),t)}const Tt=new WeakMap;function I(t,r,n=!1){if(!t||!(t instanceof HTMLElement))return;let a={};Object.entries(r).forEach(([c,s])=>{if(c.startsWith("--")){t.style.setProperty(c,s);return}a[c]=t.style[c],t.style[c]=s}),!n&&Tt.set(t,a)}function Pn(t,r){if(!t||!(t instanceof HTMLElement))return;let n=Tt.get(t);n&&(t.style[r]=n[r])}const H=t=>{switch(t){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return t}};function Re(t,r){if(!t)return null;const n=window.getComputedStyle(t),a=n.transform||n.webkitTransform||n.mozTransform;let c=a.match(/^matrix3d\((.+)\)$/);return c?parseFloat(c[1].split(", ")[H(r)?13:12]):(c=a.match(/^matrix\((.+)\)$/),c?parseFloat(c[1].split(", ")[H(r)?5:4]):null)}function Mn(t){return 8*(Math.log(t+1)-2)}function ze(t,r){if(!t)return()=>{};const n=t.style.cssText;return Object.assign(t.style,r),()=>{t.style.cssText=n}}function Ln(...t){return(...r)=>{for(const n of t)typeof n=="function"&&n(...r)}}const k={DURATION:.5,EASE:[.32,.72,0,1]},Dt=.4,In=.25,Hn=100,At=8,fe=16,Ge=26,Ve="vaul-dragging";function Rt(t){const r=o.useRef(t);return o.useEffect(()=>{r.current=t}),o.useMemo(()=>(...n)=>r.current==null?void 0:r.current.call(r,...n),[])}function Bn({defaultProp:t,onChange:r}){const n=o.useState(t),[a]=n,c=o.useRef(a),s=Rt(r);return o.useEffect(()=>{c.current!==a&&(s(a),c.current=a)},[a,c,s]),n}function Et({prop:t,defaultProp:r,onChange:n=()=>{}}){const[a,c]=Bn({defaultProp:r,onChange:n}),s=t!==void 0,y=s?t:a,v=Rt(n),b=o.useCallback(d=>{if(s){const u=typeof d=="function"?d(t):d;u!==t&&v(u)}else c(d)},[s,t,c,v]);return[y,b]}function Un({activeSnapPointProp:t,setActiveSnapPointProp:r,snapPoints:n,drawerRef:a,overlayRef:c,fadeFromIndex:s,onSnapPointChange:y,direction:v="bottom",container:b,snapToSequentialPoint:d}){const[i,u]=Et({prop:t,defaultProp:n?.[0],onChange:r}),[h,O]=o.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);o.useEffect(()=>{function g(){O({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]);const M=o.useMemo(()=>i===n?.[n.length-1]||null,[n,i]),D=o.useMemo(()=>n?.findIndex(g=>g===i),[n,i]),K=n&&n.length>0&&(s||s===0)&&!Number.isNaN(s)&&n[s]===i||!n,x=o.useMemo(()=>{const g=b?{width:b.getBoundingClientRect().width,height:b.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var j;return(j=n?.map(N=>{const z=typeof N=="string";let m=0;if(z&&(m=parseInt(N,10)),H(v)){const _=z?m:h?N*g.height:0;return h?v==="bottom"?g.height-_:-g.height+_:_}const L=z?m:h?N*g.width:0;return h?v==="right"?g.width-L:-g.width+L:L}))!=null?j:[]},[n,h,b]),B=o.useMemo(()=>D!==null?x?.[D]:null,[x,D]),P=o.useCallback(g=>{var j;const N=(j=x?.findIndex(z=>z===g))!=null?j:null;y(N),I(a.current,{transition:`transform ${k.DURATION}s cubic-bezier(${k.EASE.join(",")})`,transform:H(v)?`translate3d(0, ${g}px, 0)`:`translate3d(${g}px, 0, 0)`}),x&&N!==x.length-1&&N!==s&&N<s?I(c.current,{transition:`opacity ${k.DURATION}s cubic-bezier(${k.EASE.join(",")})`,opacity:"0"}):I(c.current,{transition:`opacity ${k.DURATION}s cubic-bezier(${k.EASE.join(",")})`,opacity:"1"}),u(n?.[Math.max(N,0)])},[a.current,n,x,s,c,u]);o.useEffect(()=>{if(i||t){var g;const j=(g=n?.findIndex(N=>N===t||N===i))!=null?g:-1;x&&j!==-1&&typeof x[j]=="number"&&P(x[j])}},[i,t,n,x,P]);function p({draggedDistance:g,closeDrawer:j,velocity:N,dismissible:z}){if(s===void 0)return;const m=v==="bottom"||v==="right"?(B??0)-g:(B??0)+g,L=D===s-1,_=D===0,V=g>0;if(L&&I(c.current,{transition:`opacity ${k.DURATION}s cubic-bezier(${k.EASE.join(",")})`}),!d&&N>2&&!V){z?j():P(x[0]);return}if(!d&&N>2&&V&&x&&n){P(x[n.length-1]);return}const W=x?.reduce((Y,oe)=>typeof Y!="number"||typeof oe!="number"?Y:Math.abs(oe-m)<Math.abs(Y-m)?oe:Y),ae=H(v)?window.innerHeight:window.innerWidth;if(N>Dt&&Math.abs(g)<ae*.4){const Y=V?1:-1;if(Y>0&&M){P(x[n.length-1]);return}if(_&&Y<0&&z&&j(),D===null)return;P(x[D+Y]);return}P(W)}function F({draggedDistance:g}){if(B===null)return;const j=v==="bottom"||v==="right"?B-g:B+g;(v==="bottom"||v==="right")&&j<x[x.length-1]||(v==="top"||v==="left")&&j>x[x.length-1]||I(a.current,{transform:H(v)?`translate3d(0, ${j}px, 0)`:`translate3d(${j}px, 0, 0)`})}function te(g,j){if(!n||typeof D!="number"||!x||s===void 0)return null;const N=D===s-1;if(D>=s&&j)return 0;if(N&&!j)return 1;if(!K&&!N)return null;const m=N?D+1:D-1,L=N?x[m]-x[m-1]:x[m+1]-x[m],_=g/Math.abs(L);return N?1-_:_}return{isLastSnapPoint:M,activeSnapPoint:i,shouldFade:K,getPercentageDragged:te,setActiveSnapPoint:u,activeSnapPointIndex:D,onRelease:p,onDrag:F,snapPointsOffset:x}}const Fn=()=>()=>{};function zn(){const{direction:t,isOpen:r,shouldScaleBackground:n,setBackgroundColorOnScale:a,noBodyStyles:c}=Ne(),s=o.useRef(null),y=T.useMemo(()=>document.body.style.backgroundColor,[]);function v(){return(window.innerWidth-Ge)/window.innerWidth}o.useEffect(()=>{if(r&&n){s.current&&clearTimeout(s.current);const b=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!b)return;Ln(a&&!c?ze(document.body,{background:"black"}):Fn,ze(b,{transformOrigin:H(t)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${k.DURATION}s`,transitionTimingFunction:`cubic-bezier(${k.EASE.join(",")})`}));const d=ze(b,{borderRadius:`${At}px`,overflow:"hidden",...H(t)?{transform:`scale(${v()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${v()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{d(),s.current=window.setTimeout(()=>{y?document.body.style.background=y:document.body.style.removeProperty("background")},k.DURATION*1e3)}}},[r,n,y])}let be=null;function Vn({isOpen:t,modal:r,nested:n,hasBeenOpened:a,preventScrollRestoration:c,noBodyStyles:s}){const[y,v]=o.useState(()=>typeof window<"u"?window.location.href:""),b=o.useRef(0),d=o.useCallback(()=>{if(mt()&&be===null&&t&&!s){be={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:u,innerHeight:h}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-b.current}px`,left:`${-u}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const O=h-window.innerHeight;O&&b.current>=h&&(document.body.style.top=`${-(b.current+O)}px`)}),300)}},[t]),i=o.useCallback(()=>{if(mt()&&be!==null&&!s){const u=-parseInt(document.body.style.top,10),h=-parseInt(document.body.style.left,10);Object.assign(document.body.style,be),window.requestAnimationFrame(()=>{if(c&&y!==window.location.href){v(window.location.href);return}window.scrollTo(h,u)}),be=null}},[y]);return o.useEffect(()=>{function u(){b.current=window.scrollY}return u(),window.addEventListener("scroll",u),()=>{window.removeEventListener("scroll",u)}},[]),o.useEffect(()=>{n||!a||(t?(!window.matchMedia("(display-mode: standalone)").matches&&d(),r||window.setTimeout(()=>{i()},500)):i())},[t,a,y,r,n,d,i]),{restorePositionSetting:i}}function Wn({open:t,onOpenChange:r,children:n,onDrag:a,onRelease:c,snapPoints:s,shouldScaleBackground:y=!1,setBackgroundColorOnScale:v=!0,closeThreshold:b=In,scrollLockTimeout:d=Hn,dismissible:i=!0,handleOnly:u=!1,fadeFromIndex:h=s&&s.length-1,activeSnapPoint:O,setActiveSnapPoint:M,fixed:D,modal:K=!0,onClose:x,nested:B,noBodyStyles:P,direction:p="bottom",defaultOpen:F=!1,disablePreventScroll:te=!0,snapToSequentialPoint:g=!1,preventScrollRestoration:j=!1,repositionInputs:N=!0,onAnimationEnd:z,container:m,autoFocus:L=!1}){var _,V;const[W=!1,ae]=Et({defaultProp:F,prop:t,onChange:f=>{r?.(f),!f&&!B&&Wt(),setTimeout(()=>{z?.(f)},k.DURATION*1e3),f&&!K&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),f||(document.body.style.pointerEvents="auto")}}),[Y,oe]=o.useState(!1),[le,X]=o.useState(!1),[l,$]=o.useState(!1),R=o.useRef(null),Q=o.useRef(null),Z=o.useRef(null),ue=o.useRef(null),Se=o.useRef(null),ge=o.useRef(!1),Le=o.useRef(null),Ie=o.useRef(0),he=o.useRef(!1),Je=o.useRef(0),w=o.useRef(null),Qe=o.useRef(((_=w.current)==null?void 0:_.getBoundingClientRect().height)||0),Ze=o.useRef(((V=w.current)==null?void 0:V.getBoundingClientRect().width)||0),He=o.useRef(0),Bt=o.useCallback(f=>{s&&f===we.length-1&&(Q.current=new Date)},[]),{activeSnapPoint:Ut,activeSnapPointIndex:xe,setActiveSnapPoint:et,onRelease:Ft,snapPointsOffset:we,onDrag:zt,shouldFade:tt,getPercentageDragged:Vt}=Un({snapPoints:s,activeSnapPointProp:O,setActiveSnapPointProp:M,drawerRef:w,fadeFromIndex:h,overlayRef:R,onSnapPointChange:Bt,direction:p,container:m,snapToSequentialPoint:g});En({isDisabled:!W||le||!K||l||!Y||!N||!te});const{restorePositionSetting:Wt}=Vn({isOpen:W,modal:K,nested:B,hasBeenOpened:Y,preventScrollRestoration:j,noBodyStyles:P});function Ce(){return(window.innerWidth-Ge)/window.innerWidth}function Yt(f){var S,A;!i&&!s||w.current&&!w.current.contains(f.target)||(Qe.current=((S=w.current)==null?void 0:S.getBoundingClientRect().height)||0,Ze.current=((A=w.current)==null?void 0:A.getBoundingClientRect().width)||0,X(!0),Z.current=new Date,Nt()&&window.addEventListener("touchend",()=>ge.current=!1,{once:!0}),f.target.setPointerCapture(f.pointerId),Ie.current=H(p)?f.pageY:f.pageX)}function nt(f,S){var A,E;let C=f;const ne=(A=window.getSelection())==null?void 0:A.toString(),J=w.current?Re(w.current,p):null,ee=new Date;if(C.hasAttribute("data-vaul-no-drag")||C.closest("[data-vaul-no-drag]"))return!1;if(p==="right"||p==="left")return!0;if(Q.current&&ee.getTime()-Q.current.getTime()<500)return!1;if(J!==null&&(p==="bottom"?J>0:J<0))return!0;if(ne&&ne.length>0)return!1;if(ee.getTime()-((E=Se.current)==null?void 0:E.getTime())<d&&J===0||S)return Se.current=ee,!1;for(;C;){if(C.scrollHeight>C.clientHeight){if(C.scrollTop!==0)return Se.current=new Date,!1;if(C.getAttribute("role")==="dialog")return!0}C=C.parentNode}return!0}function Xt(f){if(w.current&&le){const S=p==="bottom"||p==="right"?1:-1,A=(Ie.current-(H(p)?f.pageY:f.pageX))*S,E=A>0,C=s&&!i&&!E;if(C&&xe===0)return;const ne=Math.abs(A),J=document.querySelector("[data-vaul-drawer-wrapper]"),ee=p==="bottom"||p==="top"?Qe.current:Ze.current;let re=ne/ee;const me=Vt(ne,E);if(me!==null&&(re=me),C&&re>=1||!ge.current&&!nt(f.target,E))return;if(w.current.classList.add(Ve),ge.current=!0,I(w.current,{transition:"none"}),I(R.current,{transition:"none"}),s&&zt({draggedDistance:A}),E&&!s){const se=Mn(A),Te=Math.min(se*-1,0)*S;I(w.current,{transform:H(p)?`translate3d(0, ${Te}px, 0)`:`translate3d(${Te}px, 0, 0)`});return}const ce=1-re;if((tt||h&&xe===h-1)&&(a?.(f,re),I(R.current,{opacity:`${ce}`,transition:"none"},!0)),J&&R.current&&y){const se=Math.min(Ce()+re*(1-Ce()),1),Te=8-re*8,at=Math.max(0,14-re*14);I(J,{borderRadius:`${Te}px`,transform:H(p)?`scale(${se}) translate3d(0, ${at}px, 0)`:`scale(${se}) translate3d(${at}px, 0, 0)`,transition:"none"},!0)}if(!s){const se=ne*S;I(w.current,{transform:H(p)?`translate3d(0, ${se}px, 0)`:`translate3d(${se}px, 0, 0)`})}}}o.useEffect(()=>{var f;function S(){if(!w.current||!N)return;const A=document.activeElement;if(qe(A)||he.current){var E;const C=((E=window.visualViewport)==null?void 0:E.height)||0,ne=window.innerHeight;let J=ne-C;const ee=w.current.getBoundingClientRect().height||0,re=ee>ne*.8;He.current||(He.current=ee);const me=w.current.getBoundingClientRect().top;if(Math.abs(Je.current-J)>60&&(he.current=!he.current),s&&s.length>0&&we&&xe){const ce=we[xe]||0;J+=ce}if(Je.current=J,ee>C||he.current){const ce=w.current.getBoundingClientRect().height;let se=ce;ce>C&&(se=C-(re?me:Ge)),D?w.current.style.height=`${ce-Math.max(J,0)}px`:w.current.style.height=`${Math.max(se,C-me)}px`}else w.current.style.height=`${He.current}px`;s&&s.length>0&&!he.current?w.current.style.bottom="0px":w.current.style.bottom=`${Math.max(J,0)}px`}}return(f=window.visualViewport)==null||f.addEventListener("resize",S),()=>{var A;return(A=window.visualViewport)==null?void 0:A.removeEventListener("resize",S)}},[xe,s,we]);function ve(f){qt(),x?.(),f||ae(!1),setTimeout(()=>{s&&et(s[0])},k.DURATION*1e3)}function rt(){if(!w.current)return;const f=document.querySelector("[data-vaul-drawer-wrapper]"),S=Re(w.current,p);I(w.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${k.DURATION}s cubic-bezier(${k.EASE.join(",")})`}),I(R.current,{transition:`opacity ${k.DURATION}s cubic-bezier(${k.EASE.join(",")})`,opacity:"1"}),y&&S&&S>0&&W&&I(f,{borderRadius:`${At}px`,overflow:"hidden",...H(p)?{transform:`scale(${Ce()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${Ce()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${k.DURATION}s`,transitionTimingFunction:`cubic-bezier(${k.EASE.join(",")})`},!0)}function qt(){!le||!w.current||(w.current.classList.remove(Ve),ge.current=!1,X(!1),ue.current=new Date)}function Gt(f){if(!le||!w.current)return;w.current.classList.remove(Ve),ge.current=!1,X(!1),ue.current=new Date;const S=Re(w.current,p);if(!nt(f.target,!1)||!S||Number.isNaN(S)||Z.current===null)return;const A=ue.current.getTime()-Z.current.getTime(),E=Ie.current-(H(p)?f.pageY:f.pageX),C=Math.abs(E)/A;if(C>.05&&($(!0),setTimeout(()=>{$(!1)},200)),s){Ft({draggedDistance:E*(p==="bottom"||p==="right"?1:-1),closeDrawer:ve,velocity:C,dismissible:i}),c?.(f,!0);return}if(p==="bottom"||p==="right"?E>0:E<0){rt(),c?.(f,!0);return}if(C>Dt){ve(),c?.(f,!1);return}var ne;const J=Math.min((ne=w.current.getBoundingClientRect().height)!=null?ne:0,window.innerHeight);var ee;const re=Math.min((ee=w.current.getBoundingClientRect().width)!=null?ee:0,window.innerWidth),me=p==="left"||p==="right";if(Math.abs(S)>=(me?re:J)*b){ve(),c?.(f,!1);return}c?.(f,!0),rt()}o.useEffect(()=>(W&&(I(document.documentElement,{scrollBehavior:"auto"}),Q.current=new Date),()=>{Pn(document.documentElement,"scrollBehavior")}),[W]);function Kt(f){const S=f?(window.innerWidth-fe)/window.innerWidth:1,A=f?-fe:0;Le.current&&window.clearTimeout(Le.current),I(w.current,{transition:`transform ${k.DURATION}s cubic-bezier(${k.EASE.join(",")})`,transform:`scale(${S}) translate3d(0, ${A}px, 0)`}),!f&&w.current&&(Le.current=setTimeout(()=>{const E=Re(w.current,p);I(w.current,{transition:"none",transform:H(p)?`translate3d(0, ${E}px, 0)`:`translate3d(${E}px, 0, 0)`})},500))}function Jt(f,S){if(S<0)return;const A=(window.innerWidth-fe)/window.innerWidth,E=A+S*(1-A),C=-fe+S*fe;I(w.current,{transform:H(p)?`scale(${E}) translate3d(0, ${C}px, 0)`:`scale(${E}) translate3d(${C}px, 0, 0)`,transition:"none"})}function Qt(f,S){const A=H(p)?window.innerHeight:window.innerWidth,E=S?(A-fe)/A:1,C=S?-fe:0;S&&I(w.current,{transition:`transform ${k.DURATION}s cubic-bezier(${k.EASE.join(",")})`,transform:H(p)?`scale(${E}) translate3d(0, ${C}px, 0)`:`scale(${E}) translate3d(${C}px, 0, 0)`})}return o.createElement(mn,{defaultOpen:F,onOpenChange:f=>{!i&&!f||(f?oe(!0):ve(!0),ae(f))},open:W},o.createElement(jt.Provider,{value:{activeSnapPoint:Ut,snapPoints:s,setActiveSnapPoint:et,drawerRef:w,overlayRef:R,onOpenChange:r,onPress:Yt,onRelease:Gt,onDrag:Xt,dismissible:i,handleOnly:u,isOpen:W,isDragging:le,shouldFade:tt,closeDrawer:ve,onNestedDrag:Jt,onNestedOpenChange:Kt,onNestedRelease:Qt,keyboardIsOpen:he,modal:K,snapPointsOffset:we,direction:p,shouldScaleBackground:y,setBackgroundColorOnScale:v,noBodyStyles:P,container:m,autoFocus:L}},n))}const _t=o.forwardRef(function({...t},r){const{overlayRef:n,snapPoints:a,onRelease:c,shouldFade:s,isOpen:y,modal:v}=Ne(),b=Ct(r,n),d=a&&a.length>0;return v?o.createElement(pn,{onMouseUp:c,ref:b,"data-vaul-overlay":"","data-vaul-snap-points":y&&d?"true":"false","data-vaul-snap-points-overlay":y&&s?"true":"false",...t}):(typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),null)});_t.displayName="Drawer.Overlay";const kt=o.forwardRef(function({onPointerDownOutside:t,style:r,onOpenAutoFocus:n,...a},c){const{drawerRef:s,onPress:y,onRelease:v,onDrag:b,keyboardIsOpen:d,snapPointsOffset:i,modal:u,isOpen:h,direction:O,snapPoints:M,container:D,handleOnly:K,autoFocus:x}=Ne(),[B,P]=o.useState(!1),p=Ct(c,s),F=o.useRef(null),te=o.useRef(null),g=o.useRef(!1),j=M&&M.length>0;zn();const N=(m,L,_=0)=>{if(g.current)return!0;const V=Math.abs(m.y),W=Math.abs(m.x),ae=W>V,Y=["bottom","right"].includes(L)?1:-1;if(L==="left"||L==="right"){if(!(m.x*Y<0)&&W>=0&&W<=_)return ae}else if(!(m.y*Y<0)&&V>=0&&V<=_)return!ae;return g.current=!0,!0};o.useEffect(()=>{j&&window.requestAnimationFrame(()=>{P(!0)})},[]);function z(m){F.current=null,g.current=!1,v(m)}return o.createElement(hn,{"data-vaul-drawer-direction":O,"data-vaul-drawer":"","data-vaul-delayed-snap-points":B?"true":"false","data-vaul-snap-points":h&&j?"true":"false","data-vaul-custom-container":D?"true":"false",...a,ref:p,style:i&&i.length>0?{"--snap-point-height":`${i[0]}px`,...r}:r,onPointerDown:m=>{K||(a.onPointerDown==null||a.onPointerDown.call(a,m),F.current={x:m.pageX,y:m.pageY},y(m))},onOpenAutoFocus:m=>{n?.(m),x||m.preventDefault()},onPointerDownOutside:m=>{if(t?.(m),!u||m.defaultPrevented){m.preventDefault();return}d.current&&(d.current=!1)},onFocusOutside:m=>{if(!u){m.preventDefault();return}},onPointerMove:m=>{if(te.current=m,K||(a.onPointerMove==null||a.onPointerMove.call(a,m),!F.current))return;const L=m.pageY-F.current.y,_=m.pageX-F.current.x,V=m.pointerType==="touch"?10:2;N({x:_,y:L},O,V)?b(m):(Math.abs(_)>V||Math.abs(L)>V)&&(F.current=null)},onPointerUp:m=>{a.onPointerUp==null||a.onPointerUp.call(a,m),F.current=null,g.current=!1,v(m)},onPointerOut:m=>{a.onPointerOut==null||a.onPointerOut.call(a,m),z(te.current)},onContextMenu:m=>{a.onContextMenu==null||a.onContextMenu.call(a,m),z(te.current)}})});kt.displayName="Drawer.Content";const Yn=250,Xn=120,qn=o.forwardRef(function({preventCycle:t=!1,children:r,...n},a){const{closeDrawer:c,isDragging:s,snapPoints:y,activeSnapPoint:v,setActiveSnapPoint:b,dismissible:d,handleOnly:i,isOpen:u,onPress:h,onDrag:O}=Ne(),M=o.useRef(null),D=o.useRef(!1);function K(){if(D.current){P();return}window.setTimeout(()=>{x()},Xn)}function x(){if(s||t||D.current){P();return}if(P(),(!y||y.length===0)&&d){c();return}if(v===y[y.length-1]&&d){c();return}const F=y.findIndex(g=>g===v);if(F===-1)return;const te=y[F+1];b(te)}function B(){M.current=window.setTimeout(()=>{D.current=!0},Yn)}function P(){window.clearTimeout(M.current),D.current=!1}return o.createElement("div",{onClick:K,onPointerCancel:P,onPointerDown:p=>{i&&h(p),B()},onPointerMove:p=>{i&&O(p)},ref:a,"data-vaul-drawer-visible":u?"true":"false","data-vaul-handle":"","aria-hidden":"true",...n},o.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},r))});qn.displayName="Drawer.Handle";function Gn(t){const r=Ne(),{container:n=r.container,...a}=t;return o.createElement(fn,{container:n,...a})}const ie={Root:Wn,Content:kt,Overlay:_t,Portal:Gn,Close:cn,Title:dn,Description:un},Ot=({shouldScaleBackground:t=!0,...r})=>e.jsx(ie.Root,{shouldScaleBackground:t,...r});Ot.displayName="Drawer";const Kn=ie.Portal,Jn=ie.Close,$t=T.forwardRef(({className:t,...r},n)=>e.jsx(ie.Overlay,{ref:n,className:pe("fixed inset-0 z-50 bg-black/80",t),...r}));$t.displayName=ie.Overlay.displayName;const Pt=T.forwardRef(({className:t,children:r,...n},a)=>e.jsxs(Kn,{children:[e.jsx($t,{}),e.jsxs(ie.Content,{ref:a,className:pe("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",t),...n,children:[e.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),r]})]}));Pt.displayName="DrawerContent";const Mt=({className:t,...r})=>e.jsx("div",{className:pe("grid gap-1.5 p-4 text-center sm:text-left",t),...r});Mt.displayName="DrawerHeader";const Lt=({className:t,...r})=>e.jsx("div",{className:pe("mt-auto flex flex-col gap-2 p-4",t),...r});Lt.displayName="DrawerFooter";const It=T.forwardRef(({className:t,...r},n)=>e.jsx(ie.Title,{ref:n,className:pe("text-lg font-semibold leading-none tracking-tight",t),...r}));It.displayName=ie.Title.displayName;const Ht=T.forwardRef(({className:t,...r},n)=>e.jsx(ie.Description,{ref:n,className:pe("text-sm text-muted-foreground",t),...r}));Ht.displayName=ie.Description.displayName;const pt=t=>{switch(t){case"superseded":return e.jsx(U,{className:"bg-amber-500/10 text-amber-600 border-amber-500/20",children:"Superseded"});case"expired":return e.jsx(U,{className:"bg-red-500/10 text-red-600 border-red-500/20",children:"Expired"});case"terminated":return e.jsx(U,{className:"bg-gray-500/10 text-gray-600 border-gray-500/20",children:"Terminated"});default:return e.jsx(U,{variant:"outline",children:t||"Unknown"})}},gt=t=>{switch(t?.toLowerCase()){case"msa":return e.jsx(U,{variant:"outline",className:"bg-blue-500/10 text-blue-600 border-blue-500/20",children:"MSA"});case"sow":return e.jsx(U,{variant:"outline",className:"bg-purple-500/10 text-purple-600 border-purple-500/20",children:"SOW"});case"amendment":return e.jsx(U,{variant:"outline",className:"bg-orange-500/10 text-orange-600 border-orange-500/20",children:"Amendment"});case"addendum":return e.jsx(U,{variant:"outline",className:"bg-green-500/10 text-green-600 border-green-500/20",children:"Addendum"});default:return e.jsx(U,{variant:"outline",children:t||"MSA"})}};function Qn({agreements:t,loading:r,onClose:n}){const[a,c]=T.useState(null),[s,y]=T.useState(!1),v=i=>{c(i),y(!0)},b=i=>{const u=new Blob([i.content],{type:"text/html"}),h=URL.createObjectURL(u),O=document.createElement("a");O.href=h,O.download=`${i.title||i.plan_name}-${i.client_name}-archived.html`,document.body.appendChild(O),O.click(),document.body.removeChild(O),URL.revokeObjectURL(h)},d=i=>{if(!i)return"—";try{return Ye(i)}catch{return"—"}};return r?e.jsx(je,{className:"mt-4 border-dashed border-amber-500/30 bg-amber-500/5",children:e.jsx($e,{className:"py-12",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(Ee,{className:"h-6 w-6 animate-spin text-muted-foreground"})})})}):e.jsxs(e.Fragment,{children:[e.jsxs(je,{className:"mt-4 border-dashed border-amber-500/30 bg-amber-500/5",children:[e.jsx(ke,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-amber-500/10 flex items-center justify-center",children:e.jsx(Me,{className:"h-5 w-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsxs(Oe,{className:"text-lg flex items-center gap-2",children:["Agreement Archives",e.jsx(U,{variant:"secondary",className:"ml-2",children:t.length})]}),e.jsx(Xe,{children:"Historical agreements — read-only for legal and audit purposes"})]})]}),e.jsx(de,{variant:"ghost",size:"icon",onClick:n,children:e.jsx(Zt,{className:"h-4 w-4"})})]})}),e.jsx($e,{children:t.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Me,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"font-medium",children:"No archived agreements"}),e.jsx("p",{className:"text-sm mt-1",children:"Superseded, expired, or terminated agreements will appear here"})]}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(wt,{children:[e.jsx(vt,{children:e.jsxs(Pe,{className:"bg-muted/50",children:[e.jsx(q,{className:"font-semibold",children:"Agreement Name"}),e.jsx(q,{className:"font-semibold",children:"Type"}),e.jsx(q,{className:"font-semibold",children:"Version"}),e.jsx(q,{className:"font-semibold",children:"Client / Company"}),e.jsx(q,{className:"font-semibold",children:"Status"}),e.jsx(q,{className:"font-semibold",children:"Effective Date"}),e.jsx(q,{className:"font-semibold",children:"Signed Date"}),e.jsx(q,{className:"font-semibold",children:"Archived Date"}),e.jsx(q,{className:"font-semibold",children:"Reason"}),e.jsx(q,{className:"font-semibold text-right",children:"Actions"})]})}),e.jsx(yt,{children:t.map(i=>e.jsxs(Pe,{className:"hover:bg-muted/30",children:[e.jsx(G,{children:e.jsx("button",{onClick:()=>v(i),className:"font-medium text-primary hover:underline text-left",children:i.title||i.plan_name})}),e.jsx(G,{children:gt(i.agreement_type)}),e.jsx(G,{children:e.jsxs("span",{className:"font-mono text-sm",children:["v",i.version||"1.0"]})}),e.jsx(G,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:i.client_name}),i.client_company&&e.jsx("div",{className:"text-sm text-muted-foreground",children:i.client_company})]})}),e.jsx(G,{children:pt(i.lifecycle_status)}),e.jsx(G,{className:"text-muted-foreground",children:d(i.effective_date||i.created_at)}),e.jsx(G,{className:"text-muted-foreground",children:d(i.signed_at)}),e.jsx(G,{className:"text-muted-foreground",children:d(i.archived_at)}),e.jsx(G,{children:e.jsx("span",{className:"text-sm text-muted-foreground",children:i.archived_reason||"—"})}),e.jsx(G,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx(de,{variant:"ghost",size:"icon",onClick:()=>v(i),title:"View Details",children:e.jsx(bt,{className:"h-4 w-4"})}),e.jsx(de,{variant:"ghost",size:"icon",onClick:()=>b(i),title:"Download PDF",children:e.jsx(ot,{className:"h-4 w-4"})})]})})]},i.id))})]})})})]}),e.jsx(Ot,{open:s,onOpenChange:y,children:e.jsxs(Pt,{className:"max-h-[90vh]",children:[e.jsx(Mt,{className:"border-b pb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-amber-500/10 flex items-center justify-center",children:e.jsx(_e,{className:"h-5 w-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsxs(It,{className:"flex items-center gap-2",children:[a?.title||a?.plan_name,e.jsx(U,{variant:"outline",className:"ml-2",children:"Read-Only"})]}),e.jsx(Ht,{children:"Archived Agreement — For legal and audit reference only"})]})]})}),a&&e.jsxs("div",{className:"p-6 overflow-auto max-h-[60vh]",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 mb-6 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[e.jsx(en,{className:"h-5 w-5 text-amber-600 shrink-0"}),e.jsx("p",{className:"text-sm text-amber-700",children:"This agreement is archived and cannot be edited, re-signed, or resent. It is preserved for legal and audit purposes."})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Agreement Type"}),e.jsx("div",{className:"mt-1",children:gt(a.agreement_type)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Version"}),e.jsxs("p",{className:"mt-1 font-mono",children:["v",a.version||"1.0"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Status"}),e.jsx("div",{className:"mt-1",children:pt(a.lifecycle_status)})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider flex items-center gap-1",children:[e.jsx(gn,{className:"h-3 w-3"})," Client Name"]}),e.jsx("p",{className:"mt-1 font-medium",children:a.client_name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider flex items-center gap-1",children:[e.jsx(xn,{className:"h-3 w-3"})," Company"]}),e.jsx("p",{className:"mt-1",children:a.client_company||"—"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Plan"}),e.jsx("p",{className:"mt-1",children:a.plan_name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["$",a.plan_price.toLocaleString(),"/mo"]})]})]}),e.jsx(Be,{className:"my-6"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider flex items-center gap-1",children:[e.jsx(tn,{className:"h-3 w-3"})," Effective Date"]}),e.jsx("p",{className:"mt-1",children:d(a.effective_date||a.created_at)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Signed Date"}),e.jsx("p",{className:"mt-1",children:d(a.signed_at)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Archived Date"}),e.jsx("p",{className:"mt-1",children:d(a.archived_at)})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider flex items-center gap-1",children:[e.jsx(wn,{className:"h-3 w-3"})," Archive Reason"]}),e.jsx("p",{className:"mt-1",children:a.archived_reason||"—"})]})]}),a.signer_names&&a.signer_names.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"my-6"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Signers"}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:a.signer_names.map((i,u)=>e.jsx(U,{variant:"secondary",children:i},u))})]})]}),a.superseded_by&&e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"my-6"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Superseded By"}),e.jsx("p",{className:"mt-1 font-mono text-sm text-primary",children:a.superseded_by})]})]})]}),e.jsx(Lt,{className:"border-t pt-4",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx(Jn,{asChild:!0,children:e.jsx(de,{variant:"outline",children:"Close"})}),a&&e.jsxs(de,{onClick:()=>b(a),children:[e.jsx(ot,{className:"h-4 w-4 mr-2"}),"Download Agreement"]})]})})]})})]})}const We=[{key:"msa",title:"Master Services Agreements",icon:jn,color:"text-blue-500",bgColor:"bg-blue-500/10",signedTitle:"Signed Agreements",signedDescription:"All signed Master Services Agreements",emptyIcon:_e,emptyText:"No signed agreements yet",entityLabel:"Client",showPlanColumn:!0},{key:"terms",title:"Terms & Conditions",icon:_e,color:"text-orange-500",bgColor:"bg-orange-500/10",signedTitle:"Signed Terms & Conditions",signedDescription:"All signed Terms & Conditions agreements",emptyIcon:_e,emptyText:"No signed terms & conditions yet",entityLabel:"User",showPlanColumn:!1},{key:"privacy",title:"Privacy Policy",icon:lt,color:"text-green-500",bgColor:"bg-green-500/10",signedTitle:"Signed Privacy Policies",signedDescription:"All signed Privacy Policy agreements",emptyIcon:lt,emptyText:"No signed privacy policies yet",entityLabel:"User",showPlanColumn:!1},{key:"sales_reps",title:"Sales Agreements",icon:ct,color:"text-cyan-500",bgColor:"bg-cyan-500/10",signedTitle:"Signed Sales Agreements",signedDescription:"All signed Sales Representative Agreements",emptyIcon:ct,emptyText:"No signed sales agreements yet",entityLabel:"Sales Rep",showPlanColumn:!1},{key:"partner",title:"Partner Agreements",icon:it,color:"text-purple-500",bgColor:"bg-purple-500/10",signedTitle:"Signed Partner Agreements",signedDescription:"All signed Partner Agreements",emptyIcon:it,emptyText:"No signed partner agreements yet",entityLabel:"Partner",showPlanColumn:!1}],Zn=t=>{switch(t){case"signed":return e.jsxs(U,{className:"bg-green-500/10 text-green-600 border-green-500/20",children:[e.jsx(vn,{className:"h-3 w-3 mr-1"}),"Signed"]});case"viewed":return e.jsxs(U,{className:"bg-blue-500/10 text-blue-600 border-blue-500/20",children:[e.jsx(bt,{className:"h-3 w-3 mr-1"}),"Viewed"]});case"sent":return e.jsxs(U,{className:"bg-yellow-500/10 text-yellow-600 border-yellow-500/20",children:[e.jsx(sn,{className:"h-3 w-3 mr-1"}),"Sent"]});case"expired":return e.jsxs(U,{className:"bg-red-500/10 text-red-600 border-red-500/20",children:[e.jsx(dt,{className:"h-3 w-3 mr-1"}),"Expired"]});case"cancelled":return e.jsxs(U,{className:"bg-muted text-muted-foreground",children:[e.jsx(dt,{className:"h-3 w-3 mr-1"}),"Cancelled"]});default:return e.jsx(U,{variant:"outline",children:t})}};function Hr(){const{toast:t}=nn(),{callApi:r,loading:n}=on(),[a,c]=T.useState(null),[s,y]=T.useState(null),[v,b]=T.useState(!0),[d,i]=T.useState("msa"),[u,h]=T.useState(null),[O,M]=T.useState(!1),[D,K]=T.useState({}),[x,B]=T.useState("agreement"),[P,p]=T.useState([]),[F,te]=T.useState(!1),[g,j]=T.useState(!1),[N,z]=T.useState([]),[m,L]=T.useState(!1);T.useEffect(()=>{const{data:{subscription:l}}=De.auth.onAuthStateChange(($,R)=>{y(R),c(R?.user??null),R?b(!1):st.visit("/signin")});return De.auth.getSession().then(({data:{session:$}})=>{y($),c($?.user??null),$?b(!1):st.visit("/signin")}),()=>l.unsubscribe()},[navigate]),T.useEffect(()=>{s&&d==="msa"&&!u&&_("msa")},[s]),T.useEffect(()=>{B("agreement"),j(!1),p([])},[d]);const _=async(l,$=!1)=>{if(!l){M(!1);return}const R=We.find(Z=>Z.key===l),Q=()=>({id:"",title:R?.title||"Document",content:`<h1>${R?.title||"Document"}</h1><p>Your ${R?.title?.toLowerCase()||"document"} content here...</p>`,version:1,document_type:l});if(!s){h(Q()),M(!1);return}try{const Z=await r("get_active_document_template",{type:l});if(Z)K(ue=>({...ue,[l]:Z})),(!$||d===l)&&h(Z);else{const ue=Q();h(ue)}}catch(Z){console.error("Error loading template:",Z),h(Q())}finally{$||M(!1)}},V=async l=>{if(!(!s||!l)){te(!0);try{const{data:{session:$}}=await De.auth.getSession();if(!$)return;const R=l==="msa"?"":`?type=${l}`,Q=await fetch(`https://bzduprwcihnxyvrugjgg.supabase.co/functions/v1/list-agreements${R}`,{headers:{Authorization:`Bearer ${$.access_token}`,"Content-Type":"application/json"}});if(Q.ok){const Z=await Q.json();p(Z.agreements||[])}}catch($){console.error("Error loading agreements:",$)}finally{te(!1)}}},W=async()=>{if(!(!s||!d)){L(!0);try{const{data:{session:l}}=await De.auth.getSession();if(!l)return;const $=d==="msa"?"":`&type=${d}`,R=await fetch(`https://bzduprwcihnxyvrugjgg.supabase.co/functions/v1/list-agreements?archived=true${$}`,{headers:{Authorization:`Bearer ${l.access_token}`,"Content-Type":"application/json"}});if(R.ok){const Q=await R.json();z(Q.agreements||[])}}catch(l){console.error("Error loading archived agreements:",l)}finally{L(!1)}}},ae=l=>{d!==l&&(i(l),l&&D[l]?(h(D[l]),M(!1),_(l,!0)):(M(!0),h(null),_(l,!1)))},Y=async l=>{if(!u||!d)return;if(!u.id){try{await r("create_document_template",{},{title:u.title,content:l,document_type:d}),await _(d),t({title:"Success",description:`${u.title} created`})}catch{t({title:"Error",description:`Failed to create ${u.title}`,variant:"destructive"})}return}await r("update_document_template",{id:u.id},{content:l});const $={...u,content:l};K(R=>({...R,[d]:$}))},oe=async()=>{u?.id&&(await r("update_document_template",{id:u.id},{version:u.version+1}),await _(d))},le=l=>{B(l),l==="signed"&&d&&V(d)},X=We.find(l=>l.key===d);return v?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsx(Ee,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs(e.Fragment,{children:[e.jsx(rn,{children:e.jsx("title",{children:"Contracts | Admin"})}),e.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[e.jsxs("div",{className:"shrink-0 p-6 pb-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Contracts"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your legal documents and agreements"})]}),e.jsx("div",{className:"grid gap-2 sm:gap-4 grid-cols-2 lg:grid-cols-5 mb-6",children:We.map(l=>{const $=l.icon,R=d===l.key;return e.jsx(je,{className:`cursor-pointer transition-all hover:border-primary/50 group ${R?"border-primary shadow-md":"hover:shadow-lg"}`,onClick:()=>ae(l.key),children:e.jsx(ke,{className:"p-3 sm:pb-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:`w-8 h-8 sm:w-10 sm:h-10 shrink-0 rounded-lg ${l.bgColor} flex items-center justify-center`,children:e.jsx($,{className:`h-4 w-4 sm:h-5 sm:w-5 ${l.color}`})}),e.jsx(Oe,{className:"text-[10px] sm:text-xs lg:text-sm leading-tight line-clamp-2",children:l.title})]})})},l.key)})}),d&&X&&e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs(de,{variant:x==="agreement"?"default":"outline",size:"sm",onClick:()=>le("agreement"),children:[e.jsx(X.icon,{className:"h-4 w-4 mr-2"}),"Agreement"]}),e.jsxs(de,{variant:x==="signed"&&!g?"default":"outline",size:"sm",onClick:()=>{j(!1),le("signed")},children:[e.jsx(an,{className:"h-4 w-4 mr-2"}),"Signed Agreements"]}),e.jsxs(de,{variant:g?"default":"outline",size:"sm",onClick:()=>{g||W(),j(!0),B("signed")},children:[e.jsx(Me,{className:"h-4 w-4 mr-2"}),"Agreement Archives"]})]})]}),d&&X&&e.jsx("div",{className:"flex-1 min-h-0 overflow-hidden px-6 pb-6",children:O?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(Ee,{className:"h-8 w-8 animate-spin text-primary"})}):x==="signed"?e.jsx("div",{className:"h-full overflow-auto",children:g?e.jsxs(je,{children:[e.jsxs(ke,{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-5 w-5"}),"Agreement Archives"]}),e.jsxs(Xe,{children:["Archived, superseded, and expired ",X.title.toLowerCase()," agreements"]})]}),e.jsx($e,{children:e.jsx(Qn,{agreements:N,loading:m,onClose:()=>j(!1)})})]}):e.jsxs(je,{children:[e.jsxs(ke,{children:[e.jsxs(Oe,{className:"flex items-center gap-2",children:[e.jsx(X.icon,{className:"h-5 w-5"}),X.signedTitle]}),e.jsx(Xe,{children:X.signedDescription})]}),e.jsx($e,{children:F?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Ee,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):P.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(X.emptyIcon,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"font-medium",children:X.emptyText}),e.jsx("p",{className:"text-sm mt-1",children:"Signed agreements will appear here"})]}):e.jsxs(wt,{children:[e.jsx(vt,{children:e.jsxs(Pe,{children:[e.jsx(q,{children:X.entityLabel}),e.jsx(q,{children:"Company"}),X.showPlanColumn&&e.jsx(q,{children:"Plan"}),e.jsx(q,{children:"Status"}),e.jsx(q,{children:"Created"}),e.jsx(q,{children:"Signed"})]})}),e.jsx(yt,{children:P.map(l=>e.jsxs(Pe,{children:[e.jsx(G,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:l.client_name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:l.client_email})]})}),e.jsx(G,{children:l.client_company||"—"}),X.showPlanColumn&&e.jsx(G,{children:e.jsxs("div",{children:[e.jsx("div",{children:l.plan_name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["$",l.plan_price.toLocaleString(),"/mo"]})]})}),e.jsx(G,{children:Zn(l.status)}),e.jsx(G,{className:"text-muted-foreground",children:Ye(l.created_at)}),e.jsx(G,{className:"text-muted-foreground",children:l.signed_at?Ye(l.signed_at):"—"})]},l.id))})]})})]})}):e.jsx(ln,{template:u,onSaveContent:Y,onUpdateVersion:oe,isLoading:n},d)})]})]})}export{Hr as default};
