import{j as e,H as P,m as x,aD as _}from"./app-DpPlT-lI.js";import{C as h,b as o,c as j,a as m}from"./card-CenXMO1c.js";import{T as w,a as C,b as p,c as g}from"./tabs-C1fD1QNW.js";import{T as u,a as f,b as i,c as n,d as N,e as a}from"./table-BjT_y-uM.js";import{k as D,l as S,m as V}from"./useAdminQueries-Cx3f3-w4.js";/* empty css            */import"./index-BluggEyc.js";import"./index-DfuviWGr.js";import"./useMutation-Bh7XLApI.js";import"./admin-api-CK9-sm5K.js";function q(){const{data:r=[],isLoading:T}=D(),{data:l=[],isLoading:b}=S(),{data:t=[],isLoading:v}=V(),c=s=>_(s),d=(s,y)=>s?s.length>y?s.substring(0,y)+"...":s:"-";return e.jsxs(e.Fragment,{children:[e.jsx(P,{children:e.jsx("title",{children:"Analytics | Admin"})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Analytics & Tracking"}),e.jsx("p",{className:"text-muted-foreground",children:"View session data, page views, and plan interactions"})]}),e.jsxs(w,{defaultValue:"sessions",className:"space-y-4",children:[e.jsxs(C,{children:[e.jsxs(p,{value:"sessions",children:["Sessions (",r.length,")"]}),e.jsxs(p,{value:"pageviews",children:["Page Views (",l.length,")"]}),e.jsxs(p,{value:"interactions",children:["Plan Interactions (",t.length,")"]})]}),e.jsx(g,{value:"sessions",children:e.jsxs(h,{children:[e.jsx(o,{children:e.jsx(j,{children:"Recent Sessions"})}),e.jsx(m,{children:T&&r.length===0?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(x,{className:"h-8 w-8 animate-spin text-primary"})}):r.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No sessions recorded yet. Sessions will appear as users visit your site."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(u,{children:[e.jsx(f,{children:e.jsxs(i,{children:[e.jsx(n,{children:"Session ID"}),e.jsx(n,{children:"Landing Page"}),e.jsx(n,{children:"Referrer"}),e.jsx(n,{children:"IP Address"}),e.jsx(n,{children:"Date"})]})}),e.jsx(N,{children:r.map(s=>e.jsxs(i,{children:[e.jsxs(a,{className:"font-mono text-xs",children:[s.session_id.substring(0,8),"..."]}),e.jsx(a,{children:d(s.landing_page,30)}),e.jsx(a,{children:d(s.referrer,30)}),e.jsx(a,{children:s.ip_address||"-"}),e.jsx(a,{children:c(s.created_at)})]},s.id))})]})})})]})}),e.jsx(g,{value:"pageviews",children:e.jsxs(h,{children:[e.jsx(o,{children:e.jsx(j,{children:"Recent Page Views"})}),e.jsx(m,{children:b&&l.length===0?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(x,{className:"h-8 w-8 animate-spin text-primary"})}):l.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No page views recorded yet."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(u,{children:[e.jsx(f,{children:e.jsxs(i,{children:[e.jsx(n,{children:"Session ID"}),e.jsx(n,{children:"Page Path"}),e.jsx(n,{children:"Page Title"}),e.jsx(n,{children:"Time on Page"}),e.jsx(n,{children:"Date"})]})}),e.jsx(N,{children:l.map(s=>e.jsxs(i,{children:[e.jsxs(a,{className:"font-mono text-xs",children:[s.session_id.substring(0,8),"..."]}),e.jsx(a,{children:s.page_path}),e.jsx(a,{children:d(s.page_title,30)}),e.jsxs(a,{children:[s.time_on_page,"s"]}),e.jsx(a,{children:c(s.created_at)})]},s.id))})]})})})]})}),e.jsx(g,{value:"interactions",children:e.jsxs(h,{children:[e.jsx(o,{children:e.jsx(j,{children:"Plan Interactions"})}),e.jsx(m,{children:v&&t.length===0?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(x,{className:"h-8 w-8 animate-spin text-primary"})}):t.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No plan interactions recorded yet."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(u,{children:[e.jsx(f,{children:e.jsxs(i,{children:[e.jsx(n,{children:"Session ID"}),e.jsx(n,{children:"Plan Name"}),e.jsx(n,{children:"Interaction"}),e.jsx(n,{children:"Page"}),e.jsx(n,{children:"Date"})]})}),e.jsx(N,{children:t.map(s=>e.jsxs(i,{children:[e.jsxs(a,{className:"font-mono text-xs",children:[s.session_id.substring(0,8),"..."]}),e.jsx(a,{className:"font-medium",children:s.plan_name}),e.jsx(a,{className:"capitalize",children:s.interaction_type}),e.jsx(a,{children:d(s.page_path,20)}),e.jsx(a,{children:c(s.created_at)})]},s.id))})]})})})]})})]})]})]})}export{q as default};
