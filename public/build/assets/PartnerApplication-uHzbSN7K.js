import{r as l,j as e,$ as le,a3 as E,a6 as F,a7 as k,ad as de,ag as me,a as D,H as pe,B as _,A as ue,F as xe,m as L,s as A,h as w,i as fe,K as $}from"./app-Lw9toWEL.js";import{I as R}from"./input-yF94Vncd.js";import{P as he}from"./password-input-C0oCUV2I.js";import{L as b}from"./label-BmZ0klfu.js";import{c as B,R as ge,I as ye}from"./index-DiOyCk7G.js";import{u as Ne}from"./index-DVcw4AEI.js";import{u as je}from"./index-Di_FMiVt.js";import{C as ve}from"./circle-BiYF-lSz.js";import{L as be}from"./Layout-DZ9UC0KG.js";import{i as Ce}from"./errorMessages-9RXyVjba.js";import{g as G}from"./logger-Ls6Omhf8.js";import{A as we}from"./AgreementSigningFlow-CiOWLIs6.js";import{C as P}from"./circle-check-big-ZA6qdrqv.js";import{U as Re}from"./user-B6g2DlSq.js";import{B as Se}from"./building-2-D5XRUaKw.js";import{o as _e,Z as Ee,e as Ie,s as C}from"./types-XO8cAsXJ.js";/* empty css            */import"./eye-off-CwyeFkCS.js";import"./eye-COYcjsCX.js";import"./index-Bewwc68W.js";import"./Footer-CZruhjoG.js";import"./sparkles-Bc8uZx6o.js";import"./shield-CRohBmyg.js";import"./sun-CPjJFBpN.js";import"./check-DtvS8aN0.js";import"./phone-YxvPiuip.js";import"./zap-DvOn9d_I.js";import"./scroll-area-QxNMFOlD.js";import"./index-BdQq_4o_.js";import"./purify.es-HRjpPm7y.js";import"./mic-Bjx0u0u_.js";import"./send-4vHz585h.js";import"./checkbox-Dh6dZe4H.js";import"./index-DdtFP2Aq.js";function O(s,i=[]){let o=[];function m(a,n){const p=l.createContext(n),r=o.length;o=[...o,n];const f=d=>{const{scope:y,children:u,...x}=d,v=y?.[s]?.[r]||p,N=l.useMemo(()=>x,Object.values(x));return e.jsx(v.Provider,{value:N,children:u})};f.displayName=a+"Provider";function g(d,y){const u=y?.[s]?.[r]||p,x=l.useContext(u);if(x)return x;if(n!==void 0)return n;throw new Error(`\`${d}\` must be used within \`${a}\``)}return[f,g]}const t=()=>{const a=o.map(n=>l.createContext(n));return function(p){const r=p?.[s]||a;return l.useMemo(()=>({[`__scope${s}`]:{...p,[s]:r}}),[p,r])}};return t.scopeName=s,[m,Ae(t,...i)]}function Ae(...s){const i=s[0];if(s.length===1)return i;const o=()=>{const m=s.map(t=>({useScope:t(),scopeName:t.scopeName}));return function(a){const n=m.reduce((p,{useScope:r,scopeName:f})=>{const d=r(a)[`__scope${f}`];return{...p,...d}},{});return l.useMemo(()=>({[`__scope${i.scopeName}`]:n}),[n])}};return o.scopeName=i.scopeName,o}var M="Radio",[Pe,q]=O(M),[ke,Te]=Pe(M),U=l.forwardRef((s,i)=>{const{__scopeRadio:o,name:m,checked:t=!1,required:a,disabled:n,value:p="on",onCheck:r,form:f,...g}=s,[d,y]=l.useState(null),u=F(i,N=>y(N)),x=l.useRef(!1),v=d?f||!!d.closest("form"):!0;return e.jsxs(ke,{scope:o,checked:t,disabled:n,children:[e.jsx(E.button,{type:"button",role:"radio","aria-checked":t,"data-state":J(t),"data-disabled":n?"":void 0,disabled:n,value:p,...g,ref:u,onClick:k(s.onClick,N=>{t||r?.(),v&&(x.current=N.isPropagationStopped(),x.current||N.stopPropagation())})}),v&&e.jsx(Y,{control:d,bubbles:!x.current,name:m,value:p,checked:t,required:a,disabled:n,form:f,style:{transform:"translateX(-100%)"}})]})});U.displayName=M;var H="RadioIndicator",V=l.forwardRef((s,i)=>{const{__scopeRadio:o,forceMount:m,...t}=s,a=Te(H,o);return e.jsx(de,{present:m||a.checked,children:e.jsx(E.span,{"data-state":J(a.checked),"data-disabled":a.disabled?"":void 0,...t,ref:i})})});V.displayName=H;var Fe="RadioBubbleInput",Y=l.forwardRef(({__scopeRadio:s,control:i,checked:o,bubbles:m=!0,...t},a)=>{const n=l.useRef(null),p=F(n,a),r=je(o),f=me(i);return l.useEffect(()=>{const g=n.current;if(!g)return;const d=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(d,"checked").set;if(r!==o&&u){const x=new Event("click",{bubbles:m});u.call(g,o),g.dispatchEvent(x)}},[r,o,m]),e.jsx(E.input,{type:"radio","aria-hidden":!0,defaultChecked:o,...t,tabIndex:-1,ref:p,style:{...t.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Y.displayName=Fe;function J(s){return s?"checked":"unchecked"}var Me=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],I="RadioGroup",[Le]=O(I,[B,q]),z=B(),W=q(),[$e,Ge]=Le(I),Z=l.forwardRef((s,i)=>{const{__scopeRadioGroup:o,name:m,defaultValue:t,value:a,required:n=!1,disabled:p=!1,orientation:r,dir:f,loop:g=!0,onValueChange:d,...y}=s,u=z(o),x=Ne(f),[v,N]=le({prop:a,defaultProp:t??null,onChange:d,caller:I});return e.jsx($e,{scope:o,name:m,required:n,disabled:p,value:v,onValueChange:N,children:e.jsx(ge,{asChild:!0,...u,orientation:r,dir:x,loop:g,children:e.jsx(E.div,{role:"radiogroup","aria-required":n,"aria-orientation":r,"data-disabled":p?"":void 0,dir:x,...y,ref:i})})})});Z.displayName=I;var X="RadioGroupItem",Q=l.forwardRef((s,i)=>{const{__scopeRadioGroup:o,disabled:m,...t}=s,a=Ge(X,o),n=a.disabled||m,p=z(o),r=W(o),f=l.useRef(null),g=F(i,f),d=a.value===t.value,y=l.useRef(!1);return l.useEffect(()=>{const u=v=>{Me.includes(v.key)&&(y.current=!0)},x=()=>y.current=!1;return document.addEventListener("keydown",u),document.addEventListener("keyup",x),()=>{document.removeEventListener("keydown",u),document.removeEventListener("keyup",x)}},[]),e.jsx(ye,{asChild:!0,...p,focusable:!n,active:d,children:e.jsx(U,{disabled:n,required:a.required,checked:d,...r,...t,name:a.name,ref:g,onCheck:()=>a.onValueChange(t.value),onKeyDown:k(u=>{u.key==="Enter"&&u.preventDefault()}),onFocus:k(t.onFocus,()=>{y.current&&f.current?.click()})})})});Q.displayName=X;var De="RadioGroupIndicator",K=l.forwardRef((s,i)=>{const{__scopeRadioGroup:o,...m}=s,t=W(o);return e.jsx(V,{...t,...m,ref:i})});K.displayName=De;var ee=Z,re=Q,Be=K;const te=l.forwardRef(({className:s,...i},o)=>e.jsx(ee,{className:D("grid gap-2",s),...i,ref:o}));te.displayName=ee.displayName;const T=l.forwardRef(({className:s,...i},o)=>e.jsx(re,{ref:o,className:D("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...i,children:e.jsx(Be,{className:"flex items-center justify-center",children:e.jsx(ve,{className:"h-2.5 w-2.5 fill-current text-current"})})}));T.displayName=re.displayName;function Oe(s,i){const[o,m]=l.useState(()=>{try{const a=localStorage.getItem(s);if(a){const n=JSON.parse(a);return{...i,...n}}}catch(a){console.warn(`Failed to load form data for ${s}:`,a)}return i});l.useEffect(()=>{try{localStorage.setItem(s,JSON.stringify(o))}catch(a){console.warn(`Failed to save form data for ${s}:`,a)}},[s,o]);const t=l.useCallback(()=>{try{localStorage.removeItem(s),m(i)}catch(a){console.warn(`Failed to clear form data for ${s}:`,a)}},[s,i]);return[o,m,t]}const qe=_e({firstName:C().min(1,"First name is required").max(50),lastName:C().min(1,"Last name is required").max(50),email:C().email("Invalid email address"),phone:C().min(1,"Phone number is required"),password:C().min(8,"Password must be at least 8 characters"),company:C().optional(),registrationType:Ie(["sole_proprietor","company"],{errorMap:()=>({message:"Please select a registration type"})})}),Ue={firstName:"",lastName:"",email:"",phone:"",password:"",company:"",registrationType:""};function wr(){const[s,i]=l.useState(!1),[o,m]=l.useState(!1),[t,a]=l.useState(1),[n,p]=l.useState(""),[r,f,g]=Oe("partner-application-form",Ue),d=h=>{const{name:c,value:j}=h.target;f(S=>({...S,[c]:j}))},y=h=>{f(c=>({...c,registrationType:h}))},u=()=>r.firstName.trim()!==""&&r.lastName.trim()!==""&&r.email.trim()!==""&&r.phone.trim()!==""&&r.password.length>=8,x=()=>r.registrationType!==""&&u(),v=()=>{t===1&&u()&&a(2)},N=()=>{t===2?a(1):t===3&&a(2)},se=h=>{const c=r.registrationType==="company"&&r.company?r.company:`${r.firstName} ${r.lastName}`,j=$(new Date,"MMMM d, yyyy");return h.replace(/\{\{COMPANY_NAME\}\}/gi,c).replace(/\{\{CLIENT_COMPANY\}\}/gi,c).replace(/\{\{CLIENT_NAME\}\}/gi,`${r.firstName} ${r.lastName}`).replace(/\{\{CLIENT_FIRST_NAME\}\}/gi,r.firstName).replace(/\{\{CLIENT_LAST_NAME\}\}/gi,r.lastName).replace(/\{\{CLIENT_EMAIL\}\}/gi,r.email).replace(/\{\{CLIENT_PHONE\}\}/gi,r.phone).replace(/\{\{TODAYS_DATE\}\}/gi,j).replace(/\{\{LONG_DATE\}\}/gi,j).replace(/\{\{SHORT_DATE\}\}/gi,$(new Date,"MM/dd/yyyy"))},ae=async()=>{m(!0);try{const{data:h,error:c}=await A.from("document_templates").select("content").eq("document_type","partner").eq("is_active",!0).single();if(c)throw c;if(h?.content){const j=se(h.content);p(j)}else throw new Error("No partner agreement template found")}catch(h){console.error("Error fetching partner agreement:",h),w.error("Failed to load partner agreement. Please try again."),a(2)}finally{m(!1)}};l.useEffect(()=>{t===3&&!n&&ae()},[t]);const oe=()=>{x()&&a(3)},ne=async h=>{i(!0);try{const c=qe.parse(r),{data:j,error:S}=await A.auth.signUp({email:c.email,password:c.password,options:{emailRedirectTo:`${window.location.origin}/partner`,data:{first_name:c.firstName,last_name:c.lastName,company_name:c.company||null,phone:c.phone,user_type:"partner",partner_type:c.registrationType,agreement_signed:!0}}});if(S)throw S;if(j.user){try{await A.functions.invoke("create-partner-agreement",{body:{userId:j.user.id,email:c.email,firstName:c.firstName,lastName:c.lastName,company:c.company||null,partnerType:c.registrationType,agreementContent:n,signature:h.signature,sectionInitials:h.sectionInitials,signedAt:h.signedAt.toISOString()}})}catch(ce){console.error("Error storing agreement:",ce)}w.success("Welcome to the Cynergists Partner Program!"),g(),fe.visit("/signup/partner/thank-you")}}catch(c){if(c instanceof Ee){const j=c.errors[0];w.error(j.message)}else Ce(G(c))?w.error("An account with this email already exists. Please sign in instead."):w.error(G(c)||"Failed to create account. Please try again.")}finally{i(!1)}},ie=()=>{const h=r.firstName.charAt(0).toUpperCase(),c=r.lastName.charAt(0).toUpperCase();return h+c};return e.jsxs(be,{children:[e.jsxs(pe,{children:[e.jsx("title",{children:"Join the Cynergists Partner Program | Application"}),e.jsx("meta",{name:"description",content:"Apply to become a Cynergists partner. Earn 20% recurring commissions for every client you refer."}),e.jsx("link",{rel:"canonical",href:"https://cynergists.ai/signup/partner/apply"})]}),e.jsx("div",{className:"bg-background py-16 lg:py-24",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-foreground mb-4",children:["Join the Cynergists ",e.jsx("span",{className:"text-gradient",children:"Partner Program"})]}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:t<3?"Complete the form below to get started. You'll be able to start referring clients immediately.":"Review and sign the partner agreement to complete your registration."})]}),e.jsx("div",{className:"bg-card border border-border rounded-xl p-6 mb-10",children:e.jsxs("div",{className:"grid sm:grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(P,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:"20% Recurring Commission"})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(P,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Lifetime of Client"})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(P,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Zero Fulfillment"})]})]})}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsxs("div",{className:`flex items-center gap-2 ${t>=1?"text-primary":"text-muted-foreground"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ${t>=1?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:"1"}),e.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:"Contact Info"})]}),e.jsx("div",{className:`w-12 h-0.5 ${t>=2?"bg-primary":"bg-muted"}`}),e.jsxs("div",{className:`flex items-center gap-2 ${t>=2?"text-primary":"text-muted-foreground"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ${t>=2?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:"2"}),e.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:"Registration"})]}),e.jsx("div",{className:`w-12 h-0.5 ${t>=3?"bg-primary":"bg-muted"}`}),e.jsxs("div",{className:`flex items-center gap-2 ${t>=3?"text-primary":"text-muted-foreground"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ${t>=3?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:"3"}),e.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:"Sign Agreement"})]})]})}),e.jsxs("div",{className:"space-y-8",children:[t===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground border-b border-border pb-2",children:"Step 1: Contact Information"}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"firstName",children:"First Name *"}),e.jsx(R,{id:"firstName",name:"firstName",value:r.firstName,onChange:d,required:!0,placeholder:"John"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"lastName",children:"Last Name *"}),e.jsx(R,{id:"lastName",name:"lastName",value:r.lastName,onChange:d,required:!0,placeholder:"Smith"})]})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"email",children:"Email Address *"}),e.jsx(R,{id:"email",name:"email",type:"email",value:r.email,onChange:d,required:!0,placeholder:"john@company.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"phone",children:"Phone Number *"}),e.jsx(R,{id:"phone",name:"phone",type:"tel",value:r.phone,onChange:d,required:!0,placeholder:"(555) 123-4567"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"password",children:"Password *"}),e.jsx(he,{id:"password",name:"password",value:r.password,onChange:d,required:!0,placeholder:"Min. 8 characters"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Must be at least 8 characters"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"company",children:"Company Name"}),e.jsx(R,{id:"company",name:"company",value:r.company,onChange:d,placeholder:"Your Company LLC"})]}),e.jsx("div",{className:"pt-4",children:e.jsxs(_,{type:"button",onClick:v,disabled:!u(),className:"px-10",children:["Continue to Step 2",e.jsx(ue,{className:"ml-2 h-4 w-4"})]})})]}),t===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground border-b border-border pb-2",children:"Step 2: Registration Type"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(b,{className:"text-base",children:"How Will You Be Registered? *"}),e.jsxs(te,{value:r.registrationType,onValueChange:y,className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs(b,{htmlFor:"sole_proprietor",className:`flex items-center gap-4 p-6 rounded-xl border-2 cursor-pointer transition-all ${r.registrationType==="sole_proprietor"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:[e.jsx(T,{value:"sole_proprietor",id:"sole_proprietor"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Re,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-foreground",children:"Sole Proprietor"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Individual partner"})]})]})]}),e.jsxs(b,{htmlFor:"company",className:`flex items-center gap-4 p-6 rounded-xl border-2 cursor-pointer transition-all ${r.registrationType==="company"?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:[e.jsx(T,{value:"company",id:"company"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Se,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-foreground",children:"Company"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Business entity"})]})]})]})]})]}),e.jsxs("div",{className:"pt-4 flex gap-4",children:[e.jsx(_,{type:"button",variant:"outline",onClick:N,className:"px-10",children:"Back"}),e.jsxs(_,{type:"button",onClick:oe,disabled:!x(),className:"px-10",children:["Continue to Agreement",e.jsx(xe,{className:"ml-2 h-4 w-4"})]})]})]}),t===3&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground border-b border-border pb-2",children:"Step 3: Partner Agreement"}),o?e.jsxs("div",{className:"flex items-center justify-center py-16",children:[e.jsx(L,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("span",{className:"ml-3 text-muted-foreground",children:"Loading agreement..."})]}):n?e.jsxs(e.Fragment,{children:[s&&e.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-card border border-border rounded-xl p-8 text-center",children:[e.jsx(L,{className:"h-12 w-12 animate-spin text-primary mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-medium text-foreground",children:"Creating your partner account..."}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"This will only take a moment."})]})}),e.jsx(we,{agreementContent:n,defaultInitials:ie(),defaultSignatureName:`${r.firstName} ${r.lastName}`,onComplete:ne,onBack:N,showBackButton:!0})]}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx("p",{className:"text-muted-foreground",children:"Failed to load agreement. Please go back and try again."}),e.jsx(_,{onClick:N,variant:"outline",className:"mt-4",children:"Go Back"})]})]})]})]})})})]})}export{wr as default};
