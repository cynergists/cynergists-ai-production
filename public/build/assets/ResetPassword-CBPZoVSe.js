import{r as t,j as e,H as l,aC as c,t as L,B as m,n as F,b9 as o,s as q,i as g}from"./app-C9sJHYCL.js";import{I as f}from"./input-BIyZmrfA.js";import{L as j}from"./label-CON6LZW3.js";import{C as I}from"./circle-check-big-C6DyEQk3.js";import{E as b}from"./eye-off-DqxFK8PI.js";import{E as N}from"./eye-B3-dt3tC.js";/* empty css            */import"./index-B3oBxWiH.js";const O=()=>{const[a,v]=t.useState(""),[u,y]=t.useState(""),[x,h]=t.useState(!1),[C,P]=t.useState(!1),[p,n]=t.useState(null),[i,S]=t.useState(!1),[d,k]=t.useState(!1);t.useEffect(()=>{const s=window.location.hash;if(s.includes("error=")){const r=new URLSearchParams(s.substring(1)),R=r.get("error_code"),w=r.get("error_description");n(R==="otp_expired"?"This password reset link has expired. Please request a new one.":w?decodeURIComponent(w.replace(/\+/g," ")):"Invalid or expired reset link. Please request a new one.")}},[]);const E=async s=>{if(s.preventDefault(),a.length<8){o({title:"Password too short",description:"Password must be at least 8 characters long.",variant:"destructive"});return}if(a!==u){o({title:"Passwords don't match",description:"Please make sure both passwords are the same.",variant:"destructive"});return}h(!0);try{const{error:r}=await q.auth.updateUser({password:a});if(r)throw r;P(!0),o({title:"Password updated",description:"Your password has been successfully reset."}),setTimeout(()=>{g.visit("/signin"),g.visit("/signin")},2e3)}catch(r){console.error("Password reset error:",r),o({title:"Error resetting password",description:r.message||"An unexpected error occurred.",variant:"destructive"})}finally{h(!1)}};return p?e.jsxs(e.Fragment,{children:[e.jsx(l,{children:e.jsx("title",{children:"Reset Password Error | Cynergists"})}),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background px-4",children:e.jsxs("div",{className:"w-full max-w-md space-y-8 text-center",children:[e.jsx("img",{src:c,alt:"Cynergists",className:"h-12 mx-auto"}),e.jsxs("div",{className:"bg-card rounded-lg p-8 shadow-lg border border-border",children:[e.jsx(L,{className:"w-16 h-16 text-destructive mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Link Expired"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:p}),e.jsx(m,{onClick:()=>navigate("/forgot-password"),className:"w-full",children:"Request New Reset Link"}),e.jsx(m,{variant:"ghost",onClick:()=>navigate("/signin"),className:"w-full mt-2",children:"Back to Sign In"})]})]})})]}):C?e.jsxs(e.Fragment,{children:[e.jsx(l,{children:e.jsx("title",{children:"Password Reset | Cynergists"})}),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background px-4",children:e.jsxs("div",{className:"w-full max-w-md space-y-8 text-center",children:[e.jsx("img",{src:c,alt:"Cynergists",className:"h-12 mx-auto"}),e.jsxs("div",{className:"bg-card rounded-lg p-8 shadow-lg border border-border",children:[e.jsx(I,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Password Updated!"}),e.jsx("p",{className:"text-muted-foreground",children:"Redirecting you to sign in..."})]})]})})]}):e.jsxs(e.Fragment,{children:[e.jsxs(l,{children:[e.jsx("title",{children:"Reset Your Password | Cynergists"}),e.jsx("meta",{name:"description",content:"Set a new password for your Cynergists account."})]}),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background px-4",children:e.jsxs("div",{className:"w-full max-w-md space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:c,alt:"Cynergists",className:"h-12 mx-auto mb-6"}),e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Reset Your Password"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Enter your new password below"})]}),e.jsxs("form",{onSubmit:E,className:"space-y-6",autoComplete:"off",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"password",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(f,{id:"password",type:i?"text":"password",value:a,onChange:s=>v(s.target.value),placeholder:"Enter new password",required:!0,minLength:8,className:"pr-10",autoComplete:"new-password"}),e.jsx("button",{type:"button",onClick:()=>S(!i),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:i?e.jsx(b,{className:"h-4 w-4"}):e.jsx(N,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(f,{id:"confirmPassword",type:d?"text":"password",value:u,onChange:s=>y(s.target.value),placeholder:"Confirm new password",required:!0,minLength:8,className:"pr-10",autoComplete:"new-password"}),e.jsx("button",{type:"button",onClick:()=>k(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:d?e.jsx(b,{className:"h-4 w-4"}):e.jsx(N,{className:"h-4 w-4"})})]})]}),e.jsx(m,{type:"submit",className:"w-full",disabled:x,children:x?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating Password..."]}):"Reset Password"})]}),e.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:["Remember your password?"," ",e.jsx("button",{onClick:()=>navigate("/signin"),className:"text-primary hover:underline",children:"Sign in"})]})]})})]})};export{O as default};
