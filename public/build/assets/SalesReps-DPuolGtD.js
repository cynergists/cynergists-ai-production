import{u as Ce,w as he,r as i,aF as Ne,j as e,aO as Se,m as X,X as ge,e as ye,q as _e,R as je,B as N,T as we,U as De,k as ke,H as Ae,E as Fe,P as Te}from"./app-C0WycfZe.js";import{I as D}from"./input-B1mdCLd5.js";import{P as Re,a as Pe,b as Ee}from"./popover-Bh4zUw48.js";import{P as We,a as Oe,b as me,c as Le,d as Me,e as Ve}from"./pagination-OcBfRg3b.js";import{S as K,a as ee,b as te,c as se,d as k}from"./select-DQRCPwkF.js";import{L as C}from"./label-BqY6sEFX.js";import{u as xe}from"./useMutation-HYWZGZXg.js";import{c as ae}from"./admin-api-CvF4xGn2.js";import{u as $e,S as Ie,a as ze}from"./SaveViewDialog-Bexem12z.js";import{f as Ue,P as qe}from"./phone-input-CjUrjVoa.js";import{C as Q}from"./CenteredDash-Cjw-8Wy5.js";import{G as He}from"./grip-vertical-B9NmVty3.js";import{C as Be}from"./check-43nAdBq2.js";import{A as Qe,a as Xe}from"./arrow-up-Iuc7k1Ih.js";import{A as Ge}from"./arrow-down-DakVNnj8.js";import{T as Je}from"./textarea-HgaMdGFR.js";import{S as Ye,a as Ze,b as Ke,c as et}from"./sheet-BJ4aOjJ0.js";import{A as tt,a as st,b as at,c as nt,d as lt,e as rt,f as it,g as ot}from"./alert-dialog-DjbhIXqW.js";import{f as ct}from"./errorMessages-9RXyVjba.js";import{C as pe,b as fe,a as ve,c as dt}from"./card-Bi-8_L45.js";import{S as ue}from"./skeleton-BtEvCpij.js";import{U as mt}from"./user-check-BT_ENcFP.js";import{F as ut}from"./filter-iirbqVqV.js";/* empty css            */import"./Combination-COh087cd.js";import"./index-BdQq_4o_.js";import"./index-CQc07GE5.js";import"./index-CuknWpgH.js";import"./chevron-up-DGGjGr1B.js";import"./index-B-RSaXN7.js";import"./dialog-BrdWhXwW.js";import"./index-Cch_8Clv.js";import"./checkbox-jLyXXTBW.js";import"./index-cEAPOc8E.js";function ht(t){const r=(t.page-1)*t.limit;return Ce({queryKey:["admin","salesReps",t],queryFn:()=>ae("get_sales_reps",{limit:t.limit.toString(),offset:r.toString(),sortColumn:t.sortColumn,sortDirection:t.sortDirection,search:t.search||"",status:t.filters?.status||""})})}function xt(){const t=he();return xe({mutationFn:r=>ae("create_sales_rep",{},r),onSuccess:()=>{t.invalidateQueries({queryKey:["admin","salesReps"]})}})}function be(){const t=he();return xe({mutationFn:({id:r,...x})=>ae("update_sales_rep",{id:r},x),onSuccess:()=>{t.invalidateQueries({queryKey:["admin","salesReps"]})}})}function pt(){const t=he();return xe({mutationFn:r=>ae("delete_sales_rep",{id:r}),onSuccess:()=>{t.invalidateQueries({queryKey:["admin","salesReps"]})}})}const ft=["name","email","phone","status","commission_rate","total_sales","total_commission","created_at"];function vt(){return $e({tableName:"sales_rep_view_preferences",defaultColumnOrder:ft,defaultSortColumn:"name",defaultSortDirection:"asc"})}const gt=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],H={name:{key:"name",label:"Name",sortable:!0,minWidth:120,defaultWidth:180,editable:!0,editType:"text"},email:{key:"email",label:"Email",sortable:!0,minWidth:150,defaultWidth:220,editable:!0,editType:"text"},phone:{key:"phone",label:"Phone",sortable:!1,minWidth:150,defaultWidth:180,centered:!0,editable:!0,editType:"text",render:t=>Ue(t.phone)||e.jsx(Q,{})},title:{key:"title",label:"Title",sortable:!0,minWidth:100,defaultWidth:150,editable:!0,editType:"text",render:t=>t.title||e.jsx(Q,{})},status:{key:"status",label:"Status",sortable:!0,minWidth:80,defaultWidth:120,centered:!0,editable:!0,editType:"select",render:t=>{const r=t.status||"inactive",x=r==="active"?"default":"secondary";return e.jsx(ye,{variant:x,children:r.charAt(0).toUpperCase()+r.slice(1)})}},total_clients:{key:"total_clients",label:"Clients",sortable:!0,minWidth:80,defaultWidth:100,centered:!0,editable:!0,editType:"number",render:t=>t.total_clients??e.jsx(Q,{})},monthly_revenue:{key:"monthly_revenue",label:"Monthly Revenue",sortable:!0,minWidth:120,defaultWidth:140,centered:!0,editable:!0,editType:"number",render:t=>`$${t.monthly_revenue.toLocaleString()}`},commission_rate:{key:"commission_rate",label:"Commission",sortable:!0,minWidth:100,defaultWidth:110,centered:!0,editable:!0,editType:"number",render:t=>Se(t.commission_rate)},hire_date:{key:"hire_date",label:"Hire Date",sortable:!0,minWidth:100,defaultWidth:120,centered:!0,editable:!0,editType:"date",render:t=>t.hire_date?Ne(t.hire_date):e.jsx(Q,{})}},jt=["name","email","phone","title","status","total_clients","monthly_revenue","commission_rate","hire_date"];function bt({salesReps:t,loading:r,sortColumn:x,sortDirection:p,onSort:v,onRepClick:V,onRepUpdated:R}){const[P]=i.useState(jt),[y,E]=i.useState({}),l=P.filter(s=>H[s]),[u,_]=i.useState(null),[W,O]=i.useState({}),o=i.useRef(0),A=i.useRef(0),[S,L]=i.useState(null),[M,$]=i.useState(null),[I,z]=i.useState(null),[w,g]=i.useState(""),F=be(),G=s=>W[s]!==void 0?W[s]:y[s]||H[s]?.defaultWidth||150,ne=i.useCallback((s,n)=>{s.preventDefault(),s.stopPropagation(),_(n),o.current=s.clientX,A.current=y[n]||H[n]?.defaultWidth||150;const d=j=>{const h=j.clientX-o.current,a=Math.max(20,A.current+h);O(c=>({...c,[n]:a}))},m=j=>{const h=j.clientX-o.current,a=Math.max(20,A.current+h);E(c=>({...c,[n]:a})),O(c=>{const f={...c};return delete f[n],f}),_(null),document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",m)};document.addEventListener("mousemove",d),document.addEventListener("mouseup",m)},[y]),le=i.useCallback((s,n)=>{L(n),s.dataTransfer.effectAllowed="move",s.dataTransfer.setData("text/plain",n)},[]),re=i.useCallback((s,n)=>{s.preventDefault(),s.dataTransfer.dropEffect="move",S&&n!==S&&$(n)},[S]),U=i.useCallback(()=>{$(null)},[]),J=i.useCallback((s,n)=>{s.preventDefault(),L(null),$(null)},[]),ie=i.useCallback(()=>{L(null),$(null)},[]),q=(s,n,d)=>{z({repId:s,field:n}),g(d?.toString()||"")},T=()=>{z(null),g("")},B=async(s,n)=>{if(F.isPending)return;const d=H[n];let m=w||null;d?.editType==="number"&&w&&(m=parseFloat(w)),await F.mutateAsync({id:s,[n]:m}),z(null),g(""),R?.()},oe=(s,n,d)=>{s.key==="Enter"?(s.preventDefault(),B(n,d)):s.key==="Escape"&&T()},ce=async(s,n,d)=>{F.isPending||(await F.mutateAsync({id:s,[n]:d||null}),z(null),g(""),R?.())},de=({column:s})=>x!==s?e.jsx(Qe,{className:"h-4 w-4 ml-1 opacity-50 flex-shrink-0"}):p==="asc"?e.jsx(Xe,{className:"h-4 w-4 ml-1 flex-shrink-0"}):e.jsx(Ge,{className:"h-4 w-4 ml-1 flex-shrink-0"});return r&&t.length===0?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(X,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):!r&&t.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-muted-foreground",children:[e.jsx("p",{children:"No sales reps found"}),e.jsx("p",{className:"text-sm",children:"Add your first sales representative to get started"})]}):e.jsxs("div",{className:"relative",children:[r&&e.jsx("div",{className:"absolute inset-0 bg-background/50 flex items-center justify-center z-20",children:e.jsx(X,{className:"h-6 w-6 animate-spin text-primary"})}),e.jsxs("table",{style:{tableLayout:"fixed",width:"max-content",minWidth:"100%"},className:"w-full caption-bottom text-sm",children:[e.jsx("thead",{className:"[&_tr]:border-b",children:e.jsx("tr",{className:"border-b transition-colors bg-background",children:l.map((s,n)=>{const d=H[s],m=G(s),j=S===s,h=M===s,a=n===0;return e.jsxs("th",{className:`h-12 px-4 text-left align-middle font-medium text-muted-foreground bg-background relative group transition-all sticky top-0 ${j?"opacity-50":""} ${h?"bg-primary/10 border-l-2 border-primary":""} ${a?"left-0 z-30 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)]":"z-20"}`,style:{width:`${m}px`,minWidth:"20px"},draggable:!0,onDragStart:c=>le(c,s),onDragOver:c=>re(c,s),onDragLeave:U,onDrop:c=>J(c,s),onDragEnd:ie,children:[e.jsxs("div",{className:`flex items-start pr-3 ${d.sortable?"cursor-pointer select-none hover:text-foreground":""}`,onClick:()=>d.sortable&&v(s),children:[e.jsx(He,{className:"h-4 w-4 mr-1 opacity-30 group-hover:opacity-70 cursor-grab flex-shrink-0 mt-0.5"}),e.jsx("span",{style:{wordBreak:"keep-all",overflowWrap:"normal",whiteSpace:"normal"},children:d.label}),d.sortable&&e.jsx(de,{column:s})]}),e.jsx("div",{className:`absolute right-0 top-0 h-full w-1 cursor-col-resize hover:bg-primary/50 transition-colors ${u===s?"bg-primary":"bg-transparent group-hover:bg-border"}`,onMouseDown:c=>ne(c,s)})]},s)})})}),e.jsx("tbody",{className:"[&_tr:last-child]:border-0",children:t.map(s=>e.jsx("tr",{className:"border-b transition-colors hover:bg-muted/50 align-top",children:l.map((n,d)=>{const m=H[n],j=n==="name",h=G(n),a=m.editable&&!j,c=I?.repId===s.id&&I?.field===n,Y=d===0?"sticky left-0 z-10 bg-background shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)]":"";if(c&&m.editType==="select")return e.jsx("td",{className:`p-1 align-middle ${Y}`,style:{width:`${h}px`,maxWidth:`${h}px`},children:e.jsxs(K,{value:w,onValueChange:b=>ce(s.id,n,b),children:[e.jsx(ee,{className:"h-8",children:e.jsx(te,{placeholder:"Select..."})}),e.jsx(se,{children:gt.map(b=>e.jsx(k,{value:b.value,children:b.label},b.value))})]})},n);if(c)return e.jsx("td",{className:`p-1 align-middle ${Y}`,style:{width:`${h}px`,maxWidth:`${h}px`},children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(D,{type:m.editType==="date"?"date":m.editType==="number"?"number":"text",value:w,onChange:b=>g(b.target.value),onKeyDown:b=>oe(b,s.id,n),onBlur:()=>B(s.id,n),autoFocus:!0,className:"h-8 text-sm",disabled:F.isPending}),e.jsx("button",{onClick:()=>B(s.id,n),className:"p-1 hover:bg-primary/10 rounded",disabled:F.isPending,children:e.jsx(Be,{className:"h-4 w-4 text-green-600"})}),e.jsx("button",{onClick:T,className:"p-1 hover:bg-destructive/10 rounded",children:e.jsx(ge,{className:"h-4 w-4 text-destructive"})})]})},n);const Z=m.render?m.render(s):s[n]?.toString()||e.jsx(Q,{});return e.jsx("td",{onClick:b=>{j?V(s):a&&(b.stopPropagation(),q(s.id,n,s[n]))},className:`p-4 align-middle ${j?"font-medium text-primary hover:underline cursor-pointer":""} ${a?"cursor-pointer hover:bg-muted/80":""} ${Y} ${m.centered?"text-center":""}`,style:{width:`${h}px`,maxWidth:`${h}px`},children:m.centered?e.jsx("div",{className:"flex justify-center items-center",children:Z}):Z},n)})},s.id))})]})]})}function Ct({rep:t,isNew:r,open:x,onClose:p}){const{toast:v}=_e(),V=xt(),R=be(),P=pt(),[y,E]=i.useState(!1),[l,u]=i.useState({name:"",email:"",phone:"",title:"",status:"active",commission_rate:"",total_clients:"",monthly_revenue:"",hire_date:"",notes:""});i.useEffect(()=>{t?u({name:t.name||"",email:t.email||"",phone:t.phone||"",title:t.title||"",status:t.status||"active",commission_rate:t.commission_rate?.toString()||"",total_clients:t.total_clients?.toString()||"",monthly_revenue:t.monthly_revenue?.toString()||"",hire_date:t.hire_date||"",notes:t.notes||""}):r&&u({name:"",email:"",phone:"",title:"",status:"active",commission_rate:"",total_clients:"",monthly_revenue:"",hire_date:"",notes:""})},[t,r]);const _=async o=>{if(o.preventDefault(),!l.name.trim()){v({title:"Error",description:"Name is required",variant:"destructive"});return}const A={name:l.name,email:l.email,phone:l.phone,title:l.title||"Solutions Expert",status:l.status,commission_rate:l.commission_rate?parseFloat(l.commission_rate):0,total_clients:l.total_clients?parseInt(l.total_clients):0,monthly_revenue:l.monthly_revenue?parseFloat(l.monthly_revenue):0,hire_date:l.hire_date,notes:l.notes};try{r?(await V.mutateAsync(A),v({title:"Success",description:"Sales rep created successfully"})):t&&(await R.mutateAsync({id:t.id,...A}),v({title:"Success",description:"Sales rep updated successfully"})),p()}catch(S){const L=S instanceof Error?S.message:"Failed to save",M=ct(L,"sales rep");v({title:"Error",description:M,variant:"destructive"})}},W=async()=>{if(t)try{await P.mutateAsync(t.id),v({title:"Success",description:"Sales rep deleted successfully"}),E(!1),p()}catch(o){v({title:"Error",description:o instanceof Error?o.message:"Failed to delete",variant:"destructive"})}},O=V.isPending||R.isPending;return e.jsxs(e.Fragment,{children:[e.jsx(Ye,{open:x,onOpenChange:p,children:e.jsxs(Ze,{className:"w-full sm:max-w-xl overflow-y-auto",children:[e.jsx(Ke,{children:e.jsx(et,{children:r?"Add Sales Rep":"Edit Sales Rep"})}),e.jsxs("form",{onSubmit:_,className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx(C,{htmlFor:"name",children:"Name *"}),e.jsx(D,{id:"name",value:l.name,onChange:o=>u({...l,name:o.target.value}),placeholder:"Full name"})]}),e.jsxs("div",{children:[e.jsx(C,{htmlFor:"email",children:"Email"}),e.jsx(D,{id:"email",type:"email",value:l.email,onChange:o=>u({...l,email:o.target.value}),placeholder:"email@example.com"})]}),e.jsxs("div",{children:[e.jsx(C,{htmlFor:"phone",children:"Phone"}),e.jsx(qe,{id:"phone",value:l.phone,onChange:o=>u({...l,phone:o})})]}),e.jsxs("div",{children:[e.jsx(C,{htmlFor:"title",children:"Title"}),e.jsx(D,{id:"title",value:l.title,onChange:o=>u({...l,title:o.target.value}),placeholder:"Solutions Expert"})]}),e.jsxs("div",{children:[e.jsx(C,{htmlFor:"status",children:"Status"}),e.jsxs(K,{value:l.status,onValueChange:o=>u({...l,status:o}),children:[e.jsx(ee,{children:e.jsx(te,{})}),e.jsxs(se,{children:[e.jsx(k,{value:"active",children:"Active"}),e.jsx(k,{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{children:[e.jsx(C,{htmlFor:"commission_rate",children:"Commission Rate (%)"}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{id:"commission_rate",type:"number",step:"0.1",value:l.commission_rate,onChange:o=>u({...l,commission_rate:o.target.value}),placeholder:"10",className:"pr-8"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground text-sm",children:"%"})]})]}),e.jsxs("div",{children:[e.jsx(C,{htmlFor:"hire_date",children:"Hire Date"}),e.jsx(D,{id:"hire_date",type:"date",value:l.hire_date,onChange:o=>u({...l,hire_date:o.target.value})})]}),e.jsxs("div",{children:[e.jsx(C,{htmlFor:"total_clients",children:"Total Clients"}),e.jsx(D,{id:"total_clients",type:"number",value:l.total_clients,onChange:o=>u({...l,total_clients:o.target.value}),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(C,{htmlFor:"monthly_revenue",children:"Monthly Revenue"}),e.jsxs("div",{className:"relative",children:[e.jsx(je,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(D,{id:"monthly_revenue",type:"number",step:"0.01",value:l.monthly_revenue,onChange:o=>u({...l,monthly_revenue:o.target.value}),placeholder:"0.00",className:"pl-9"})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(C,{htmlFor:"notes",children:"Notes"}),e.jsx(Je,{id:"notes",value:l.notes,onChange:o=>u({...l,notes:o.target.value}),placeholder:"Additional notes...",rows:4})]})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[!r&&t&&e.jsxs(N,{type:"button",variant:"destructive",onClick:()=>E(!0),disabled:P.isPending,children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Delete"]}),e.jsxs("div",{className:"flex gap-2 ml-auto",children:[e.jsx(N,{type:"button",variant:"outline",onClick:p,children:"Cancel"}),e.jsxs(N,{type:"submit",disabled:O,children:[O&&e.jsx(X,{className:"h-4 w-4 mr-2 animate-spin"}),r?"Create":"Save Changes"]})]})]})]})]})}),e.jsx(tt,{open:y,onOpenChange:E,children:e.jsxs(st,{children:[e.jsxs(at,{children:[e.jsx(nt,{children:"Delete Sales Rep"}),e.jsxs(lt,{children:["Are you sure you want to delete ",t?.name,"? This action cannot be undone."]})]}),e.jsxs(rt,{children:[e.jsx(it,{children:"Cancel"}),e.jsx(ot,{onClick:W,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:P.isPending?e.jsx(X,{className:"h-4 w-4 animate-spin"}):"Delete"})]})]})})]})}function Nt({summary:t,loading:r}){if(r||!t)return e.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:Array.from({length:4}).map((p,v)=>e.jsxs(pe,{children:[e.jsxs(fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ue,{className:"h-4 w-24"}),e.jsx(ue,{className:"h-4 w-4"})]}),e.jsx(ve,{children:e.jsx(ue,{className:"h-8 w-16"})})]},v))});const x=[{title:"Total Reps",value:t.total,icon:De},{title:"Active Reps",value:t.active,icon:mt},{title:"Total Clients",value:t.totalClients,icon:ke},{title:"Total Revenue",value:`$${t.totalRevenue.toLocaleString()}`,icon:je}];return e.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:x.map(p=>e.jsxs(pe,{children:[e.jsxs(fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(dt,{className:"text-sm font-medium",children:p.title}),e.jsx(p.icon,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(ve,{children:e.jsx("div",{className:"text-2xl font-bold",children:p.value})})]},p.title))})}function as(){const[t,r]=i.useState(1),[x,p]=i.useState(25),[v,V]=i.useState(""),[R,P]=i.useState(""),[y,E]=i.useState("name"),[l,u]=i.useState("asc"),[_,W]=i.useState({}),[O,o]=i.useState(!1),[A,S]=i.useState(!1),[L,M]=i.useState(null),[$,I]=i.useState(!1),[z,w]=i.useState(!1),{preferences:g,loading:F,saveView:G,loadView:ne,resetToDefault:le}=vt(),re=a=>{V(a);const c=setTimeout(()=>{P(a),r(1)},300);return()=>clearTimeout(c)},{data:U,isLoading:J}=ht({page:t,limit:x,sortColumn:y,sortDirection:l,search:R,filters:_}),ie=U?.salesReps||[],q=U?.total||0,T=U?.totalPages||0,B=U?.summary||null,oe=a=>{y===a?u(l==="asc"?"desc":"asc"):(E(a),u("asc")),r(1)},ce=a=>{M(a),w(!1),I(!0)},de=()=>{M(null),w(!0),I(!0)},s=()=>{I(!1),M(null),w(!1)},n=(a,c)=>{W(f=>{if(!c){const{[a]:Y,...Z}=f;return Z}return{...f,[a]:c}}),r(1)},d=()=>{W({}),r(1)},m=a=>{p(parseInt(a)),r(1)},j=(a,c)=>{G(a,!0)},h=Object.keys(_).length;return F?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(X,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{children:e.jsx("title",{children:"Sales | Admin"})}),e.jsxs("div",{className:"flex flex-col h-[calc(100vh-64px)] overflow-hidden",children:[e.jsxs("div",{className:"flex-shrink-0 p-6 pb-4 space-y-4 bg-background",children:[e.jsx(Nt,{summary:B,loading:J}),e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Sales"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[q," total sales reps"]})]}),e.jsxs("div",{className:"flex items-center gap-1 border-l pl-6",children:[e.jsx(N,{variant:g.activeViewName===null?"secondary":"ghost",size:"sm",onClick:le,className:"text-sm",children:"All"}),g.savedViews.map(a=>e.jsx(N,{variant:g.activeViewName===a.name?"secondary":"ghost",size:"sm",onClick:()=>ne(a.name),className:"text-sm",children:a.name},a.name)),g.savedViews.length<3&&e.jsxs(N,{variant:"ghost",size:"sm",onClick:()=>S(!0),className:"text-sm text-muted-foreground",children:[e.jsx(Ie,{className:"h-3 w-3 mr-1"}),"Save View"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Fe,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(D,{placeholder:"Search reps...",value:v,onChange:a=>re(a.target.value),className:"pl-9 w-64"})]}),e.jsxs(Re,{open:O,onOpenChange:o,children:[e.jsx(Pe,{asChild:!0,children:e.jsxs(N,{variant:"outline",className:"relative",children:[e.jsx(ut,{className:"h-4 w-4 mr-2"}),"Filters",h>0&&e.jsx("span",{className:"absolute -top-1 -right-1 h-5 w-5 rounded-full bg-primary text-primary-foreground text-xs flex items-center justify-center",children:h})]})}),e.jsx(Ee,{className:"w-80",align:"end",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Filters"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{children:"Status"}),e.jsxs(K,{value:_.status||"",onValueChange:a=>n("status",a),children:[e.jsx(ee,{children:e.jsx(te,{placeholder:"All statuses"})}),e.jsxs(se,{children:[e.jsx(k,{value:"",children:"All"}),e.jsx(k,{value:"active",children:"Active"}),e.jsx(k,{value:"inactive",children:"Inactive"})]})]})]}),h>0&&e.jsx(N,{variant:"ghost",size:"sm",onClick:d,className:"w-full",children:"Clear all filters"})]})})]}),e.jsxs(N,{onClick:de,children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Add Sales Rep"]})]})]}),h>0&&e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Active filters:"}),Object.entries(_).map(([a,c])=>e.jsxs(N,{variant:"secondary",size:"sm",onClick:()=>n(a,""),className:"h-6 text-xs",children:[a,": ",c,e.jsx(ge,{className:"h-3 w-3 ml-1"})]},a)),e.jsx(N,{variant:"ghost",size:"sm",onClick:d,className:"h-6 text-xs",children:"Clear all"})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden px-6",children:e.jsx("div",{className:"border rounded-lg h-full overflow-auto",children:e.jsx(bt,{salesReps:ie,loading:J,sortColumn:y,sortDirection:l,onSort:oe,onRepClick:ce})})}),e.jsx("div",{className:"flex-shrink-0 px-6 py-4 bg-background border-t",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Rows per page:"}),e.jsxs(K,{value:x.toString(),onValueChange:m,children:[e.jsx(ee,{className:"w-20",children:e.jsx(te,{})}),e.jsxs(se,{children:[e.jsx(k,{value:"25",children:"25"}),e.jsx(k,{value:"50",children:"50"}),e.jsx(k,{value:"100",children:"100"})]})]}),e.jsxs("span",{className:"text-sm text-muted-foreground ml-4",children:["Showing ",Math.min((t-1)*x+1,q)," -"," ",Math.min(t*x,q)," of ",q]})]}),T>1&&e.jsx(We,{children:e.jsxs(Oe,{children:[e.jsx(me,{children:e.jsx(Le,{onClick:()=>r(a=>Math.max(1,a-1)),className:t===1?"pointer-events-none opacity-50":"cursor-pointer"})}),Array.from({length:Math.min(5,T)},(a,c)=>{const f=t<=3?c+1:t+c-2;return f<1||f>T?null:e.jsx(me,{children:e.jsx(Me,{onClick:()=>r(f),isActive:t===f,className:"cursor-pointer",children:f})},f)}),e.jsx(me,{children:e.jsx(Ve,{onClick:()=>r(a=>Math.min(T,a+1)),className:t===T?"pointer-events-none opacity-50":"cursor-pointer"})})]})})]})})]}),e.jsx(Ct,{rep:L,isNew:z,open:$,onClose:s}),e.jsx(ze,{open:A,onOpenChange:S,onSave:j,existingViewNames:g.savedViews.map(a=>a.name)})]})}export{as as default};
