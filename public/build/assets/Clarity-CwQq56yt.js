import{c as y,d as g,N as l,s as C,r as N,j as e,v,B as d,b9 as b,aP as w}from"./app-CjsYDFmT.js";import{D as k,A as n}from"./AnalyticsCard-C7fgS2KK.js";import{C as m,b as h,c as x,d as p,a as u}from"./card-Dz0yCaqc.js";import{A as D,b as A,a as M}from"./alert-BViR3xpl.js";import{E as f}from"./external-link-CIEI5SAF.js";import{Z as S}from"./zap-DzYWero8.js";import{A as P}from"./arrow-down-CbLyxnD-.js";import{M as j}from"./monitor-Cm48i4Be.js";import{s as T}from"./calendar-CFh3D0Z8.js";/* empty css            */import"./popover-BUPp5UYr.js";import"./Combination-Mg1W9W58.js";import"./select-BZPifpxC.js";import"./index-BdQq_4o_.js";import"./index-G0k2b-8C.js";import"./index-BSKaJvun.js";import"./check-BI7rB0RY.js";import"./chevron-up-CP4nq72x.js";import"./endOfDay-B7q6ZJD9.js";import"./subYears-W2-aFIwb.js";import"./endOfMonth-DGuci9dv.js";const _=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],I=y("MousePointer",_);const L=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],E=y("Smartphone",L);function R(s){const t=g({queryKey:["clarity-analytics",s?.from,s?.to],queryFn:async()=>{const i=s?.from?l(s.from,"yyyy-MM-dd"):void 0,c=s?.to?l(s.to,"yyyy-MM-dd"):void 0,{data:a,error:o}=await C.functions.invoke("microsoft-clarity",{body:{startDate:i,endDate:c}});if(o)throw console.error("Clarity analytics error:",o),o;return a},enabled:!!s?.from&&!!s?.to,retry:!1}),r=t.data?.configured!==!1;return{data:t.data,isLoading:t.isLoading,error:t.error,isConfigured:r,refetch:t.refetch}}function ie(){const[s,t]=N.useState({from:T(new Date,30),to:new Date}),{data:r,isLoading:i,isConfigured:c}=R(s);return c?e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Microsoft Clarity"}),e.jsx("p",{className:"text-muted-foreground",children:"User behavior analytics and session recordings"})]}),e.jsx(k,{dateRange:s,onDateRangeChange:t})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(n,{title:"Total Sessions",value:r?.totalSessions??"—",change:r?.sessionChange,changeType:r?.sessionChangeType,icon:b,loading:i}),e.jsx(n,{title:"Dead Clicks",value:r?.deadClicks??"—",description:"Clicks with no response",icon:I,loading:i}),e.jsx(n,{title:"Rage Clicks",value:r?.rageClicks??"—",description:"Repeated frustrated clicks",icon:S,loading:i}),e.jsx(n,{title:"Avg. Scroll Depth",value:r?.avgScrollDepth?w(r.avgScrollDepth):"—",description:"How far users scroll",icon:P,loading:i})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(m,{children:[e.jsxs(h,{children:[e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-5 w-5"}),"Device Breakdown"]}),e.jsx(p,{children:"Sessions by device type"})]}),e.jsx(u,{children:i?e.jsx("div",{className:"space-y-3",children:[1,2,3].map(a=>e.jsx("div",{className:"h-8 bg-muted animate-pulse rounded"},a))}):r?.deviceBreakdown?e.jsx("div",{className:"space-y-3",children:Object.entries(r.deviceBreakdown).map(([a,o])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[a.toLowerCase()==="mobile"?e.jsx(E,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(j,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"capitalize",children:a})]}),e.jsx("span",{className:"font-medium",children:o})]},a))}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No data available"})})]}),e.jsxs(m,{children:[e.jsxs(h,{children:[e.jsx(x,{children:"Session Recordings"}),e.jsx(p,{children:"Recent user session replays"})]}),e.jsx(u,{children:i?e.jsx("div",{className:"space-y-3",children:[1,2,3].map(a=>e.jsx("div",{className:"h-8 bg-muted animate-pulse rounded"},a))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"View session recordings in Microsoft Clarity dashboard"}),e.jsx(d,{variant:"outline",asChild:!0,children:e.jsxs("a",{href:"https://clarity.microsoft.com",target:"_blank",rel:"noopener noreferrer",children:["Open Clarity Dashboard",e.jsx(f,{className:"ml-2 h-4 w-4"})]})})]})})]})]})]}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Microsoft Clarity"}),e.jsx("p",{className:"text-muted-foreground",children:"User behavior analytics and session recordings"})]}),e.jsxs(D,{children:[e.jsx(v,{className:"h-4 w-4"}),e.jsx(A,{children:"Configuration Required"}),e.jsxs(M,{className:"space-y-4",children:[e.jsx("p",{children:"Microsoft Clarity is not configured yet. To set it up:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm",children:[e.jsx("li",{children:"Sign up for free at clarity.microsoft.com"}),e.jsx("li",{children:"Create a new project and get your Project ID"}),e.jsx("li",{children:"Generate an API token in Settings → API"}),e.jsx("li",{children:"Add CLARITY_PROJECT_ID and CLARITY_API_TOKEN in your secrets"})]}),e.jsx(d,{variant:"outline",asChild:!0,children:e.jsxs("a",{href:"https://clarity.microsoft.com",target:"_blank",rel:"noopener noreferrer",children:["Go to Microsoft Clarity",e.jsx(f,{className:"ml-2 h-4 w-4"})]})})]})]})]})}export{ie as default};
