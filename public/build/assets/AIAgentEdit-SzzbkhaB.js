import{j as e,b as M,g as C,B as o,S as G,e as V,F as Z,U,au as J,d as E,r as g,k as v,L as N,f as H,n as O,R as X,P as Y,T as ee,l as se}from"./app-CjsYDFmT.js";import{u as re}from"./useMutation-BrlSJFFx.js";import{c as _}from"./admin-api-BAkP0p9n.js";import{I as b}from"./input-BBc2sdOt.js";import{L as c}from"./label-Dvt0WIie.js";import{T as k}from"./textarea-DjNE0yWa.js";import{S as z}from"./switch-BMqUTsNK.js";import{S as ae}from"./scroll-area-CAOC7FXS.js";import{C as S,a as P}from"./card-Dz0yCaqc.js";import{S as te,a as ie,b as ne,c as le,d as ce}from"./select-BZPifpxC.js";import{A as q}from"./AgentMediaUpload-B3OmUNnL.js";import{C as oe}from"./check-BI7rB0RY.js";import{P as de}from"./plug-BLuw5Y8x.js";import{Z as F}from"./zap-DzYWero8.js";import{M as D}from"./message-square-B-2a41Zn.js";import{T as I}from"./trending-up-WPw2ICoL.js";import{S as me}from"./star-DtYFQs1L.js";import{A as pe}from"./AIAgentCard-CqoMYnCn.js";import{S as ue}from"./store-I1hmzzvZ.js";import{E as xe}from"./eye-DdZvHegw.js";import{C as ge}from"./circle-BFFpQF7i.js";/* empty css            */import"./index-CSw9D2VK.js";import"./index-BSKaJvun.js";import"./index-G0k2b-8C.js";import"./index-BdQq_4o_.js";import"./Combination-Mg1W9W58.js";import"./chevron-up-CP4nq72x.js";import"./upload-DYe8FgAY.js";const he=a=>{switch(a?.toLowerCase()){case"admin":return U;case"communication":return D;case"content":return Z;case"data and analytics":return I;case"finance":return F;case"growth":return I;case"operations":return F;case"personal":return me;case"sales":return I;case"support":return D;case"tech":return F;default:return V}},T=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(a);function je({agent:a,isAdmin:h=!1,className:d}){const y=he(a.category),t=a.product_media?.[0],j=t?.url||a.image_url,s=t?.type==="video",n=a.tiers?.[0]?.price??a.price??0;return e.jsx("div",{className:M("bg-background",d),children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 lg:gap-12",children:[e.jsx("div",{children:e.jsx("div",{className:"relative rounded-2xl p-[15px] bg-gradient-to-br from-[#81CA16] to-[#26908B]",children:e.jsxs("div",{className:"relative aspect-[2/3] rounded-xl overflow-hidden bg-background",children:[j?s?e.jsx("video",{src:j,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"w-full h-full object-contain"}):e.jsx("img",{src:j,alt:a.name,className:"w-full h-full object-contain"}):e.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:e.jsx("div",{className:"p-6 rounded-2xl bg-lime-500/20 border border-lime-500/30",children:e.jsx(y,{className:"h-16 w-16 text-accent dark:text-lime-400"})})}),e.jsx(C,{variant:"outline",className:"absolute top-4 left-4 text-xs capitalize bg-black/50 text-white border-white/30 backdrop-blur-sm",children:a.category||"Category"})]})})}),e.jsxs("div",{className:"space-y-6 pt-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white",children:a.job_title||"Job Title"}),a.website_category&&e.jsx(C,{className:"bg-lime-500/10 text-accent dark:text-lime-400 border-lime-500/30",children:a.website_category})]}),e.jsxs("p",{className:"text-base",children:[e.jsx("span",{className:"text-muted-foreground font-normal",children:"Code Name: "}),e.jsx("span",{className:"font-bold text-white",children:a.name||"Agent Name"})]})]}),e.jsx("p",{className:"text-foreground text-lg leading-relaxed",children:a.description||"Enter a description for this AI agent..."}),a.features&&a.features.length>0&&e.jsxs("div",{className:"bg-muted/30 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"What's Included"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:a.features.map((x,m)=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"h-5 w-5 rounded-full bg-lime-500/20 flex items-center justify-center shrink-0 mt-0.5",children:e.jsx(oe,{className:"h-3 w-3 text-accent dark:text-lime-400"})}),e.jsx("span",{className:"text-foreground text-sm",children:x})]},m))})]}),a.integrations&&a.integrations.length>0&&e.jsxs("div",{className:"bg-muted/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(de,{className:"h-5 w-5 text-accent dark:text-lime-400"}),e.jsx("h3",{className:"text-lg font-bold",children:"Integrations"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.integrations.map((x,m)=>e.jsx(C,{variant:"outline",className:"text-base py-1.5 px-3",children:x},m))})]}),a.tiers&&a.tiers.length>0?e.jsxs("div",{className:"space-y-4",children:[a.tiers[0]?.description&&e.jsx("div",{className:"py-3 px-4 bg-muted/50 rounded-lg border border-border/50",children:e.jsx("p",{className:"text-lg font-bold text-foreground",children:a.tiers[0].description})}),a.tiers.length>1&&e.jsx("div",{className:"flex gap-2 px-1",children:a.tiers.map((x,m)=>e.jsx("div",{className:M("h-3 w-3 rounded-full border-2 transition-all",m===0?"bg-lime-400 border-lime-400":"border-muted-foreground/50")},m))}),e.jsx("div",{className:"bg-muted/30 rounded-lg p-4",children:e.jsxs("p",{className:"text-base text-accent dark:text-lime-400",children:[e.jsx("span",{className:"font-medium",children:"Price:"})," ",T(n),"/mo"]})})]}):e.jsx("div",{className:"bg-muted/30 rounded-lg p-4",children:e.jsxs("p",{className:"text-base text-accent dark:text-lime-400",children:[e.jsx("span",{className:"font-medium",children:"Price:"})," ",T(n),"/mo"]})}),e.jsxs(o,{size:"lg",className:"w-full bg-lime-500 hover:bg-lime-600 text-black font-medium",disabled:h,children:[e.jsx(G,{className:"mr-2 h-4 w-4"}),"Add to Cart - ",T(n),"/mo"]})]})]})})}const fe=["New","Popular","Software","Planned","Roadmap","Beta","Vote"];function Ze({id:a}){const h=J(),d=a==="new",{data:y=[]}=E({queryKey:["agent-categories-names"],queryFn:async()=>(await _("get_agent_categories")).map(i=>i.name)}),{data:t,isLoading:j}=E({queryKey:["agent-edit",a],queryFn:async()=>d?null:_("get_ai_agent",{id:a}),enabled:!d}),[s,n]=g.useState({name:"",job_title:"",description:"",price:"",category:"General",website_categories:["New"],section_order:999,icon:"bot",is_popular:!1,is_active:!0,features:"",perfect_for:"",integrations:"",image_url:"",card_media:[],product_media:[],tiers:[]}),[x,m]=g.useState(!1),[w,B]=g.useState("product"),W=g.useRef(!0);g.useEffect(()=>{if(t){const r=t.image_url?[{url:t.image_url,type:"image"}]:[],i=t.website_category,l=Array.isArray(i)?i:typeof i=="string"?[i]:["New"];n({name:t.name||"",job_title:t.job_title||"",description:t.description||"",price:t.price??"",category:t.category||"General",website_categories:l,section_order:t.section_order??999,icon:t.icon||"bot",is_popular:t.is_popular||!1,is_active:t.is_active??!0,features:Array.isArray(t.features)?t.features.join(`
`):"",perfect_for:Array.isArray(t.perfect_for)?t.perfect_for.join(`
`):"",integrations:Array.isArray(t.integrations)?t.integrations.join(`
`):"",image_url:t.image_url||"",card_media:Array.isArray(t.card_media)?t.card_media:r,product_media:Array.isArray(t.product_media)?t.product_media:[],tiers:Array.isArray(t.tiers)?t.tiers:[]}),W.current=!1}},[t]);const R=g.useMemo(()=>({name:s.name,job_title:s.job_title||null,description:s.description||null,category:s.category,website_category:s.website_categories[0]||"New",features:s.features.split(`
`).map(r=>r.trim()).filter(Boolean),integrations:s.integrations.split(`
`).map(r=>r.trim()).filter(Boolean),image_url:s.image_url||null,product_media:s.product_media,tiers:s.tiers,price:typeof s.price=="number"?s.price:0}),[s]),$=g.useCallback(async()=>{if(!(!s.name||d)){m(!0);try{const r=s.features.split(`
`).map(u=>u.trim()).filter(Boolean),i=s.perfect_for.split(`
`).map(u=>u.trim()).filter(Boolean),l=s.integrations.split(`
`).map(u=>u.trim()).filter(Boolean),p={name:s.name,job_title:s.job_title||null,description:s.description,price:typeof s.price=="number"?s.price:0,category:s.category,website_category:s.website_categories.length>0?s.website_categories:["New"],section_order:s.section_order,icon:s.icon,is_popular:s.is_popular,is_active:s.is_active,features:r,perfect_for:i,integrations:l,image_url:s.card_media[0]?.url||"",card_media:s.card_media,product_media:s.product_media,tiers:s.tiers};await _("update_ai_agent",{id:a},p),v.success("Agent saved successfully"),h.invalidateQueries({queryKey:["portal-agents"]}),h.invalidateQueries({queryKey:["marketplace-agents"]})}catch(r){v.error("Failed to save: "+r.message)}finally{m(!1)}}},[s,a,d,h]),A=re({mutationFn:async()=>{const r=s.features.split(`
`).map(f=>f.trim()).filter(Boolean),i=s.perfect_for.split(`
`).map(f=>f.trim()).filter(Boolean),l=s.integrations.split(`
`).map(f=>f.trim()).filter(Boolean),p={name:s.name,job_title:s.job_title||null,description:s.description,price:typeof s.price=="number"?s.price:0,category:s.category,website_category:s.website_categories.length>0?s.website_categories:["New"],section_order:s.section_order,icon:s.icon,is_popular:s.is_popular,is_active:s.is_active,features:r,perfect_for:i,integrations:l,image_url:s.card_media[0]?.url||"",card_media:s.card_media,product_media:s.product_media,tiers:s.tiers},u=s.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"");await _("create_ai_agent",void 0,{...p,slug:u,sort_order:999})},onSuccess:()=>{h.invalidateQueries({queryKey:["portal-agents"]}),v.success("AI Agent created successfully"),se.visit("/admin/ai-agents")},onError:r=>{v.error("Failed to create AI Agent: "+r.message)}}),K=()=>{n({...s,tiers:[...s.tiers,{price:0,description:""}]})},Q=r=>{n({...s,tiers:s.tiers.filter((i,l)=>l!==r)})},L=(r,i,l)=>{const p=[...s.tiers];p[r]={...p[r],[i]:l},n({...s,tiers:p})};return!d&&j?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-lime-400"})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(o,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx(N,{href:"/admin/ai-agents",children:e.jsx(H,{className:"h-5 w-5"})})}),e.jsx("div",{children:e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:d?"Create AI Agent":`Edit: ${t?.name}`})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!d&&e.jsx(o,{onClick:$,disabled:x||!s.name,className:"bg-lime-500 hover:bg-lime-600 text-black",children:x?e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):"Save Agent"}),d&&e.jsx(o,{onClick:()=>A.mutate(),disabled:A.isPending||!s.name,className:"bg-lime-500 hover:bg-lime-600 text-black",children:A.isPending?"Creating...":"Create Agent"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-lime-500/10 border border-lime-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-lime-500 animate-pulse"}),e.jsx("p",{className:"text-sm text-lime-400",children:"Live sync enabled:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{asChild:!0,variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",children:e.jsxs(N,{href:"/marketplace",target:"_blank",children:[e.jsx(ue,{className:"h-3 w-3 mr-1"}),"Marketplace"]})}),e.jsx(o,{asChild:!0,variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",children:e.jsxs(N,{href:"/portal/browse",target:"_blank",children:[e.jsx(U,{className:"h-3 w-3 mr-1"}),"Client"]})}),e.jsx(o,{asChild:!0,variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",children:e.jsxs(N,{href:"/partner/marketplace",target:"_blank",children:[e.jsx(X,{className:"h-3 w-3 mr-1"}),"Partner"]})})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(xe,{className:"h-4 w-4"}),e.jsx("span",{children:"Live Preview"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{variant:w==="product"?"default":"outline",size:"sm",onClick:()=>B("product"),children:"Agent Product Page"}),e.jsx(o,{variant:w==="card"?"default":"outline",size:"sm",onClick:()=>B("card"),children:"Agent Player Card"})]})]})]}),e.jsxs("div",{className:"grid xl:grid-cols-[400px_1fr] gap-8",children:[e.jsx(S,{className:"h-fit",children:e.jsx(P,{className:"p-6",children:e.jsx(ae,{className:"h-[calc(100vh-280px)]",children:e.jsxs("div",{className:"space-y-6 pr-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{className:"text-base font-semibold",children:"Agent Player Card"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Media shown on the agent card in listings"}),e.jsx(q,{media:s.card_media,onChange:r=>n({...s,card_media:r}),agentName:s.name,maxItems:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{className:"text-base font-semibold",children:"Agent Product Page"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Media shown on the agent's detail page"}),e.jsx(q,{media:s.product_media,onChange:r=>n({...s,product_media:r}),agentName:s.name,maxItems:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"name",children:"AI Agent Name *"}),e.jsx(b,{id:"name",placeholder:"e.g., Mosaic",value:s.name,onChange:r=>n({...s,name:r.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"job_title",children:"Job Title"}),e.jsx(b,{id:"job_title",placeholder:"e.g., Content Writer Pro",value:s.job_title,onChange:r=>n({...s,job_title:r.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"description",children:"Short Description"}),e.jsx(k,{id:"description",placeholder:"Summarize what this AI Agent does...",value:s.description,onChange:r=>n({...s,description:r.target.value}),rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Product Category"}),e.jsxs(te,{value:s.category,onValueChange:r=>n({...s,category:r}),children:[e.jsx(ie,{children:e.jsx(ne,{})}),e.jsx(le,{children:y.map(r=>e.jsx(ce,{value:r,children:r},r))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Website Sections"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Select where this agent appears"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 p-3 rounded-lg border bg-muted/30",children:fe.map(r=>{const i=s.website_categories.includes(r);return e.jsxs("label",{className:`flex items-center gap-2 p-2 rounded cursor-pointer transition-colors ${i?"bg-lime-500/20 border border-lime-500/40":"hover:bg-muted"}`,children:[e.jsx("input",{type:"checkbox",checked:i,onChange:l=>{const p=l.target.checked?[...s.website_categories,r]:s.website_categories.filter(u=>u!==r);n({...s,website_categories:p})},className:"rounded border-muted-foreground/50"}),e.jsx("span",{className:"text-sm",children:r})]},r)})})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-4 p-4 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{id:"is_popular",checked:s.is_popular,onCheckedChange:r=>n({...s,is_popular:r})}),e.jsx(c,{htmlFor:"is_popular",children:"Popular"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{id:"is_active",checked:s.is_active,onCheckedChange:r=>n({...s,is_active:r})}),e.jsx(c,{htmlFor:"is_active",children:"Active"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"price",children:"Base Price ($/month)"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Used when no tiers are defined"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl font-bold text-primary",children:"$"}),e.jsx(b,{id:"price",type:"number",min:"0",step:"0.01",value:s.price,onChange:r=>n({...s,price:r.target.value===""?"":parseFloat(r.target.value)||0})}),e.jsx("span",{className:"text-muted-foreground",children:"/mo"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(c,{children:"Pricing Tiers"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Add tiers for slider-based pricing"})]}),e.jsxs(o,{type:"button",variant:"outline",size:"sm",onClick:K,children:[e.jsx(Y,{className:"h-4 w-4 mr-1"}),"Add Tier"]})]}),s.tiers.length===0?e.jsx("div",{className:"p-4 rounded-lg border border-dashed border-border/50 text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"No tiers defined"})}):e.jsx("div",{className:"space-y-3",children:s.tiers.map((r,i)=>e.jsx(S,{className:"bg-muted/30",children:e.jsx(P,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ge,{className:"h-3 w-3 fill-lime-400 text-lime-400 mt-3 shrink-0"}),e.jsx("div",{className:"flex-1 space-y-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(c,{className:"text-xs",children:"Price ($/mo)"}),e.jsx(b,{type:"number",min:"0",value:r.price||"",onChange:l=>L(i,"price",parseFloat(l.target.value)||0)})]}),e.jsxs("div",{children:[e.jsx(c,{className:"text-xs",children:"Description"}),e.jsx(b,{placeholder:"e.g., 1 Website",value:r.description,onChange:l=>L(i,"description",l.target.value)})]})]})}),e.jsx(o,{type:"button",variant:"ghost",size:"icon",onClick:()=>Q(i),className:"shrink-0",children:e.jsx(ee,{className:"h-4 w-4 text-destructive"})})]})})},i))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"features",children:"What's Included (one per line)"}),e.jsx(k,{id:"features",placeholder:`Feature one
Feature two
Feature three`,value:s.features,onChange:r=>n({...s,features:r.target.value}),rows:4})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"integrations",children:"Integrations (one per line)"}),e.jsx(k,{id:"integrations",placeholder:`Slack
Zapier
Google Workspace`,value:s.integrations,onChange:r=>n({...s,integrations:r.target.value}),rows:3})]})]})})})}),e.jsx("div",{className:"space-y-4",children:e.jsx(S,{className:"overflow-hidden",children:e.jsx(P,{className:"p-6 md:p-8",children:w==="product"?e.jsx(je,{agent:R,isAdmin:!0}):e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(pe,{agent:{id:a||"preview",name:s.name||"Agent Name",slug:s.name?.toLowerCase().replace(/\s+/g,"-")||"preview",description:s.description||null,job_title:s.job_title||null,price:typeof s.price=="number"?s.price:0,category:s.category,icon:s.icon||"bot",features:s.features.split(`
`).filter(Boolean),is_popular:s.is_popular,is_active:s.is_active,card_media:s.card_media}})})})})})]})]})}export{Ze as default};
