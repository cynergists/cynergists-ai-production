import{w as j,u as p,j as e,L as g,B as b,d as f,K as v,h as c,s as d,e as y}from"./app-C0WycfZe.js";import{u as w}from"./useMutation-HYWZGZXg.js";import{T as N,a as S,b as n,c as r,d as C,e as t}from"./table-D6JhU9yR.js";import{S as T,a as _,b as q,c as B,d as L}from"./select-DQRCPwkF.js";/* empty css            */import"./index-BdQq_4o_.js";import"./index-CQc07GE5.js";import"./Combination-COh087cd.js";import"./index-CuknWpgH.js";import"./check-43nAdBq2.js";import"./chevron-up-DGGjGr1B.js";const o=[{value:"pending",label:"Pending",color:"bg-yellow-500"},{value:"reviewed",label:"Reviewed",color:"bg-blue-500"},{value:"approved",label:"Approved",color:"bg-green-500"},{value:"implemented",label:"Implemented",color:"bg-purple-500"},{value:"rejected",label:"Rejected",color:"bg-red-500"}];function k(){const u=j(),{data:i,isLoading:m}=p({queryKey:["agent-suggestions"],queryFn:async()=>{const{data:s,error:a}=await d.from("agent_suggestions").select("*").order("created_at",{ascending:!1});if(a)throw a;return s}}),x=w({mutationFn:async({id:s,status:a})=>{const{error:l}=await d.from("agent_suggestions").update({status:a}).eq("id",s);if(l)throw l},onSuccess:()=>{u.invalidateQueries({queryKey:["agent-suggestions"]}),c.success("Status updated successfully")},onError:s=>{c.error("Failed to update status: "+s.message)}}),h=s=>{const a=o.find(l=>l.value===s);return e.jsx(y,{className:`${a?.color} text-white`,children:a?.label||s})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(g,{href:"/admin/client-portal",children:e.jsx(b,{variant:"ghost",size:"icon",children:e.jsx(f,{className:"h-4 w-4"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Agent Suggestions"}),e.jsx("p",{className:"text-muted-foreground",children:"Review customer-submitted agent ideas"})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(N,{children:[e.jsx(S,{children:e.jsxs(n,{children:[e.jsx(r,{children:"Agent Name"}),e.jsx(r,{children:"Category"}),e.jsx(r,{children:"Description"}),e.jsx(r,{children:"Use Case"}),e.jsx(r,{children:"Status"}),e.jsx(r,{children:"Submitted"})]})}),e.jsx(C,{children:m?e.jsx(n,{children:e.jsx(t,{colSpan:6,className:"text-center",children:"Loading..."})}):i?.length===0?e.jsx(n,{children:e.jsx(t,{colSpan:6,className:"text-center text-muted-foreground",children:"No suggestions yet. Customers can submit ideas through the portal."})}):i?.map(s=>e.jsxs(n,{children:[e.jsx(t,{className:"font-medium",children:s.agent_name}),e.jsx(t,{children:s.category}),e.jsx(t,{className:"max-w-xs truncate",children:s.description}),e.jsx(t,{className:"max-w-xs truncate",children:s.use_case||"-"}),e.jsx(t,{children:e.jsxs(T,{value:s.status,onValueChange:a=>x.mutate({id:s.id,status:a}),children:[e.jsx(_,{className:"w-[130px]",children:e.jsx(q,{children:h(s.status)})}),e.jsx(B,{children:o.map(a=>e.jsx(L,{value:a.value,children:a.label},a.value))})]})}),e.jsx(t,{className:"text-muted-foreground",children:v(new Date(s.created_at),"MMM d, yyyy")})]},s.id))})]})})]})}export{k as default};
