import{c as w,q as P,r as d,j as e,H as E,B as r,P as H,m as y,T as I,aF as L,e as z}from"./app-yl1YHj2k.js";import{C as f,a as v,b as B,c as $}from"./card-Dxx2nlaR.js";import{I as q}from"./input-B3tD5KH9.js";import{T as M}from"./textarea-CY5CbXPo.js";import{L as m}from"./label-C79MsPnt.js";import{D as O,g as U,a as V,c as G,d as R}from"./dialog-B01Lxjmp.js";import{S as Z,a as J,b as K,c as Q,d as x}from"./select-bZyWIIk8.js";import{a as W,b as X,c as Y,d as ee}from"./useAdminQueries-BjelO2fw.js";import{P as te}from"./pencil-kpS8lLNO.js";import{L as se}from"./lightbulb-Dd8dUAbZ.js";/* empty css            */import"./index-ClWG0nRm.js";import"./index-DC5Tape7.js";import"./Combination-BU6xJxfT.js";import"./index-BdQq_4o_.js";import"./index-KgiDK8vA.js";import"./index-B4oGC8tk.js";import"./check-3ows1Yys.js";import"./chevron-up-CP4UIDax.js";import"./useMutation-Dt0Tk2fE.js";import"./admin-api-G7yaMq_z.js";const ae=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],ie=w("GitCommitHorizontal",ae);const ne=[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]],C=w("StickyNote",ne);function Se(){const{toast:o}=P(),{data:l=[],isLoading:b}=W(),h=X(),p=Y(),u=ee(),[D,a]=d.useState(!1),[i,g]=d.useState(null),[s,n]=d.useState({title:"",content:"",note_type:"note"}),j=h.isPending||p.isPending||u.isPending,N=()=>{n({title:"",content:"",note_type:"note"}),g(null)},k=()=>{N(),a(!0)},S=t=>{g(t),n({title:t.title,content:t.content||"",note_type:t.note_type||"note"}),a(!0)},T=async t=>{t.preventDefault();try{i?await p.mutateAsync({id:i.id,...s}):await h.mutateAsync(s),o({title:i?"Note Updated":"Note Created",description:`"${s.title}" has been saved.`}),a(!1),N()}catch{o({title:"Error",description:"Failed to save note. Please try again.",variant:"destructive"})}},_=async t=>{if(confirm(`Are you sure you want to delete "${t.title}"?`))try{await u.mutateAsync(t.id),o({title:"Note Deleted",description:`"${t.title}" has been deleted.`})}catch{o({title:"Error",description:"Failed to delete note. Please try again.",variant:"destructive"})}},A=t=>{switch(t){case"changelog":return e.jsx(ie,{className:"h-4 w-4"});case"idea":return e.jsx(se,{className:"h-4 w-4"});default:return e.jsx(C,{className:"h-4 w-4"})}},F=t=>{const c={note:"secondary",changelog:"default",idea:"outline"};return e.jsxs(z,{variant:c[t||"note"]||"secondary",className:"gap-1",children:[A(t),t||"note"]})};return e.jsxs(e.Fragment,{children:[e.jsx(E,{children:e.jsx("title",{children:"Notes | Admin"})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Notes & Changelog"}),e.jsx("p",{className:"text-muted-foreground",children:"Track ideas, changes, and notes for your site"})]}),e.jsxs(O,{open:D,onOpenChange:a,children:[e.jsx(U,{asChild:!0,children:e.jsxs(r,{onClick:k,children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Add Note"]})}),e.jsxs(V,{children:[e.jsx(G,{children:e.jsx(R,{children:i?"Edit Note":"Create New Note"})}),e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"title",children:"Title"}),e.jsx(q,{id:"title",value:s.title,onChange:t=>n({...s,title:t.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"note_type",children:"Type"}),e.jsxs(Z,{value:s.note_type,onValueChange:t=>n({...s,note_type:t}),children:[e.jsx(J,{children:e.jsx(K,{})}),e.jsxs(Q,{children:[e.jsx(x,{value:"note",children:"Note"}),e.jsx(x,{value:"changelog",children:"Changelog"}),e.jsx(x,{value:"idea",children:"Idea"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"content",children:"Content"}),e.jsx(M,{id:"content",value:s.content,onChange:t=>n({...s,content:t.target.value}),rows:6})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(r,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsxs(r,{type:"submit",disabled:j,children:[j&&e.jsx(y,{className:"h-4 w-4 mr-2 animate-spin"}),i?"Update":"Create"]})]})]})]})]})]}),b&&l.length===0?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(y,{className:"h-8 w-8 animate-spin text-primary"})}):l.length===0?e.jsx(f,{children:e.jsxs(v,{className:"py-12 text-center",children:[e.jsx(C,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:'No notes yet. Click "Add Note" to create your first note.'})]})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:l.map(t=>e.jsxs(f,{children:[e.jsxs(B,{className:"pb-2",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx($,{className:"text-lg",children:t.title}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(r,{variant:"ghost",size:"icon",onClick:()=>S(t),children:e.jsx(te,{className:"h-4 w-4"})}),e.jsx(r,{variant:"ghost",size:"icon",onClick:()=>_(t),children:e.jsx(I,{className:"h-4 w-4 text-destructive"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[F(t.note_type),e.jsx("span",{className:"text-xs text-muted-foreground",children:L(t.created_at)})]})]}),e.jsx(v,{children:e.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:t.content||"No content"})})]},t.id))})]})]})}export{Se as default};
