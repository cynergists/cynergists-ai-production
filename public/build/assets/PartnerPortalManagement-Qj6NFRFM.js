import{w as j,r as l,u as N,j as e,B as v,U as b,L as P,h as c,s as o}from"./app-Lw9toWEL.js";import{C as d,b as m,c as x,d as u,a as y}from"./card-HJJ00fMS.js";import{L as w}from"./label-BmZ0klfu.js";import{u as C}from"./useMutation-eEEOJFKL.js";import{S}from"./slider-B6IRZU31.js";import{P as _}from"./percent-W1q_58It.js";import{E}from"./eye-COYcjsCX.js";/* empty css            */import"./index-Bewwc68W.js";import"./index-BdQq_4o_.js";import"./index-DVcw4AEI.js";import"./index-Di_FMiVt.js";function V(){const p=j(),[t,n]=l.useState(20),{data:a,isLoading:h}=N({queryKey:["partner-settings"],queryFn:async()=>{const{data:s,error:r}=await o.from("partner_settings").select("*").limit(1).single();if(r)throw r;return s}});l.useEffect(()=>{a&&n(a.global_discount_percent)},[a]);const i=C({mutationFn:async s=>{const{error:r}=await o.from("partner_settings").update({global_discount_percent:s}).eq("id",a?.id);if(r)throw r},onSuccess:()=>{p.invalidateQueries({queryKey:["partner-settings"]}),c.success("Partner discount updated successfully")},onError:s=>{c.error("Failed to update discount: "+s.message)}}),g=()=>{i.mutate(t)},f=[{title:"View All Partners",description:"Manage partner accounts and statuses",icon:b,href:"/admin/partners",color:"text-blue-500"},{title:"Partner Portal Preview",description:"See how partners view the portal",icon:E,href:"/partner",color:"text-cyan-500",external:!0}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Partner Portal"}),e.jsx("p",{className:"text-muted-foreground",children:"Configure settings that apply to all partner portal instances"})]}),e.jsxs(d,{className:"border-lime-500/20 bg-lime-500/5",children:[e.jsx(m,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-lime-500/10",children:e.jsx(_,{className:"h-6 w-6 text-lime-500"})}),e.jsxs("div",{children:[e.jsx(x,{className:"text-lg",children:"Global Partner Discount"}),e.jsx(u,{children:"Set the discount percentage partners receive on all AI Agents"})]})]})}),e.jsxs(y,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(w,{children:"Discount Percentage"}),e.jsxs("span",{className:"text-2xl font-bold text-lime-400",children:[t,"%"]})]}),e.jsx(S,{value:[t],onValueChange:s=>n(s[0]),max:100,min:0,step:5,className:"w-full"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Partners will see ",t,"% off on all agent prices in their marketplace view"]})]}),e.jsx("div",{className:"shrink-0",children:e.jsx(v,{onClick:g,disabled:i.isPending||h,className:"bg-lime-500 hover:bg-lime-600 text-black",children:"Save Changes"})})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-muted/50",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Example Pricing Preview"}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Original: "}),e.jsx("span",{className:"line-through",children:"$299/mo"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Partner Price: "}),e.jsxs("span",{className:"text-lime-400 font-bold",children:["$",(299*(1-t/100)).toFixed(2),"/mo"]})]})]})]})]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:f.map(s=>e.jsx(P,{href:s.href,target:s.external?"_blank":void 0,rel:s.external?"noopener noreferrer":void 0,children:e.jsx(d,{className:"h-full transition-colors hover:bg-accent/50 cursor-pointer",children:e.jsxs(m,{className:"flex flex-row items-center gap-4",children:[e.jsx("div",{className:`p-2 rounded-lg bg-muted ${s.color}`,children:e.jsx(s.icon,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx(x,{className:"text-lg",children:s.title}),e.jsx(u,{children:s.description})]})]})})},s.title))})]})}export{V as default};
