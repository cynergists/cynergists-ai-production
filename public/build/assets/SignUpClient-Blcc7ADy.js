import{r as g,q as S,j as e,H as _,L as h,d as T,aC as E,B as F,m as I,i as k}from"./app-C0WycfZe.js";import{I as x}from"./input-B1mdCLd5.js";import{P as L}from"./password-input-DPRXfJRx.js";import{P}from"./phone-input-CjUrjVoa.js";import{L as m}from"./label-BqY6sEFX.js";import{C as A}from"./checkbox-jLyXXTBW.js";import{o as D,Z as q,l as O,s as n}from"./types-XO8cAsXJ.js";/* empty css            */import"./eye-off-zCp1QL71.js";import"./eye-wgUGwrhV.js";import"./select-DQRCPwkF.js";import"./index-BdQq_4o_.js";import"./index-CQc07GE5.js";import"./Combination-COh087cd.js";import"./index-CuknWpgH.js";import"./check-43nAdBq2.js";import"./chevron-up-DGGjGr1B.js";import"./index-B-RSaXN7.js";import"./index-cEAPOc8E.js";const B=D({firstName:n().min(1,"First name is required").max(50),lastName:n().min(1,"Last name is required").max(50),email:n().email("Invalid email address"),password:n().min(8,"Password must be at least 8 characters"),companyName:n().min(1,"Company name is required").max(100),phone:n().optional(),acceptTerms:O(!0,{errorMap:()=>({message:"You must accept the terms"})})});function re(){const[r,j]=g.useState({firstName:"",lastName:"",email:"",password:"",companyName:"",phone:"",acceptTerms:!1}),[t,d]=g.useState({}),[f,p]=g.useState(!1),{toast:u}=S(),o=(s,a)=>{j(i=>({...i,[s]:a})),t[s]&&d(i=>({...i,[s]:""}))},v=async s=>{s.preventDefault(),p(!0),d({});try{const a=B.parse(r),i=sessionStorage.getItem("checkout_redirect");k.post("/register",{first_name:a.firstName,last_name:a.lastName,email:a.email,password:a.password,password_confirmation:a.password,company_name:a.companyName,phone:a.phone||null,accept_terms:a.acceptTerms,user_type:"client"},{onSuccess:()=>{const c={firstName:a.firstName,lastName:a.lastName,email:a.email,phone:a.phone||""},l={jobTitle:"",companyName:a.companyName,streetAddress:"",city:"",state:"",zip:""};localStorage.setItem("cynergists_checkout_contact",JSON.stringify(c)),localStorage.setItem("cynergists_checkout_company",JSON.stringify(l)),sessionStorage.setItem("isNewSignup","true"),i&&sessionStorage.removeItem("checkout_redirect"),u({title:"Account created",description:"Welcome to Cynergists! Your portal is ready."})},onError:c=>{const l={};Object.entries(c).forEach(([b,N])=>{const w=Array.isArray(N)?N[0]:N,C=b.replace("first_name","firstName").replace("last_name","lastName").replace("company_name","companyName").replace("accept_terms","acceptTerms");l[C]=w}),d(l);const y=Object.values(l)[0];y&&u({title:"Sign up failed",description:y,variant:"destructive"})},onFinish:()=>p(!1)});return}catch(a){if(a instanceof q){const i={};a.errors.forEach(c=>{c.path[0]&&(i[c.path[0]]=c.message)}),d(i),p(!1)}else u({title:"Sign up failed",description:"Something went wrong. Please try again.",variant:"destructive"}),p(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs(_,{children:[e.jsx("title",{children:"Get Started | Cynergists"}),e.jsx("meta",{name:"description",content:"Create your Cynergists account and start accessing powerful business tools and services."})]}),e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-background",children:e.jsxs("div",{className:"w-full max-w-md bg-card border border-border rounded-2xl p-8 shadow-xl",children:[e.jsxs(h,{href:"/signin",className:"inline-flex items-center text-sm text-muted-foreground hover:text-foreground mb-6",children:[e.jsx(T,{className:"h-4 w-4 mr-1"}),"Back to sign in"]}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("img",{src:E,alt:"Cynergists",className:"h-10 w-auto"})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Get Started"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create your account to access Cynergists services."})]}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"firstName",children:"First Name"}),e.jsx(x,{id:"firstName",value:r.firstName,onChange:s=>o("firstName",s.target.value),placeholder:"John",className:"bg-input border-border"}),t.firstName&&e.jsx("p",{className:"text-xs text-destructive",children:t.firstName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"lastName",children:"Last Name"}),e.jsx(x,{id:"lastName",value:r.lastName,onChange:s=>o("lastName",s.target.value),placeholder:"Doe",className:"bg-input border-border"}),t.lastName&&e.jsx("p",{className:"text-xs text-destructive",children:t.lastName})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"email",children:"Email"}),e.jsx(x,{id:"email",type:"email",value:r.email,onChange:s=>o("email",s.target.value),placeholder:"you@company.com",className:"bg-input border-border"}),t.email&&e.jsx("p",{className:"text-xs text-destructive",children:t.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"password",children:"Password"}),e.jsx(L,{id:"password",value:r.password,onChange:s=>o("password",s.target.value),placeholder:"••••••••",className:"bg-input border-border"}),t.password&&e.jsx("p",{className:"text-xs text-destructive",children:t.password})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"companyName",children:"Company Name"}),e.jsx(x,{id:"companyName",value:r.companyName,onChange:s=>o("companyName",s.target.value),placeholder:"Acme Inc.",className:"bg-input border-border"}),t.companyName&&e.jsx("p",{className:"text-xs text-destructive",children:t.companyName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"phone",children:"Phone (optional)"}),e.jsx(P,{id:"phone",value:r.phone,onChange:s=>o("phone",s)})]}),e.jsxs("div",{className:"flex items-start space-x-2 pt-2",children:[e.jsx(A,{id:"terms",checked:r.acceptTerms,onCheckedChange:s=>o("acceptTerms",s)}),e.jsxs(m,{htmlFor:"terms",className:"text-sm text-muted-foreground cursor-pointer leading-tight",children:["I accept the"," ",e.jsx(h,{href:"/terms",className:"text-primary hover:underline",children:"Terms of Service"})," ","and"," ",e.jsx(h,{href:"/privacy",className:"text-primary hover:underline",children:"Privacy Policy"})]})]}),t.acceptTerms&&e.jsx("p",{className:"text-xs text-destructive",children:t.acceptTerms}),e.jsx(F,{type:"submit",disabled:f,className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground font-semibold py-3 mt-2",children:f?e.jsx(I,{className:"h-4 w-4 animate-spin"}):"Create Account"})]}),e.jsxs("p",{className:"mt-6 text-center text-sm text-muted-foreground",children:["Already have an account?"," ",e.jsx(h,{href:"/signin",className:"text-primary hover:text-primary/80 font-medium",children:"Sign in"})]})]})})]})}export{re as default};
