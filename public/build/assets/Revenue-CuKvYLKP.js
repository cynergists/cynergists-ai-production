import{c as y,r as N,j as e,V as b,n as R,p as C,aP as w}from"./app-DEGgoab9.js";import{D as T,A as l}from"./AnalyticsCard-3H-FFUj3.js";import{C as m,b as x,c as h,d as p,a as j}from"./card-uxUAVHNy.js";import{T as D,a as P,b as v,c as i,d as A,e as c}from"./table-g-WPvQjw.js";import{u as k}from"./useSquareAnalytics-CGmGRORH.js";import{R as S}from"./receipt-Cm27LPEv.js";import{T as M}from"./trending-up-DsCTUCJo.js";import{C as O}from"./credit-card-B44tDpWx.js";import{A as U}from"./arrow-up-right-Dbe-MEX5.js";import{s as H}from"./calendar-CtSkIfb9.js";/* empty css            */import"./popover-B9mpw4eE.js";import"./Combination-Dm0hFAPF.js";import"./select-JGGC0Mgv.js";import"./index-BdQq_4o_.js";import"./index-CfEoTzS4.js";import"./index-D7gcp3at.js";import"./check-RkjWs7wE.js";import"./chevron-up-Dry_WOTS.js";import"./endOfDay-C5IUX3RF.js";import"./subYears-Blxt6Dld.js";import"./endOfMonth-9FmODkKZ.js";const B=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],L=y("ArrowDownRight",B);function ie(){const[u,f]=N.useState({from:H(new Date,30),to:new Date}),{data:s,isLoading:t,error:g}=k(u),n=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a/100);return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Revenue Analytics"}),e.jsx("p",{className:"text-muted-foreground",children:"Payment and transaction data from Square"})]}),e.jsx(T,{dateRange:u,onDateRangeChange:f})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(l,{title:"Total Revenue",value:s?.totalRevenue?n(s.totalRevenue):"—",change:s?.revenueChange,changeType:s?.revenueChangeType,icon:b,loading:t}),e.jsx(l,{title:"Transactions",value:s?.transactionCount??"—",change:s?.transactionChange,changeType:s?.transactionChangeType,icon:S,loading:t}),e.jsx(l,{title:"Average Order",value:s?.averageOrder?n(s.averageOrder):"—",description:"Per transaction",icon:M,loading:t}),e.jsx(l,{title:"Card Payments",value:s?.cardPayments??"—",description:"vs other methods",icon:O,loading:t})]}),e.jsxs(m,{children:[e.jsxs(x,{children:[e.jsx(h,{children:"Daily Revenue"}),e.jsx(p,{children:"Revenue breakdown by day"})]}),e.jsx(j,{children:t?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(R,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):g?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx("p",{children:"Unable to load revenue data"}),e.jsx("p",{className:"text-sm",children:g.message})]}):s?.dailyRevenue&&s.dailyRevenue.length>0?e.jsxs(D,{children:[e.jsx(P,{children:e.jsxs(v,{children:[e.jsx(i,{children:"Date"}),e.jsx(i,{className:"text-right",children:"Revenue"}),e.jsx(i,{className:"text-right",children:"Transactions"}),e.jsx(i,{className:"text-right",children:"Avg Order"}),e.jsx(i,{className:"text-right",children:"Change"})]})}),e.jsx(A,{children:s.dailyRevenue.map((a,r)=>{const d=s.dailyRevenue[r+1],o=d?(a.revenue-d.revenue)/d.revenue*100:0;return e.jsxs(v,{children:[e.jsx(c,{children:C(a.date)}),e.jsx(c,{className:"text-right font-medium",children:n(a.revenue)}),e.jsx(c,{className:"text-right",children:a.transactions}),e.jsx(c,{className:"text-right",children:n(a.revenue/a.transactions||0)}),e.jsx(c,{className:"text-right",children:r<s.dailyRevenue.length-1&&e.jsxs("span",{className:`flex items-center justify-end gap-1 ${o>=0?"text-green-600":"text-red-600"}`,children:[o>=0?e.jsx(U,{className:"h-4 w-4"}):e.jsx(L,{className:"h-4 w-4"}),w(Math.abs(o))]})})]},a.date)})})]}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{children:"No revenue data for the selected period"})})})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(m,{children:[e.jsxs(x,{children:[e.jsx(h,{children:"Payment Methods"}),e.jsx(p,{children:"Breakdown by payment type"})]}),e.jsx(j,{children:t?e.jsx("div",{className:"space-y-3",children:[1,2,3].map(a=>e.jsx("div",{className:"h-8 bg-muted animate-pulse rounded"},a))}):s?.paymentMethods?e.jsx("div",{className:"space-y-3",children:Object.entries(s.paymentMethods).map(([a,r])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"capitalize",children:a.replace("_"," ")}),e.jsx("span",{className:"font-medium",children:r})]},a))}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No data available"})})]}),e.jsxs(m,{children:[e.jsxs(x,{children:[e.jsx(h,{children:"Top Products"}),e.jsx(p,{children:"Best selling items"})]}),e.jsx(j,{children:t?e.jsx("div",{className:"space-y-3",children:[1,2,3].map(a=>e.jsx("div",{className:"h-8 bg-muted animate-pulse rounded"},a))}):s?.topProducts&&s.topProducts.length>0?e.jsx("div",{className:"space-y-3",children:s.topProducts.map((a,r)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-muted-foreground",children:[r+1,"."]}),e.jsx("span",{children:a.name})]}),e.jsx("span",{className:"font-medium",children:n(a.revenue)})]},a.name))}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No data available"})})]})]})]})}export{ie as default};
