import{r,j as C,_ as H,a1 as Y,a3 as G,a7 as E,a6 as V,$ as z,ae as q}from"./app-yl1YHj2k.js";import{u as J}from"./index-KgiDK8vA.js";function Q(e,t=[]){let o=[];function n(m,c){const i=r.createContext(c),l=o.length;o=[...o,c];const f=v=>{const{scope:b,children:g,...I}=v,R=b?.[e]?.[l]||i,s=r.useMemo(()=>I,Object.values(I));return C.jsx(R.Provider,{value:s,children:g})};f.displayName=m+"Provider";function u(v,b){const g=b?.[e]?.[l]||i,I=r.useContext(g);if(I)return I;if(c!==void 0)return c;throw new Error(`\`${v}\` must be used within \`${m}\``)}return[f,u]}const p=()=>{const m=o.map(c=>r.createContext(c));return function(i){const l=i?.[e]||m;return r.useMemo(()=>({[`__scope${e}`]:{...i,[e]:l}}),[i,l])}};return p.scopeName=e,[n,W(p,...t)]}function W(...e){const t=e[0];if(e.length===1)return t;const o=()=>{const n=e.map(p=>({useScope:p(),scopeName:p.scopeName}));return function(m){const c=n.reduce((i,{useScope:l,scopeName:f})=>{const v=l(m)[`__scope${f}`];return{...i,...v}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return o.scopeName=t.scopeName,o}var y="rovingFocusGroup.onEntryFocus",X={bubbles:!1,cancelable:!0},w="RovingFocusGroup",[A,N,Z]=H(w),[ee,fe]=Q(w,[Z]),[te,oe]=ee(w),O=r.forwardRef((e,t)=>C.jsx(A.Provider,{scope:e.__scopeRovingFocusGroup,children:C.jsx(A.Slot,{scope:e.__scopeRovingFocusGroup,children:C.jsx(ne,{...e,ref:t})})}));O.displayName=w;var ne=r.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:o,orientation:n,loop:p=!1,dir:m,currentTabStopId:c,defaultCurrentTabStopId:i,onCurrentTabStopIdChange:l,onEntryFocus:f,preventScrollOnEntryFocus:u=!1,...v}=e,b=r.useRef(null),g=V(t,b),I=J(m),[R,s]=z({prop:c,defaultProp:i??null,onChange:l,caller:w}),[F,T]=r.useState(!1),d=q(f),x=N(o),h=r.useRef(!1),[k,P]=r.useState(0);return r.useEffect(()=>{const a=b.current;if(a)return a.addEventListener(y,d),()=>a.removeEventListener(y,d)},[d]),C.jsx(te,{scope:o,orientation:n,dir:I,loop:p,currentTabStopId:R,onItemFocus:r.useCallback(a=>s(a),[s]),onItemShiftTab:r.useCallback(()=>T(!0),[]),onFocusableItemAdd:r.useCallback(()=>P(a=>a+1),[]),onFocusableItemRemove:r.useCallback(()=>P(a=>a-1),[]),children:C.jsx(G.div,{tabIndex:F||k===0?-1:0,"data-orientation":n,...v,ref:g,style:{outline:"none",...e.style},onMouseDown:E(e.onMouseDown,()=>{h.current=!0}),onFocus:E(e.onFocus,a=>{const L=!h.current;if(a.target===a.currentTarget&&L&&!F){const D=new CustomEvent(y,X);if(a.currentTarget.dispatchEvent(D),!D.defaultPrevented){const _=x().filter(S=>S.focusable),U=_.find(S=>S.active),B=_.find(S=>S.id===R),$=[U,B,..._].filter(Boolean).map(S=>S.ref.current);K($,u)}}h.current=!1}),onBlur:E(e.onBlur,()=>T(!1))})})}),M="RovingFocusGroupItem",j=r.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:o,focusable:n=!0,active:p=!1,tabStopId:m,children:c,...i}=e,l=Y(),f=m||l,u=oe(M,o),v=u.currentTabStopId===f,b=N(o),{onFocusableItemAdd:g,onFocusableItemRemove:I,currentTabStopId:R}=u;return r.useEffect(()=>{if(n)return g(),()=>I()},[n,g,I]),C.jsx(A.ItemSlot,{scope:o,id:f,focusable:n,active:p,children:C.jsx(G.span,{tabIndex:v?0:-1,"data-orientation":u.orientation,...i,ref:t,onMouseDown:E(e.onMouseDown,s=>{n?u.onItemFocus(f):s.preventDefault()}),onFocus:E(e.onFocus,()=>u.onItemFocus(f)),onKeyDown:E(e.onKeyDown,s=>{if(s.key==="Tab"&&s.shiftKey){u.onItemShiftTab();return}if(s.target!==s.currentTarget)return;const F=ce(s,u.orientation,u.dir);if(F!==void 0){if(s.metaKey||s.ctrlKey||s.altKey||s.shiftKey)return;s.preventDefault();let d=b().filter(x=>x.focusable).map(x=>x.ref.current);if(F==="last")d.reverse();else if(F==="prev"||F==="next"){F==="prev"&&d.reverse();const x=d.indexOf(s.currentTarget);d=u.loop?ue(d,x+1):d.slice(x+1)}setTimeout(()=>K(d))}}),children:typeof c=="function"?c({isCurrentTabStop:v,hasTabStop:R!=null}):c})})});j.displayName=M;var re={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function se(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ce(e,t,o){const n=se(e.key,o);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return re[n]}function K(e,t=!1){const o=document.activeElement;for(const n of e)if(n===o||(n.focus({preventScroll:t}),document.activeElement!==o))return}function ue(e,t){return e.map((o,n)=>e[(t+n)%e.length])}var de=O,pe=j;export{pe as I,de as R,fe as c};
