import{c as b,r as t,j as e,B as m,M as me,P as ue,w as he,a as xe,X as pe}from"./app-Ce4dIZFB.js";import{H as fe,F as ge}from"./Footer-BB3h1qeq.js";import{E as ye}from"./eye-7FHfmGld.js";import{Z as be}from"./zap-BnrzAHNp.js";import{I as je}from"./input-Ck65_zG1.js";import{S as we}from"./scroll-area-DmGKFs8l.js";import{p as ve}from"./purify.es-HRjpPm7y.js";import{E as K}from"./eye-off-Dopg9dsK.js";import{S as Ne}from"./send-B-7zc727.js";const ke=[["circle",{cx:"16",cy:"4",r:"1",key:"1grugj"}],["path",{d:"m18 19 1-7-6 1",key:"r0i19z"}],["path",{d:"m5 8 3-3 5.5 3-2.36 3.5",key:"9ptxx2"}],["path",{d:"M4.24 14.5a5 5 0 0 0 6.88 6",key:"10kmtu"}],["path",{d:"M13.76 17.5a5 5 0 0 0-6.88-6",key:"2qq6rc"}]],Se=b("Accessibility",ke);const Ce=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],Me=b("Focus",Ce);const ze=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],A=b("MessageCircle",ze);const Ee=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],He=b("MicOff",Ee);const Ae=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],Le=b("Mic",Ae);const Te=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Ie=b("Volume2",Te);const Oe=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],_e=b("VolumeX",Oe),Re=()=>{const[n,N]=t.useState(!1),[r,d]=t.useState(100),[i,h]=t.useState(!1),[c,x]=t.useState(!1),[u,p]=t.useState(!1);t.useEffect(()=>{document.documentElement.style.fontSize=`${r}%`},[r]),t.useEffect(()=>{i?document.documentElement.classList.add("high-contrast"):document.documentElement.classList.remove("high-contrast")},[i]),t.useEffect(()=>{c?document.documentElement.classList.add("reduced-motion"):document.documentElement.classList.remove("reduced-motion")},[c]),t.useEffect(()=>{u?document.documentElement.classList.add("focus-highlight"):document.documentElement.classList.remove("focus-highlight")},[u]);const j=()=>{d(100),h(!1),x(!1),p(!1)};return e.jsxs("div",{className:"fixed bottom-6 left-6 z-50",children:[n&&e.jsxs("div",{className:"absolute bottom-16 left-0 w-72 bg-background/95 backdrop-blur-sm border border-border/30 rounded-lg p-4 shadow-xl animate-fade-in",role:"dialog","aria-label":"Accessibility options",children:[e.jsx("h3",{className:"text-sm font-semibold text-foreground mb-4",children:"Accessibility Options"}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"text-xs text-muted-foreground mb-2 block",children:["Text Size: ",r,"%"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{variant:"outline",size:"sm",onClick:()=>d(Math.max(75,r-10)),"aria-label":"Decrease text size",className:"h-8 w-8 p-0",children:e.jsx(me,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex-1 h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary transition-all",style:{width:`${(r-75)/75*100}%`}})}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>d(Math.min(150,r+10)),"aria-label":"Increase text size",className:"h-8 w-8 p-0",children:e.jsx(ue,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>h(!i),className:`w-full flex items-center gap-3 p-2 rounded-md text-left text-sm transition-colors ${i?"bg-primary/20 text-primary":"hover:bg-muted"}`,"aria-pressed":i,children:[e.jsx(ye,{className:"h-4 w-4"}),e.jsx("span",{children:"High Contrast"})]}),e.jsxs("button",{onClick:()=>x(!c),className:`w-full flex items-center gap-3 p-2 rounded-md text-left text-sm transition-colors ${c?"bg-primary/20 text-primary":"hover:bg-muted"}`,"aria-pressed":c,children:[e.jsx(be,{className:"h-4 w-4"}),e.jsx("span",{children:"Reduce Motion"})]}),e.jsxs("button",{onClick:()=>p(!u),className:`w-full flex items-center gap-3 p-2 rounded-md text-left text-sm transition-colors ${u?"bg-primary/20 text-primary":"hover:bg-muted"}`,"aria-pressed":u,children:[e.jsx(Me,{className:"h-4 w-4"}),e.jsx("span",{children:"Focus Highlight"})]})]}),e.jsx(m,{variant:"ghost",size:"sm",onClick:j,className:"w-full mt-4 text-xs text-muted-foreground hover:text-foreground",children:"Reset All"})]}),e.jsx("button",{onClick:()=>N(!n),className:"h-12 w-12 rounded-full bg-background/60 hover:bg-background/80 border border-border/20 flex items-center justify-center transition-all hover:scale-105 shadow-lg","aria-label":n?"Close accessibility options":"Open accessibility options","aria-expanded":n,children:e.jsx(Se,{className:"h-5 w-5 text-muted-foreground"})})]})},Z="/build/assets/cynessa-headshot-IaRK-7ZU.webp",F="cynessa-chatbot-hidden",De="undefined/functions/v1/chat",J=n=>ve.sanitize(n,{ALLOWED_TAGS:[],ALLOWED_ATTR:[]}),$e=n=>n.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),Ve=()=>{const{url:n}=he(),r=n.split("?")[0]==="/checkout",[d,i]=t.useState(!1),[h,c]=t.useState(!1),[x,u]=t.useState(()=>{const s=localStorage.getItem(F);return s!==null?s==="true":r}),[p,j]=t.useState([{role:"assistant",content:"Hi! I'm Cynessa, your Cynergists assistant. How can I help you learn about our services today?"}]),[O,_]=t.useState(""),[k,P]=t.useState(!1),[f,S]=t.useState(!1),[X,L]=t.useState(!1),[w,G]=t.useState(!0),[C,R]=t.useState(0),[Q,U]=t.useState(!1),D=t.useRef(null),l=t.useRef(null),M=t.useRef(null),{toast:z}=xe();t.useEffect(()=>{localStorage.getItem(F)===null&&r&&u(!0)},[r]);const $=s=>{u(s),localStorage.setItem(F,String(s))};t.useEffect(()=>{if(D.current){const s=D.current.querySelector("[data-radix-scroll-area-viewport]");s&&(s.scrollTop=s.scrollHeight)}},[p]),t.useEffect(()=>{const s=window,a=s.SpeechRecognition||s.webkitSpeechRecognition;a&&(l.current=new a,l.current.continuous=!1,l.current.interimResults=!1,l.current.lang="en-US",l.current.onresult=o=>{const T=o.results[0][0].transcript;_(T),S(!1)},l.current.onerror=()=>{S(!1),z({title:"Voice Error",description:"Could not recognize speech. Please try again.",variant:"destructive"})},l.current.onend=()=>{S(!1)})},[z]);const ee=s=>{M.current={x:s.touches[0].clientX,y:s.touches[0].clientY},U(!0)},se=s=>{if(!M.current)return;const a=s.touches[0].clientX-M.current.x,o=Math.abs(s.touches[0].clientY-M.current.y);a>0&&a>o&&R(a)},te=()=>{U(!1),C>100&&(i(!1),c(!0)),R(0),M.current=null},ae=()=>{if(!l.current){z({title:"Not Supported",description:"Voice input is not supported in your browser.",variant:"destructive"});return}f?(l.current.stop(),S(!1)):(l.current.start(),S(!0))},ne=t.useCallback(s=>{if(!w||!("speechSynthesis"in window))return;window.speechSynthesis.cancel();const a=J(s),o=new SpeechSynthesisUtterance(a);o.rate=1,o.pitch=1.1,o.volume=1,o.onstart=()=>L(!0),o.onend=()=>L(!1),o.onerror=()=>L(!1),window.speechSynthesis.speak(o)},[w]),re=()=>{window.speechSynthesis.cancel(),L(!1)},W=async s=>{const a=O.trim();if(!a||k)return;if(a.length>2e3){z({title:"Message too long",description:"Please keep your message under 2000 characters.",variant:"destructive"});return}const T={role:"user",content:$e(a)};j(g=>[...g,T]),_(""),P(!0);let I="";try{const g=await fetch(De,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer undefined"},body:JSON.stringify({messages:[...p,T]})});if(!g.ok){const H=await g.json().catch(()=>({}));throw new Error(H.error||"Failed to get response")}if(!g.body)throw new Error("No response body");const v=g.body.getReader(),oe=new TextDecoder;let E="";for(j(H=>[...H,{role:"assistant",content:""}]);;){const{done:H,value:ce}=await v.read();if(H)break;E+=oe.decode(ce,{stream:!0});let V;for(;(V=E.indexOf(`
`))!==-1;){let y=E.slice(0,V);if(E=E.slice(V+1),y.endsWith("\r")&&(y=y.slice(0,-1)),y.startsWith(":")||y.trim()===""||!y.startsWith("data: "))continue;const Y=y.slice(6).trim();if(Y==="[DONE]")break;try{const B=JSON.parse(Y).choices?.[0]?.delta?.content;if(B){const le=J(B);I+=le,j(de=>{const q=[...de];return q[q.length-1]={role:"assistant",content:I},q})}}catch{}}}I&&w&&ne(I)}catch{z({title:"Error",description:"Unable to send message. Please try again.",variant:"destructive"}),j(v=>v[v.length-1]?.content===""?v.slice(0,-1):v)}finally{P(!1)}},ie=s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),W())};return e.jsxs(e.Fragment,{children:[x&&e.jsxs("button",{onClick:()=>$(!1),className:"fixed bottom-6 right-6 z-50 px-3 py-1.5 bg-primary/20 hover:bg-primary/30 border border-primary/30 rounded-md shadow-sm flex items-center gap-1.5 transition-all hover:scale-105 text-xs text-primary","aria-label":"Show Cynessa",children:[e.jsx(A,{className:"h-3 w-3"}),e.jsx("span",{children:"Show Chat"})]}),!x&&h&&!d&&e.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>{$(!0),c(!1)},className:"px-2 py-1 bg-primary/20 hover:bg-primary/30 border border-primary/30 rounded text-xs text-primary flex items-center gap-1 transition-all","aria-label":"Hide Cynessa",children:[e.jsx(K,{className:"h-3 w-3"}),e.jsx("span",{children:"Hide"})]}),e.jsx("button",{onClick:()=>c(!1),className:"w-14 h-14 bg-primary hover:bg-primary/90 rounded-full shadow-lg flex items-center justify-center transition-all hover:scale-105","aria-label":"Open chat with Cynessa",children:e.jsx(A,{className:"h-6 w-6 text-primary-foreground"})})]}),!x&&!h&&!d&&e.jsxs("div",{className:"fixed bottom-6 right-6 z-50",children:[e.jsxs("button",{onClick:()=>i(!0),className:"group","aria-label":"Chat with Cynessa",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:Z,alt:"Cynessa - Your Cynergists Assistant",className:"w-[120px] h-[120px] rounded-full object-cover object-top border-2 border-primary shadow-lg transition-all group-hover:scale-105 group-hover:border-primary/80"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-primary rounded-full flex items-center justify-center shadow-md",children:e.jsx(A,{className:"h-3 w-3 text-primary-foreground"})})]}),e.jsx("span",{className:"absolute -top-8 right-0 bg-background/90 border border-border/50 text-foreground text-xs px-2 py-1 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap shadow-md",children:"Chat with Cynessa"})]}),e.jsxs("button",{onClick:()=>{$(!0)},className:"absolute -bottom-1 -left-1 px-2 py-1 bg-primary/20 hover:bg-primary/30 border border-primary/30 rounded text-xs text-primary flex items-center gap-1 transition-all shadow-md","aria-label":"Hide Cynessa",children:[e.jsx(K,{className:"h-3 w-3"}),e.jsx("span",{children:"Hide"})]})]}),!x&&d&&e.jsxs("div",{className:"fixed bottom-6 right-6 z-50 w-[380px] max-w-[calc(100vw-3rem)] h-[520px] max-h-[calc(100vh-6rem)] bg-background border border-border/30 rounded-xl shadow-2xl flex flex-col animate-fade-in touch-pan-y",style:{transform:`translateX(${C}px)`,transition:Q?"none":"transform 0.3s ease-out",opacity:C>0?Math.max(.3,1-C/200):1},onTouchStart:ee,onTouchMove:se,onTouchEnd:te,children:[C>20&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/80 rounded-xl z-10 pointer-events-none",children:e.jsxs("div",{className:"text-center",children:[e.jsx(A,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Swipe right to minimize"})]})}),e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border/30 bg-gradient-to-r from-primary/10 to-secondary/10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:Z,alt:"Cynessa",className:"w-10 h-10 rounded-full object-cover object-top border border-primary/50"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Cynessa"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:X?"Speaking...":f?"Listening...":k?"Thinking...":"Your Cynergists Assistant"})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>G(!w),className:"h-8 w-8 p-0","aria-label":w?"Disable voice responses":"Enable voice responses",children:w?e.jsx(Ie,{className:"h-4 w-4 text-primary"}):e.jsx(_e,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>{i(!1),c(!0)},className:"h-8 w-8 p-0","aria-label":"Minimize to bubble",title:"Minimize",children:e.jsx(A,{className:"h-4 w-4"})}),e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>i(!1),className:"h-8 w-8 p-0","aria-label":"Close chat",children:e.jsx(pe,{className:"h-4 w-4"})})]})]}),e.jsx(we,{ref:D,className:"flex-1 p-4",children:e.jsx("div",{className:"space-y-4",children:p.map((s,a)=>e.jsx("div",{className:`flex ${s.role==="user"?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[85%] rounded-lg px-4 py-2 text-sm ${s.role==="user"?"bg-primary text-primary-foreground":"bg-muted text-foreground"}`,children:s.content||(k&&a===p.length-1?e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"animate-pulse",children:"●"}),e.jsx("span",{className:"animate-pulse",style:{animationDelay:"150ms"},children:"●"}),e.jsx("span",{className:"animate-pulse",style:{animationDelay:"300ms"},children:"●"})]}):"")})},a))})}),X&&e.jsxs("div",{className:"px-4 py-2 bg-primary/10 border-t border-border/30 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-1 h-3 bg-primary rounded-full animate-soundwave",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-1 h-3 bg-primary rounded-full animate-soundwave",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-1 h-3 bg-primary rounded-full animate-soundwave",style:{animationDelay:"300ms"}})]}),e.jsx("span",{className:"text-xs text-primary",children:"Cynessa is speaking..."})]}),e.jsx(m,{variant:"ghost",size:"sm",onClick:re,className:"h-6 text-xs",children:"Stop"})]}),e.jsx("div",{className:"p-4 border-t border-border/30",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{variant:"ghost",size:"sm",onClick:ae,className:`h-10 w-10 p-0 shrink-0 ${f?"bg-cyan-500/20 text-cyan-400 animate-pulse":""}`,"aria-label":f?"Stop listening":"Start voice input",children:f?e.jsx(He,{className:"h-4 w-4"}):e.jsx(Le,{className:"h-4 w-4"})}),e.jsx(je,{value:O,onChange:s=>_(s.target.value),onKeyDown:ie,placeholder:f?"Listening...":"Ask Cynessa anything...",disabled:k||f,maxLength:2e3,className:"flex-1"}),e.jsx(m,{onClick:()=>W(),disabled:!O.trim()||k,size:"sm",className:"h-10 w-10 p-0 shrink-0","aria-label":"Send message",children:e.jsx(Ne,{className:"h-4 w-4"})})]})})]})]})},Je=({children:n,searchQuery:N,onSearchChange:r,categories:d,selectedCategories:i,onCategoryChange:h})=>e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(fe,{searchQuery:N,onSearchChange:r,categories:d,selectedCategories:i,onCategoryChange:h}),e.jsx("main",{className:"flex-1 pt-20",children:n}),e.jsx(ge,{}),e.jsx(Re,{}),e.jsx(Ve,{})]});export{Je as L,Le as M,_e as V,Ie as a};
