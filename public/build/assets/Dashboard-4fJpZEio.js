import{r as x,h as C,bb as k,a as S,j as e,B as h,i as D,U as y,m as L,V as b,L as p,A as g}from"./app-Ce4dIZFB.js";import{C as t,a as r,b as l,c as i,d as N}from"./card-adEYQJfr.js";import{S as j}from"./skeleton-Bh3VGAjP.js";import{C as E}from"./copy-BvlsuS1L.js";import{E as _}from"./external-link-D9Ft2l4R.js";import{T as P}from"./trending-up-Dxs1uZgs.js";import{C as R}from"./circle-check-C5azxLhg.js";/* empty css            */const w={total_referrals:0,qualified_referrals:0,pending_referrals:0,total_deals:0,open_deals:0,closed_won_deals:0,total_deal_value:0,pending_commissions:0,earned_commissions:0,payable_commissions:0,paid_commissions:0,next_payout_date:null,next_payout_amount:0,deals_new:0,deals_in_progress:0,deals_closed_won:0,deals_closed_lost:0,referrals_last_30_days:0,earned_this_month:0,paid_ytd:0};function T(a){const[u,s]=x.useState(null),[c,d]=x.useState(!0),[o,f]=x.useState(null),n=x.useCallback(async()=>{if(!a){s(w),d(!1);return}try{d(!0),f(null);const m=await C.get(`/api/partner-dashboard/${a}`);s(m||w)}catch(m){console.error("Error fetching dashboard stats:",m),f("Failed to load dashboard stats"),s(w)}finally{d(!1)}},[a]);return x.useEffect(()=>{n()},[n]),{stats:u,isLoading:c,error:o,refetch:n}}function $(){const{partner:a,status:u}=k(),{stats:s,isLoading:c}=T(a?.id),{toast:d}=S(),o=a?.slug?`${window.location.origin}/p/${a.slug}`:null,f=()=>{o&&(navigator.clipboard.writeText(o),d({title:"Link copied!",description:"Your referral link has been copied to clipboard."}))},n=v=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(v),m=u==="pending";return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Partner Dashboard"}),e.jsxs("p",{className:"text-muted-foreground mt-1",children:["Welcome back, ",a?.first_name||"Partner","! Here's your performance overview."]})]}),o&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-muted rounded-lg",children:[e.jsx("span",{className:"text-sm text-muted-foreground truncate max-w-[200px]",children:o}),e.jsx(h,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:f,children:e.jsx(E,{className:"h-4 w-4"})}),e.jsx("a",{href:o,target:"_blank",rel:"noopener noreferrer",children:e.jsx(h,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(_,{className:"h-4 w-4"})})})]})})]}),m&&e.jsx(t,{className:"border-yellow-500/50 bg-yellow-500/10",children:e.jsxs(r,{className:"flex items-start gap-4 py-4",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-yellow-500/20 flex items-center justify-center flex-shrink-0",children:e.jsx(D,{className:"h-5 w-5 text-yellow-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Account Pending Activation"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Your partner account is being reviewed. You can view deals and commissions, access the marketing center, and generate referral links. Full payout and reporting features will be available once your account is activated."})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(t,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(i,{className:"text-sm font-medium text-muted-foreground",children:"Total Referrals"}),e.jsx(y,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[c?e.jsx(j,{className:"h-8 w-16"}):e.jsx("div",{className:"text-2xl font-bold",children:s?.total_referrals||0}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[s?.qualified_referrals||0," qualified"]})]})]}),e.jsxs(t,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(i,{className:"text-sm font-medium text-muted-foreground",children:"Closed Deals"}),e.jsx(L,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[c?e.jsx(j,{className:"h-8 w-16"}):e.jsx("div",{className:"text-2xl font-bold",children:s?.closed_won_deals||0}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[n(s?.total_deal_value||0)," total value"]})]})]}),e.jsxs(t,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(i,{className:"text-sm font-medium text-muted-foreground",children:"Pending Commissions"}),e.jsx(b,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[c?e.jsx(j,{className:"h-8 w-20"}):e.jsx("div",{className:"text-2xl font-bold text-primary",children:n((s?.pending_commissions||0)+(s?.earned_commissions||0)+(s?.payable_commissions||0))}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[n(s?.payable_commissions||0)," ready for payout"]})]})]}),e.jsxs(t,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(i,{className:"text-sm font-medium text-muted-foreground",children:"Total Earned"}),e.jsx(P,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(r,{children:[c?e.jsx(j,{className:"h-8 w-24"}):e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:n(s?.paid_commissions||0)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Lifetime earnings"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(t,{className:"hover:border-primary/50 transition-colors",children:e.jsxs(p,{href:"/partner/referrals",children:[e.jsxs(l,{children:[e.jsxs(i,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5 text-primary"}),"Submit Referral"]}),e.jsx(N,{children:"Register a new lead for attribution"})]}),e.jsx(r,{children:e.jsxs(h,{variant:"ghost",className:"gap-2 p-0 h-auto",children:["Go to Referrals ",e.jsx(g,{className:"h-4 w-4"})]})})]})}),e.jsx(t,{className:"hover:border-primary/50 transition-colors",children:e.jsxs(p,{href:"/partner/marketing",children:[e.jsxs(l,{children:[e.jsxs(i,{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5 text-primary"}),"Marketing Center"]}),e.jsx(N,{children:"Access copy, creatives, and templates"})]}),e.jsx(r,{children:e.jsxs(h,{variant:"ghost",className:"gap-2 p-0 h-auto",children:["View Resources ",e.jsx(g,{className:"h-4 w-4"})]})})]})}),e.jsx(t,{className:"hover:border-primary/50 transition-colors",children:e.jsxs(p,{href:"/partner/commissions",children:[e.jsxs(l,{children:[e.jsxs(i,{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-5 w-5 text-primary"}),"View Commissions"]}),e.jsx(N,{children:"Track your earnings and payouts"})]}),e.jsx(r,{children:e.jsxs(h,{variant:"ghost",className:"gap-2 p-0 h-auto",children:["View Details ",e.jsx(g,{className:"h-4 w-4"})]})})]})})]}),u==="active"&&s?.next_payout_date&&e.jsxs(t,{children:[e.jsx(l,{children:e.jsxs(i,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5 text-green-500"}),"Upcoming Payout"]})}),e.jsx(r,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Scheduled for"}),e.jsx("p",{className:"text-lg font-semibold",children:new Date(s.next_payout_date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Amount"}),e.jsx("p",{className:"text-2xl font-bold text-primary",children:n(s.next_payout_amount)})]})]})})]}),e.jsxs(t,{children:[e.jsx(l,{children:e.jsx(i,{children:"Your Commission Structure"})}),e.jsx(r,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsxs("span",{className:"text-2xl font-bold text-primary",children:[Math.round((a?.commission_rate||.2)*100),"%"]})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Flat Commission Rate"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Earn ",Math.round((a?.commission_rate||.2)*100),"% on all products and services. Commissions are paid monthly on the 1st after a 30-day clawback window."]})]})]})})]})]})}export{$ as default};
